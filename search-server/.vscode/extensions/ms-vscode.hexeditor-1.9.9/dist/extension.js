var Gd=Object.create;var qi=Object.defineProperty;var Vd=Object.getOwnPropertyDescriptor;var zd=Object.getOwnPropertyNames;var Wd=Object.getPrototypeOf,$d=Object.prototype.hasOwnProperty;var cc=e=>qi(e,"__esModule",{value:!0});var Ht=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Kd=(e,r)=>{for(var t in r)qi(e,t,{get:r[t],enumerable:!0})},lc=(e,r,t,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let u of zd(r))!$d.call(e,u)&&(t||u!=="default")&&qi(e,u,{get:()=>r[u],enumerable:!(i=Vd(r,u))||i.enumerable});return e},Fr=(e,r)=>lc(cc(qi(e!=null?Gd(Wd(e)):{},"default",!r&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Xd=(e=>(r,t)=>e&&e.get(r)||(t=lc(cc({}),r,1),e&&e.set(r,t),t))(typeof WeakMap!="undefined"?new WeakMap:0);var ua=Ht((Bi,fc)=>{(function(e,r){typeof Bi=="object"&&typeof fc!="undefined"?r(Bi):typeof define=="function"&&define.amd?define(["exports"],r):(e=typeof globalThis!="undefined"?globalThis:e||self,r((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{},e.Microsoft.ApplicationInsights.Shims={})))})(Bi,function(e){"use strict";var r="function",t="object",i="undefined",u="prototype",a="hasOwnProperty",o="default",n=Object,s=n[u],l=n.assign,f=n.create,c=n.defineProperty,p=s[a],v=null;function m($){return $===void 0&&($=!0),(!v||!$)&&(typeof globalThis!==i&&globalThis&&(v=globalThis),typeof self!==i&&self&&(v=self),typeof window!==i&&window&&(v=window),typeof global!==i&&global&&(v=global)),v}function g($){throw new TypeError($)}function E($){var ee=f;if(ee)return ee($);if($==null)return{};var re=typeof $;re!==t&&re!==r&&g("Object prototype may only be an Object:"+$);function ve(){}return ve[u]=$,new ve}var T=(m()||{}).Symbol,P=(m()||{}).Reflect,O=!!P,A="decorate",M="metadata",j="getOwnPropertySymbols",G="iterator",B=function($){for(var ee,re=1,ve=arguments.length;re<ve;re++){ee=arguments[re];for(var Ve in ee)s[a].call(ee,Ve)&&($[Ve]=ee[Ve])}return $},Y=l||B,ne=function($,ee){return ne=n.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,ve){re.__proto__=ve}||function(re,ve){for(var Ve in ve)ve[a](Ve)&&(re[Ve]=ve[Ve])},ne($,ee)};function ye($,ee){typeof ee!==r&&ee!==null&&g("Class extends value "+String(ee)+" is not a constructor or null"),ne($,ee);function re(){this.constructor=$}$[u]=ee===null?E(ee):(re[u]=ee[u],new re)}function Re($,ee){var re={};for(var ve in $)p.call($,ve)&&ee.indexOf(ve)<0&&(re[ve]=$[ve]);if($!=null&&typeof n[j]===r)for(var Ve=0,Ae=n[j]($);Ve<Ae.length;Ve++)ee.indexOf(Ae[Ve])<0&&s.propertyIsEnumerable.call($,Ae[Ve])&&(re[Ae[Ve]]=$[Ae[Ve]]);return re}function st($,ee,re,ve){var Ve=arguments.length,Ae=Ve<3?ee:ve===null?ve=n.getOwnPropertyDescriptor(ee,re):ve,xe;if(O&&typeof P[A]===r)Ae=P[A]($,ee,re,ve);else for(var Qe=$.length-1;Qe>=0;Qe--)(xe=$[Qe])&&(Ae=(Ve<3?xe(Ae):Ve>3?xe(ee,re,Ae):xe(ee,re))||Ae);return Ve>3&&Ae&&c(ee,re,Ae),Ae}function ot($,ee){return function(re,ve){ee(re,ve,$)}}function Dt($,ee){if(O&&P[M]===r)return P[M]($,ee)}function at($,ee){for(var re in $)re!==o&&!p.call(ee,re)&&oe(ee,$,re)}function oe($,ee,re,ve){ve===void 0&&(ve=re),f?c($,ve,{enumerable:!0,get:function(){return ee[re]}}):$[ve]=ee[re]}function ge($){var ee=typeof T===r&&T[G],re=ee&&$[ee],ve=0;if(re)return re.call($);if($&&typeof $.length=="number")return{next:function(){return $&&ve>=$.length&&($=void 0),{value:$&&$[ve++],done:!$}}};g(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}function le($,ee){var re=typeof T===r&&$[T[G]];if(!re)return $;var ve=re.call($),Ve,Ae=[],xe;try{for(;(ee===void 0||ee-- >0)&&!(Ve=ve.next()).done;)Ae.push(Ve.value)}catch(Qe){xe={error:Qe}}finally{try{Ve&&!Ve.done&&(re=ve.return)&&re.call(ve)}finally{if(xe)throw xe.error}}return Ae}function Ue(){for(var $=arguments,ee=0,re=0,ve=$.length;re<ve;re++)ee+=$[re].length;for(var Ve=Array(ee),Ae=0,re=0;re<ve;re++)for(var xe=$[re],Qe=0,At=xe.length;Qe<At;Qe++,Ae++)Ve[Ae]=xe[Qe];return Ve}function X($,ee){for(var re=0,ve=ee.length,Ve=$.length;re<ve;re++,Ve++)$[Ve]=ee[re];return $}function Ee($,ee){return c?c($,"raw",{value:ee}):$.raw=ee,$}function se($){if($&&$.__esModule)return $;var ee={};if($!=null)for(var re in $)re!==o&&Object.prototype.hasOwnProperty.call($,re)&&oe(ee,$,re);return f?c(ee,o,{enumerable:!0,value:$}):ee[o]=$,ee}function We($){return $&&$.__esModule?$:{strDefault:$}}function rt(){var $=m()||{};(function(ee,re,ve,Ve){ee.__assign||(ee.__assign=l||re),ee.__extends||(ee.__extends=ve),ee.__createBinding||(ee.__createBinding=Ve)})($,Y,ye,oe),__assign||(__assign=$.__assign),__extends||(__extends=$.__extends),__createBinding||(__createBinding=$.__createBinding)}e.ObjAssign=l,e.ObjClass=n,e.ObjCreate=f,e.ObjDefineProperty=c,e.ObjHasOwnProperty=p,e.ObjProto=s,e.__assignFn=Y,e.__createBindingFn=oe,e.__decorateFn=st,e.__exportStarFn=at,e.__exposeGlobalTsLib=rt,e.__extendsFn=ye,e.__importDefaultFn=We,e.__importStarFn=se,e.__makeTemplateObjectFn=Ee,e.__metadataFn=Dt,e.__paramFn=ot,e.__readFn=le,e.__restFn=Re,e.__spreadArrayFn=X,e.__spreadArraysFn=Ue,e.__valuesFn=ge,e.getGlobal=m,e.objCreateFn=E,e.strDefault=o,e.strShimFunction=r,e.strShimHasOwnProperty=a,e.strShimObject=t,e.strShimPrototype=u,e.strShimUndefined=i,e.throwTypeError=g,function($,ee,re){var ve=Object.defineProperty;if(ve)try{return ve($,ee,re)}catch{}return re&&typeof re.value!==void 0&&($[ee]=re.value),$}(e,"__esModule",{value:!0})})});var pc=Ht((Gi,dc)=>{(function(e,r){typeof Gi=="object"&&typeof dc!="undefined"?r(Gi):typeof define=="function"&&define.amd?define(["exports"],r):(e=typeof globalThis!="undefined"?globalThis:e||self,r((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{})))})(Gi,function(e){"use strict";var r=100,t="function",i="object",u="undefined",a="prototype",o="hasOwnProperty",n=Object,s=n[a],l=n.assign,f=n.create,c=n.defineProperty,p=s[o],v=null;function m(h){return h===void 0&&(h=!0),(!v||!h)&&(typeof globalThis!==u&&globalThis&&(v=globalThis),typeof self!==u&&self&&(v=self),typeof window!==u&&window&&(v=window),typeof global!==u&&global&&(v=global)),v}function g(h){throw new TypeError(h)}function E(h){var y=f;if(y)return y(h);if(h==null)return{};var b=typeof h;b!==i&&b!==t&&g("Object prototype may only be an Object:"+h);function I(){}return I[a]=h,new I}(m()||{}).Symbol,(m()||{}).Reflect;var T=function(h,y){return T=n.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,I){b.__proto__=I}||function(b,I){for(var w in I)I[o](w)&&(b[w]=I[w])},T(h,y)};function P(h,y){typeof y!==t&&y!==null&&g("Class extends value "+String(y)+" is not a constructor or null"),T(h,y);function b(){this.constructor=h}h[a]=y===null?E(y):(b[a]=y[a],new b)}function O(h,y){for(var b=0,I=y.length,w=h.length;b<I;b++,w++)h[w]=y[b];return h}var A="",M="processTelemetry",j="priority",G="setNextPlugin",B="isInitialized",Y="teardown",ne="core",ye="update",Re="disabled",st="_doTeardown",ot="processNext",Dt="resume",at="pause",oe="NotificationListener",ge="add"+oe,le="remove"+oe,Ue="eventsSent",X="eventsDiscarded",Ee="eventsSendRequest",se="perfEvent",We="toISOString",rt="endsWith",$="startsWith",ee="indexOf",re="map",ve="reduce",Ve="trim",Ae="toString",xe="__proto__",Qe="constructor",At=c,gr=n.freeze,dr=n.seal,ue=n.keys,_r=String[a],tr=_r[Ve],zt=_r[rt],Ut=_r[$],or=Date[a],rr=or[We],yr=Array.isArray,ie=s[Ae],K=p[Ae],Ne=K.call(n),Te=/-([a-z])/g,ht=/([^\w\d_$])/g,Ke=/^(\d+[\w\d_$])/,He=Object.getPrototypeOf;function $e(h){if(h){if(He)return He(h);var y=h[xe]||h[a]||h[Qe];if(y)return y}return null}function St(h){return ie.call(h)}function Tt(h,y){return typeof h===y}function Pe(h){return h===void 0||typeof h===u}function Ye(h){return!Pe(h)}function ae(h){return h===null||Pe(h)}function we(h){return!ae(h)}function Le(h,y){return!!(h&&p.call(h,y))}function he(h){return!!(h&&typeof h===i)}function ut(h){return!!(h&&typeof h===t)}function qt(h){var y=h;return y&&pe(y)&&(y=y.replace(Te,function(b,I){return I.toUpperCase()}),y=y.replace(ht,"_"),y=y.replace(Ke,function(b,I){return"_"+I})),y}function Ze(h,y){if(h)for(var b in h)p.call(h,b)&&y.call(h,b,h[b])}function $t(h,y){var b=!1;return h&&y&&!(b=h===y)&&(b=zt?h[rt](y):pr(h,y)),b}function pr(h,y){var b=!1,I=y?y.length:0,w=h?h.length:0;if(I&&w&&w>=I&&!(b=h===y)){for(var x=w-1,U=I-1;U>=0;U--){if(h[x]!=y[U])return!1;x--}b=!0}return b}function Er(h,y){var b=!1;return h&&y&&!(b=h===y)&&(b=Ut?h[$](y):Me(h,y)),b}function Me(h,y){var b=!1,I=y?y.length:0;if(h&&I&&h.length>=I&&!(b=h===y)){for(var w=0;w<I;w++)if(h[w]!==y[w])return!1;b=!0}return b}function je(h,y){return h&&y?h.indexOf(y)!==-1:!1}function Se(h){return!!(h&&ie.call(h)==="[object Date]")}var Z=yr||et;function et(h){return!!(h&&ie.call(h)==="[object Array]")}function ze(h){return!!(h&&ie.call(h)==="[object Error]")}function pe(h){return typeof h=="string"}function vt(h){return typeof h=="number"}function Et(h){return typeof h=="boolean"}function Ot(h){return typeof h=="symbol"}function Gt(h){var y=!1;if(h&&typeof h=="object"){var b=He?He(h):$e(h);b?(b[Qe]&&p.call(b,Qe)&&(b=b[Qe]),y=typeof b===t&&K.call(b)===Ne):y=!0}return y}function Wt(h){if(h)return rr?h[We]():jt(h)}function jt(h){if(h&&h.getUTCFullYear){var y=function(b){var I=String(b);return I.length===1&&(I="0"+I),I};return h.getUTCFullYear()+"-"+y(h.getUTCMonth()+1)+"-"+y(h.getUTCDate())+"T"+y(h.getUTCHours())+":"+y(h.getUTCMinutes())+":"+y(h.getUTCSeconds())+"."+String((h.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function nt(h,y,b){var I=h.length;try{for(var w=0;w<I&&!(w in h&&y.call(b||h,h[w],w,h)===-1);w++);}catch{}}function Ct(h,y,b){if(h){if(h[ee])return h[ee](y,b);var I=h.length,w=b||0;try{for(var x=Math.max(w>=0?w:I-Math.abs(w),0);x<I;x++)if(x in h&&h[x]===y)return x}catch{}}return-1}function ct(h,y,b){var I;if(h){if(h[re])return h[re](y,b);var w=h.length,x=b||h;I=new Array(w);try{for(var U=0;U<w;U++)U in h&&(I[U]=y.call(x,h[U],h))}catch{}}return I}function mt(h,y,b){var I;if(h){if(h[ve])return h[ve](y,b);var w=h.length,x=0;if(arguments.length>=3)I=arguments[2];else{for(;x<w&&!(x in h);)x++;I=h[x++]}for(;x<w;)x in h&&(I=y(I,h[x],x,h)),x++}return I}function d(h){return h&&(h=tr&&h[Ve]?h[Ve]():h.replace?h.replace(/^\s+|\s+$/g,""):h),h}var _=!{toString:null}.propertyIsEnumerable("toString"),S=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function C(h){var y=typeof h;if(y!==t&&(y!==i||h===null)&&g("objKeys called on non-object"),!_&&ue)return ue(h);var b=[];for(var I in h)h&&p.call(h,I)&&b.push(I);if(_)for(var w=S.length,x=0;x<w;x++)h&&p.call(h,S[x])&&b.push(S[x]);return b}function R(h,y,b,I){if(At)try{var w={enumerable:!0,configurable:!0};return b&&(w.get=b),I&&(w.set=I),At(h,y,w),!0}catch{}return!1}function k(h){return h}function L(h){return gr&&Ze(h,function(y,b){(Z(b)||he(b))&&gr(b)}),Q(h)}var Q=gr||k,te=dr||k;function Fe(){var h=Date;return h.now?h.now():new h().getTime()}function lt(h){return ze(h)?h.name:A}function qe(h,y,b,I,w){var x=b;return h&&(x=h[y],x!==b&&(!w||w(x))&&(!I||I(b))&&(x=b,h[y]=x)),x}function it(h,y,b){var I;return h?(I=h[y],!I&&ae(I)&&(I=Pe(b)?{}:b,h[y]=I)):I=Pe(b)?{}:b,I}function dt(h){return!h}function bt(h){return!!h}function Ft(h){throw new Error(h)}function kr(h,y){var b=null,I=null;return ut(h)?b=h:I=h,function(){var w=arguments;if(b&&(I=b()),I)return I[y].apply(I,w)}}function cr(h,y,b){if(h&&y&&he(h)&&he(y)){var I=function(x){if(pe(x)){var U=y[x];ut(U)?(!b||b(x,!0,y,h))&&(h[x]=kr(y,x)):(!b||b(x,!1,y,h))&&(Le(h,x)&&delete h[x],R(h,x,function(){return y[x]},function(W){y[x]=W})||(h[x]=U))}};for(var w in y)I(w)}return h}function hr(h,y,b,I,w){h&&y&&b&&(w!==!1||Pe(h[y]))&&(h[y]=kr(b,I))}function Hr(h,y,b,I){return h&&y&&he(h)&&Z(b)&&nt(b,function(w){pe(w)&&hr(h,w,y,w,I)}),h}function Lr(h){return function(){function y(){var b=this;h&&Ze(h,function(I,w){b[I]=w})}return y}()}function $r(h){return h&&l&&(h=n(l({},h))),h}function nr(h,y,b,I,w,x){var U=arguments,W=U[0]||{},V=U.length,be=!1,J=1;for(V>0&&Et(W)&&(be=W,W=U[J]||{},J++),he(W)||(W={});J<V;J++){var Ie=U[J],De=Z(Ie),de=he(Ie);for(var Ge in Ie){var _t=De&&Ge in Ie||de&&p.call(Ie,Ge);if(!!_t){var yt=Ie[Ge],xt=void 0;if(be&&yt&&((xt=Z(yt))||Gt(yt))){var Nt=W[Ge];xt?Z(Nt)||(Nt=[]):Gt(Nt)||(Nt={}),yt=nr(be,Nt,yt)}yt!==void 0&&(W[Ge]=yt)}}}return W}function wr(h){var y={};return Ze(h,function(b,I){y[b]=I,y[I]=b}),L(y)}function qr(h){var y={};return Ze(h,function(b,I){y[b]=b,y[I]=b}),L(y)}function Ar(h){var y={};return Ze(h,function(b,I){y[b]=I[1],y[I[0]]=I[1]}),L(y)}var br=wr({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5});var Pr="constructor",Sr="prototype",Br="function",jr="_dynInstFuncs",Kr="_isDynProxy",Or="_dynClass",Xr="_dynCls$",Gr="_dynInstChk",Cr=Gr,Tr="_dfOpts",Qr="_unknown_",H="__proto__",me="_dyn"+H,_e="_dynInstProto",Oe="useBaseInst",Xe="setInstFuncs",It=Object,gt=It.getPrototypeOf,Pt=It.getOwnPropertyNames,wt=0;function Je(h,y){return h&&It[Sr].hasOwnProperty.call(h,y)}function q(h){return h&&(h===It[Sr]||h===Array[Sr])}function ce(h){return q(h)||h===Function[Sr]}function fe(h){var y;if(h){if(gt)return gt(h);var b=h[H]||h[Sr]||(h[Pr]?h[Pr][Sr]:null);y=h[me]||b,Je(h,me)||(delete h[_e],y=h[me]=h[_e]||h[me],h[_e]=b)}return y}function Ce(h,y){var b=[];if(Pt)b=Pt(h);else for(var I in h)typeof I=="string"&&Je(h,I)&&b.push(I);if(b&&b.length>0)for(var w=0;w<b.length;w++)y(b[w])}function ft(h,y,b){return y!==Pr&&typeof h[y]===Br&&(b||Je(h,y))}function pt(h){throw new TypeError("DynamicProto: "+h)}function Kt(h){var y={};return Ce(h,function(b){!y[b]&&ft(h,b,!1)&&(y[b]=h[b])}),y}function Zt(h,y){for(var b=h.length-1;b>=0;b--)if(h[b]===y)return!0;return!1}function vr(h,y,b,I){function w(V,be,J){var Ie=be[J];if(Ie[Kr]&&I){var De=V[jr]||{};De[Cr]!==!1&&(Ie=(De[be[Or]]||{})[J]||Ie)}return function(){return Ie.apply(V,arguments)}}var x={};Ce(b,function(V){x[V]=w(y,b,V)});for(var U=fe(h),W=[];U&&!ce(U)&&!Zt(W,U);)Ce(U,function(V){!x[V]&&ft(U,V,!gt)&&(x[V]=w(y,U,V))}),W.push(U),U=fe(U);return x}function Rr(h,y,b,I){var w=null;if(h&&Je(b,Or)){var x=h[jr]||{};if(w=(x[b[Or]]||{})[y],w||pt("Missing ["+y+"] "+Br),!w[Gr]&&x[Cr]!==!1){for(var U=!Je(h,y),W=fe(h),V=[];U&&W&&!ce(W)&&!Zt(V,W);){var be=W[y];if(be){U=be===I;break}V.push(W),W=fe(W)}try{U&&(h[y]=w),w[Gr]=1}catch{x[Cr]=!1}}}return w}function nn(h,y,b){var I=y[h];return I===b&&(I=fe(y)[h]),typeof I!==Br&&pt("["+h+"] is not a "+Br),I}function zn(h,y,b,I,w){function x(V,be){var J=function(){var Ie=Rr(this,be,V,J)||nn(be,V,J);return Ie.apply(this,arguments)};return J[Kr]=1,J}if(!q(h)){var U=b[jr]=b[jr]||{},W=U[y]=U[y]||{};U[Cr]!==!1&&(U[Cr]=!!w),Ce(b,function(V){ft(b,V,!1)&&b[V]!==I[V]&&(W[V]=b[V],delete b[V],(!Je(h,V)||h[V]&&!h[V][Kr])&&(h[V]=x(h,V)))})}}function D(h,y){if(gt){for(var b=[],I=fe(y);I&&!ce(I)&&!Zt(b,I);){if(I===h)return!0;b.push(I),I=fe(I)}return!1}return!0}function F(h,y){return Je(h,Sr)?h.name||y||Qr:((h||{})[Pr]||{}).name||y||Qr}function z(h,y,b,I){Je(h,Sr)||pt("theClass is an invalid class definition.");var w=h[Sr];D(w,y)||pt("["+F(h)+"] is not in class hierarchy of ["+F(y)+"]");var x=null;Je(w,Or)?x=w[Or]:(x=Xr+F(h,"_")+"$"+wt,wt++,w[Or]=x);var U=z[Tr],W=!!U[Oe];W&&I&&I[Oe]!==void 0&&(W=!!I[Oe]);var V=Kt(y),be=vr(w,y,V,W);b(y,be);var J=!!gt&&!!U[Xe];J&&I&&(J=!!I[Xe]),zn(w,x,y,V,J!==!1)}var tt={setInstFuncs:!0,useBaseInst:!0};z[Tr]=tt;var kt="window",Vt="document",Xt="documentMode",Lt="navigator",Qt="history",Dr="location",Ir="console",En="performance",Cn="JSON",Wn="crypto",bi="msCrypto",Ef="ReactNative",So="msie",To="trident/",As="XMLHttpRequest",Io=null,wo=null,Ps=!1,Rn=null,Ao=null;function Os(h,y){var b=!1;if(h){try{if(b=y in h,!b){var I=h[a];I&&(b=y in I)}}catch{}if(!b)try{var w=new h;b=!Pe(w[y])}catch{}}return b}function bf(h){Ps=h}function lr(h){var y=m();return y&&y[h]?y[h]:h===kt&&Po()?window:null}function Po(){return Boolean(typeof window===i&&window)}function Oo(){return Po()?window:lr(kt)}function Cs(){return Boolean(typeof document===i&&document)}function on(){return Cs()?document:lr(Vt)}function Co(){return Boolean(typeof navigator===i&&navigator)}function bn(){return Co()?navigator:lr(Lt)}function Rs(){return Boolean(typeof history===i&&history)}function Sf(){return Rs()?history:lr(Qt)}function Ds(h){if(h&&Ps){var y=lr("__mockLocation");if(y)return y}return typeof location===i&&location?location:lr(Dr)}function Ns(){return typeof console!==u?console:lr(Ir)}function Ro(){return lr(En)}function Si(){return Boolean(typeof JSON===i&&JSON||lr(Cn)!==null)}function Do(){return Si()?JSON||lr(Cn):null}function xs(){return lr(Wn)}function Ms(){return lr(bi)}function Tf(){var h=bn();return h&&h.product?h.product===Ef:!1}function $n(){var h=bn();if(h&&(h.userAgent!==wo||Io===null)){wo=h.userAgent;var y=(wo||A).toLowerCase();Io=je(y,So)||je(y,To)}return Io}function If(h){if(h===void 0&&(h=null),!h){var y=bn()||{};h=y?(y.userAgent||A).toLowerCase():A}var b=(h||A).toLowerCase();if(je(b,So)){var I=on()||{};return Math.max(parseInt(b.split(So)[1]),I[Xt]||0)}else if(je(b,To)){var w=parseInt(b.split(To)[1]);if(w)return w+4}return null}function an(h){var y=Object[a].toString.call(h),b=A;return y==="[object Error]"?b="{ stack: '"+h.stack+"', message: '"+h.message+"', name: '"+h.name+"'":Si()&&(b=Do().stringify(h)),y+b}function wf(h){if(!h||!pe(h)){var y=bn()||{};h=y?(y.userAgent||A).toLowerCase():A}var b=(h||A).toLowerCase();return b.indexOf("safari")>=0}function Af(){return Ao===null&&(Ao=Co()&&Boolean(bn().sendBeacon)),Ao}function Pf(h){var y=!1;try{y=!!lr("fetch");var b=lr("Request");y&&h&&b&&(y=Os(b,"keepalive"))}catch{}return y}function Of(){return Rn===null&&(Rn=typeof XDomainRequest!==u,Rn&&ks()&&(Rn=Rn&&!Os(lr(As),"withCredentials"))),Rn}function ks(){var h=!1;try{var y=lr(As);h=!!y}catch{}return h}function Ls(h,y){if(h)for(var b=0;b<h.length;b++){var I=h[b];if(I.name&&I.name===y)return I}return{}}function js(h){var y=on();return y&&h?Ls(y.querySelectorAll("meta"),h).content:null}function Fs(h){var y,b=Ro();if(b){var I=b.getEntriesByType("navigation")||[];y=Ls((I.length>0?I[0]:{}).serverTiming,h).description}return y}var No=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],Ti=null,Ii;function Cf(h,y){return function(){var b=arguments,I=xo(y);if(I){var w=I.listener;w&&w[h]&&w[h].apply(w,b)}}}function Rf(){var h=lr("Microsoft");return h&&(Ti=h.ApplicationInsights),Ti}function xo(h){var y=Ti;return!y&&h.disableDbgExt!==!0&&(y=Ti||Rf()),y?y.ChromeDbgExt:null}function Us(h){if(!Ii){Ii={};for(var y=0;y<No.length;y++)Ii[No[y]]=Cf(No[y],h)}return Ii}var Df="AI (Internal): ",Nf="AI: ",xf="AITR_",Mf="errorToConsole",kf="warnToConsole";function Hs(h){return h?'"'+h.replace(/\"/g,A)+'"':A}function qs(h,y){var b=Ns();if(b){var I="log";b[h]&&(I=h),ut(b[I])&&b[I](y)}}var wi=function(){function h(y,b,I,w){I===void 0&&(I=!1);var x=this;x.messageId=y,x.message=(I?Nf:Df)+y;var U=A;Si()&&(U=Do().stringify(w));var W=(b?" message:"+Hs(b):A)+(w?" props:"+Hs(U):A);x.message+=W}return h.dataType="MessageData",h}();function Bs(h,y){return(h||{}).logger||new Dn(y)}var Dn=function(){function h(y){this.identifier="DiagnosticLogger",this.queue=[];var b=0,I={};z(h,this,function(w){ae(y)&&(y={}),w.consoleLoggingLevel=function(){return x("loggingLevelConsole",0)},w.telemetryLoggingLevel=function(){return x("loggingLevelTelemetry",1)},w.maxInternalMessageLimit=function(){return x("maxMessageLimit",25)},w.enableDebugExceptions=function(){return x("enableDebugExceptions",!1)},w.throwInternal=function(V,be,J,Ie,De){De===void 0&&(De=!1);var de=new wi(be,J,De,Ie);if(w.enableDebugExceptions())throw an(de);var Ge=V===1?Mf:kf;if(Pe(de.message))W("throw"+(V===1?"Critical":"Warning"),de);else{var _t=w.consoleLoggingLevel();if(De){var yt=+de.messageId;!I[yt]&&_t>=V&&(w[Ge](de.message),I[yt]=!0)}else _t>=V&&w[Ge](de.message);w.logInternalMessage(V,de)}},w.warnToConsole=function(V){qs("warn",V),W("warning",V)},w.errorToConsole=function(V){qs("error",V),W("error",V)},w.resetInternalMessageCount=function(){b=0,I={}},w.logInternalMessage=function(V,be){if(!U()){var J=!0,Ie=xf+be.messageId;if(I[Ie]?J=!1:I[Ie]=!0,J&&(V<=w.telemetryLoggingLevel()&&(w.queue.push(be),b++,W(V===1?"error":"warn",be)),b===w.maxInternalMessageLimit())){var De="Internal events throttle limit per PageView reached for this app.",de=new wi(23,De,!1);w.queue.push(de),V===1?w.errorToConsole(De):w.warnToConsole(De)}}};function x(V,be){var J=y[V];return ae(J)?be:J}function U(){return b>=w.maxInternalMessageLimit()}function W(V,be){var J=xo(y);J&&J.diagLog&&J.diagLog(V,be)}})}return h}();function Gs(h){return h||new Dn}function Sn(h,y,b,I,w,x){x===void 0&&(x=!1),(h||new Dn).throwInternal(y,b,I,w,x)}function Vs(h,y){Gs(h).warnToConsole(y)}function Lf(h,y,b){Gs(h).logInternalMessage(y,b)}var Nn="ctx",zs=null,Kn=function(){function h(y,b,I){var w=this,x=!1;if(w.start=Fe(),w.name=y,w.isAsync=I,w.isChildEvt=function(){return!1},ut(b)){var U;x=R(w,"payload",function(){return!U&&ut(b)&&(U=b(),b=null),U})}w.getCtx=function(W){return W?W===h.ParentContextKey||W===h.ChildrenContextKey?w[W]:(w[Nn]||{})[W]:null},w.setCtx=function(W,V){if(W)if(W===h.ParentContextKey)w[W]||(w.isChildEvt=function(){return!0}),w[W]=V;else if(W===h.ChildrenContextKey)w[W]=V;else{var be=w[Nn]=w[Nn]||{};be[W]=V}},w.complete=function(){var W=0,V=w.getCtx(h.ChildrenContextKey);if(Z(V))for(var be=0;be<V.length;be++){var J=V[be];J&&(W+=J.time)}w.time=Fe()-w.start,w.exTime=w.time-W,w.complete=function(){},!x&&ut(b)&&(w.payload=b())}}return h.ParentContextKey="parent",h.ChildrenContextKey="childEvts",h}(),Ws=function(){function h(y){this.ctx={},z(h,this,function(b){b.create=function(I,w,x){return new Kn(I,w,x)},b.fire=function(I){I&&(I.complete(),y&&ut(y.perfEvent)&&y.perfEvent(I))},b.setCtx=function(I,w){if(I){var x=b[Nn]=b[Nn]||{};x[I]=w}},b.getCtx=function(I){return(b[Nn]||{})[I]}})}return h}(),Mo="CoreUtils.doPerf";function ko(h,y,b,I,w){if(h){var x=h;if(ut(x.getPerfMgr)&&(x=x.getPerfMgr()),x){var U=void 0,W=x.getCtx(Mo);try{if(U=x.create(y(),I,w),U){if(W&&U.setCtx&&(U.setCtx(Kn.ParentContextKey,W),W.getCtx&&W.setCtx)){var V=W.getCtx(Kn.ChildrenContextKey);V||(V=[],W.setCtx(Kn.ChildrenContextKey,V)),V.push(U)}return x.setCtx(Mo,U),b(U)}}catch(be){U&&U.setCtx&&U.setCtx("exception",be)}finally{U&&x.fire(U),x.setCtx(Mo,W)}}}return b()}function jf(h){zs=h}function $s(){return zs}var Ks=4294967296,sn=4294967295,Xs=!1,Xn=123456789,Qn=987654321;function Qs(h){h<0&&(h>>>=0),Xn=123456789+h&sn,Qn=987654321-h&sn,Xs=!0}function Ys(){try{var h=Fe()&2147483647;Qs((Math.random()*Ks^h)+h)}catch{}}function Lo(h){return h>0?Math.floor(Tn()/sn*(h+1))>>>0:0}function Tn(h){var y=0,b=xs()||Ms();return b&&b.getRandomValues&&(y=b.getRandomValues(new Uint32Array(1))[0]&sn),y===0&&$n()&&(Xs||Ys(),y=jo()&sn),y===0&&(y=Math.floor(Ks*Math.random()|0)),h||(y>>>=0),y}function Zs(h){h?Qs(h):Ys()}function jo(h){Qn=36969*(Qn&65535)+(Qn>>16)&sn,Xn=18e3*(Xn&65535)+(Xn>>16)&sn;var y=(Qn<<16)+(Xn&65535)>>>0&sn|0;return h||(y>>>=0),y}function Fo(h){h===void 0&&(h=22);for(var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=Tn()>>>0,I=0,w=A;w.length<h;)I++,w+=y.charAt(b&63),b>>>=6,I===5&&(b=(Tn()<<2&4294967295|b&3)>>>0,I=0);return w}var Js=c,eu="2.8.4",Ff="."+Fo(6),Uf=0;function Hf(h,y,b){if(Js)try{return Js(h,y,{value:b,enumerable:!1,configurable:!0}),!0}catch{}return!1}function tu(h){return h.nodeType===1||h.nodeType===9||!+h.nodeType}function qf(h,y){var b=y[h.id];if(!b){b={};try{tu(y)&&(Hf(y,h.id,b)||(y[h.id]=b))}catch{}}return b}function Yn(h,y){return y===void 0&&(y=!1),qt(h+Uf+++(y?"."+eu:"")+Ff)}function ru(h){var y={id:Yn("_aiData-"+(h||"")+"."+eu),accept:function(b){return tu(b)},get:function(b,I,w,x){var U=b[y.id];return U?U[qt(I)]:(x&&(U=qf(y,b),U[qt(I)]=w),w)},kill:function(b,I){if(b&&b[I])try{delete b[I]}catch{}}};return y}var nu="toGMTString",iu="toUTCString",Uo="cookie",Ho="expires",qo="enabled",ou="isCookieUseDisabled",au="disableCookiesUsage",un="_ckMgr",Ai=null,Bo=null,su=null,Zn=on(),uu={},Pi={};function cu(h,y){var b=xn[un]||Pi[un];return b||(b=xn[un]=xn(h,y),Pi[un]=b),b}function Oi(h){return h?h.isEnabled():!0}function Bf(h){var y=h.cookieCfg=h.cookieCfg||{};if(qe(y,"domain",h.cookieDomain,we,ae),qe(y,"path",h.cookiePath||"/",null,ae),ae(y[qo])){var b=void 0;Pe(h[ou])||(b=!h[ou]),Pe(h[au])||(b=!h[au]),y[qo]=b}return y}function Gf(h,y){var b;if(h)b=h.getCookieMgr();else if(y){var I=y.cookieCfg;I[un]?b=I[un]:b=xn(y)}return b||(b=cu(y,(h||{}).logger)),b}function xn(h,y){var b=Bf(h||Pi),I=b.path||"/",w=b.domain,x=b[qo]!==!1,U={isEnabled:function(){var W=x&&Go(y),V=Pi[un];return W&&V&&U!==V&&(W=Oi(V)),W},setEnabled:function(W){x=W!==!1},set:function(W,V,be,J,Ie){var De=!1;if(Oi(U)){var de={},Ge=d(V||A),_t=Ge.indexOf(";");if(_t!==-1&&(Ge=d(V.substring(0,_t)),de=lu(V.substring(_t+1))),qe(de,"domain",J||w,bt,Pe),!ae(be)){var yt=$n();if(Pe(de[Ho])){var xt=Fe(),Nt=xt+be*1e3;if(Nt>0){var ar=new Date;ar.setTime(Nt),qe(de,Ho,fu(ar,yt?nu:iu)||fu(ar,yt?nu:iu)||A,bt)}}yt||qe(de,"max-age",A+be,null,Pe)}var sr=Ds();sr&&sr.protocol==="https:"&&(qe(de,"secure",null,null,Pe),Bo===null&&(Bo=!hu((bn()||{}).userAgent)),Bo&&qe(de,"SameSite","None",null,Pe)),qe(de,"path",Ie||I,null,Pe);var Be=b.setCookie||pu;Be(W,du(Ge,de)),De=!0}return De},get:function(W){var V=A;return Oi(U)&&(V=(b.getCookie||Vf)(W)),V},del:function(W,V){var be=!1;return Oi(U)&&(be=U.purge(W,V)),be},purge:function(W,V){var be,J=!1;if(Go(y)){var Ie=(be={},be.path=V||"/",be[Ho]="Thu, 01 Jan 1970 00:00:01 GMT",be);$n()||(Ie["max-age"]="0");var De=b.delCookie||pu;De(W,du(A,Ie)),J=!0}return J}};return U[un]=U,U}function Go(h){if(Ai===null){Ai=!1;try{var y=Zn||{};Ai=y[Uo]!==void 0}catch(b){Sn(h,2,68,"Cannot access document.cookie - "+lt(b),{exception:an(b)})}}return Ai}function lu(h){var y={};if(h&&h.length){var b=d(h).split(";");nt(b,function(I){if(I=d(I||A),I){var w=I.indexOf("=");w===-1?y[I]=null:y[d(I.substring(0,w))]=d(I.substring(w+1))}})}return y}function fu(h,y){return ut(h[y])?h[y]():null}function du(h,y){var b=h||A;return Ze(y,function(I,w){b+="; "+I+(ae(w)?A:"="+w)}),b}function Vf(h){var y=A;if(Zn){var b=Zn[Uo]||A;su!==b&&(uu=lu(b),su=b),y=d(uu[h]||A)}return y}function pu(h,y){Zn&&(Zn[Uo]=h+"="+y)}function hu(h){return pe(h)?!!(je(h,"CPU iPhone OS 12")||je(h,"iPad; CPU OS 12")||je(h,"Macintosh; Intel Mac OS X 10_14")&&je(h,"Version/")&&je(h,"Safari")||je(h,"Macintosh; Intel Mac OS X 10_14")&&$t(h,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||je(h,"Chrome/5")||je(h,"Chrome/6")||je(h,"UnrealEngine")&&!je(h,"Chrome")||je(h,"UCBrowser/12")||je(h,"UCBrowser/11")):!1}var vu="on",mu="attachEvent",gu="addEventListener",_u="detachEvent",yu="removeEventListener",Ci="events",Jn="visibilitychange",Ri="pagehide",Eu="pageshow",bu="unload",Su="beforeunload",Tu=Yn("aiEvtPageHide"),Iu=Yn("aiEvtPageShow"),zf=/\.[\.]+/g,Wf=/[\.]+$/,$f=1,ei=ru("events"),Kf=/^([^.]*)(?:\.(.+)|)/;function wu(h){return h&&h.replace?h.replace(/^\s*\.*|\.*\s*$/g,""):h}function Di(h,y){if(y){var b="";Z(y)?(b="",nt(y,function(w){w=wu(w),w&&(w[0]!=="."&&(w="."+w),b+=w)})):b=wu(y),b&&(b[0]!=="."&&(b="."+b),h=(h||"")+b)}var I=Kf.exec(h||"")||[];return{type:I[1],ns:(I[2]||"").replace(zf,".").replace(Wf,"").split(".").sort().join(".")}}function Xf(h,y,b){var I=[],w=ei.get(h,Ci,{},!1),x=Di(y,b);return Ze(w,function(U,W){nt(W,function(V){(!x.type||x.type===V.evtName.type)&&(!x.ns||x.ns===x.ns)&&I.push({name:V.evtName.type+(V.evtName.ns?"."+V.evtName.ns:""),handler:V.handler})})}),I}function Au(h,y,b){b===void 0&&(b=!0);var I=ei.get(h,Ci,{},b),w=I[y];return w||(w=I[y]=[]),w}function Pu(h,y,b,I){h&&y&&y.type&&(h[yu]?h[yu](y.type,b,I):h[_u]&&h[_u](vu+y.type,b))}function Qf(h,y,b,I){var w=!1;return h&&y&&y.type&&b&&(h[gu]?(h[gu](y.type,b,I),w=!0):h[mu]&&(h[mu](vu+y.type,b),w=!0)),w}function Ou(h,y,b,I){for(var w=y.length;w--;){var x=y[w];x&&(!b.ns||b.ns===x.evtName.ns)&&(!I||I(x))&&(Pu(h,x.evtName,x.handler,x.capture),y.splice(w,1))}}function Yf(h,y,b){if(y.type)Ou(h,Au(h,y.type),y,b);else{var I=ei.get(h,Ci,{});Ze(I,function(w,x){Ou(h,x,y,b)}),C(I).length===0&&ei.kill(h,Ci)}}function ti(h,y){var b;return y?(Z(y)?b=[h].concat(y):b=[h,y],b=Di("xx",b).ns.split(".")):b=h,b}function ri(h,y,b,I,w){w===void 0&&(w=!1);var x=!1;if(h)try{var U=Di(y,I);if(x=Qf(h,U,b,w),x&&ei.accept(h)){var W={guid:$f++,evtName:U,handler:b,capture:w};Au(h,U.type).push(W)}}catch{}return x}function ni(h,y,b,I,w){if(w===void 0&&(w=!1),h)try{var x=Di(y,I),U=!1;Yf(h,x,function(W){return x.ns&&!b||W.handler===b?(U=!0,!0):!1}),U||Pu(h,x,b,w)}catch{}}function Vo(h,y,b,I){return I===void 0&&(I=!1),ri(h,y,b,null,I)}function zo(h,y,b,I){I===void 0&&(I=!1),ni(h,y,b,null,I)}function Wo(h,y,b){var I=!1,w=Oo();w&&(I=ri(w,h,y,b),I=ri(w.body,h,y,b)||I);var x=on();return x&&(I=ri(x,h,y,b)||I),I}function Cu(h,y,b){var I=Oo();I&&(ni(I,h,y,b),ni(I.body,h,y,b));var w=on();w&&ni(w,h,y,b)}function Mn(h,y,b,I){var w=!1;return y&&h&&h.length>0&&nt(h,function(x){x&&(!b||Ct(b,x)===-1)&&(w=Wo(x,y,I)||w)}),w}function Ru(h,y,b,I){var w=!1;return y&&h&&Z(h)&&(w=Mn(h,y,b,I),!w&&b&&b.length>0&&(w=Mn(h,y,null,I))),w}function kn(h,y,b){h&&Z(h)&&nt(h,function(I){I&&Cu(I,y,b)})}function Zf(h,y,b){return Ru([Su,bu,Ri],h,y,b)}function Jf(h,y){kn([Su,bu,Ri],h,y)}function Du(h,y,b){function I(U){var W=on();h&&W&&W.visibilityState==="hidden"&&h(U)}var w=ti(Tu,b),x=Mn([Ri],h,y,w);return(!y||Ct(y,Jn)===-1)&&(x=Mn([Jn],I,y,w)||x),!x&&y&&(x=Du(h,null,b)),x}function ed(h,y){var b=ti(Tu,y);kn([Ri],h,b),kn([Jn],null,b)}function Nu(h,y,b){function I(U){var W=on();h&&W&&W.visibilityState==="visible"&&h(U)}var w=ti(Iu,b),x=Mn([Eu],h,y,w);return x=Mn([Jn],I,y,w)||x,!x&&y&&(x=Nu(h,null,b)),x}function td(h,y){var b=ti(Iu,y);kn([Eu],h,b),kn([Jn],null,b)}var ii=null,oi,rd=u;function xu(){function h(){return Lo(15)}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(nd,function(y){var b=h()|0,I=y==="x"?b:b&3|8;return I.toString(16)})}function Mu(){var h=Ro();return h&&h.now?h.now():Fe()}function Ni(){for(var h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],y=A,b,I=0;I<4;I++)b=Tn(),y+=h[b&15]+h[b>>4&15]+h[b>>8&15]+h[b>>12&15]+h[b>>16&15]+h[b>>20&15]+h[b>>24&15]+h[b>>28&15];var w=h[8+(Tn()&3)|0];return y.substr(0,8)+y.substr(9,4)+"4"+y.substr(13,3)+w+y.substr(16,3)+y.substr(19,12)}var $o={_canUseCookies:void 0,isTypeof:Tt,isUndefined:Pe,isNullOrUndefined:ae,hasOwnProperty:Le,isFunction:ut,isObject:he,isDate:Se,isArray:Z,isError:ze,isString:pe,isNumber:vt,isBoolean:Et,toISOString:Wt,arrForEach:nt,arrIndexOf:Ct,arrMap:ct,arrReduce:mt,strTrim:d,objCreate:E,objKeys:C,objDefineAccessors:R,addEventHandler:Wo,dateNow:Fe,isIE:$n,disableCookies:ku,newGuid:xu,perfNow:Mu,newId:Fo,randomValue:Lo,random32:Tn,mwcRandomSeed:Zs,mwcRandom32:jo,generateW3CId:Ni},nd=/[xy]/g,id={Attach:Vo,AttachEvent:Vo,Detach:zo,DetachEvent:zo};function Ln(h,y){var b=cu(h,y),I=$o._canUseCookies;return ii===null&&(ii=[],oi=I,R($o,"_canUseCookies",function(){return oi},function(w){oi=w,nt(ii,function(x){x.setEnabled(w)})})),Ct(ii,b)===-1&&ii.push(b),Et(I)&&b.setEnabled(I),Et(oi)&&b.setEnabled(oi),b}function ku(){Ln().setEnabled(!1)}function od(h){return Ln(null,h).isEnabled()}function ad(h,y){return Ln(null,h).get(y)}function sd(h,y,b,I){Ln(null,h).set(y,b,null,I)}function ud(h,y){return Ln(null,h).del(y)}var cd=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,Ko="00",Xo="ff",xi="00000000000000000000000000000000",Mi="0000000000000000",Lu=1;function Yr(h,y,b){return h&&h.length===y&&h!==b?!!h.match(/^[\da-f]*$/):!1}function ju(h,y,b){return Yr(h,y)?h:b}function Fu(h){(isNaN(h)||h<0||h>255)&&(h=1);for(var y=h.toString(16);y.length<2;)y="0"+y;return y}function ld(h,y,b,I){return{version:Yr(I,2,Xo)?I:Ko,traceId:Yo(h)?h:Ni(),spanId:Zo(y)?y:Ni().substr(0,16),traceFlags:b>=0&&b<=255?b:1}}function Qo(h){if(!h||(Z(h)&&(h=h[0]||""),!h||!pe(h)||h.length>8192))return null;var y=cd.exec(d(h));return!y||y[1]===Xo||y[2]===xi||y[3]===Mi?null:{version:y[1],traceId:y[2],spanId:y[3],traceFlags:parseInt(y[4],16)}}function Yo(h){return Yr(h,32,xi)}function Zo(h){return Yr(h,16,Mi)}function Uu(h){return!(!h||!Yr(h.version,2,Xo)||!Yr(h.traceId,32,xi)||!Yr(h.spanId,16,Mi)||!Yr(Fu(h.traceFlags),2))}function fd(h){return Uu(h)?(h.traceFlags&Lu)===Lu:!1}function dd(h){if(h){var y=Fu(h.traceFlags);Yr(y,2)||(y="01");var b=h.version||Ko;return b!=="00"&&b!=="ff"&&(b=Ko),"".concat(b,"-").concat(ju(h.traceId,32,xi),"-").concat(ju(h.spanId,16,Mi),"-").concat(y)}return""}function pd(){var h="traceparent",y=Qo(js(h));return y||(y=Qo(Fs(h))),y}var hd="_doUnload",vd=ru("plugin");function In(h){return vd.get(h,"state",{},!0)}function Jo(h,y){for(var b=[],I=null,w=h.getNext(),x;w;){var U=w.getPlugin();if(U){I&&ut(I[G])&&ut(U[M])&&I[G](U);var W=!1;ut(U[B])?W=U[B]():(x=In(U),W=x[B]),W||b.push(U),I=U,w=w.getNext()}}nt(b,function(V){var be=h.core();V.initialize(h.getCfg(),be,y,h.getNext()),x=In(V),!V[ne]&&!x[ne]&&(x[ne]=be),x[B]=!0,delete x[Y]})}function ki(h){return h.sort(function(y,b){var I=0;if(b){var w=ut(b[M]);ut(y[M])?I=w?y[j]-b[j]:1:w&&(I=-1)}else I=y?1:-1;return I})}function md(h,y,b,I){var w=0;function x(){for(;w<h.length;){var U=h[w++];if(U){var W=U[hd]||U[st];if(ut(W)&&W.call(U,y,b,x)===!0)return!0}}}return x()}function gd(h){var y={};return{getName:function(){return y.name},setName:function(b){h&&h.setName(b),y.name=b},getTraceId:function(){return y.traceId},setTraceId:function(b){h&&h.setTraceId(b),Yo(b)&&(y.traceId=b)},getSpanId:function(){return y.spanId},setSpanId:function(b){h&&h.setSpanId(b),Zo(b)&&(y.spanId=b)},getTraceFlags:function(){return y.traceFlags},setTraceFlags:function(b){h&&h.setTraceFlags(b),y.traceFlags=b}}}var _d="TelemetryPluginChain",Hu="_hasRun",qu="_getTelCtx",Bu=0;function yd(h,y,b){for(;h;){if(h.getPlugin()===b)return h;h=h.getNext()}return cn([b],y.config||{},y)}function ea(h,y,b,I){var w=null,x=[];I!==null&&(w=I?yd(h,b,I):h);var U={_next:V,ctx:{core:function(){return b},diagLog:function(){return Bs(b,y)},getCfg:function(){return y},getExtCfg:be,getConfig:J,hasNext:function(){return!!w},getNext:function(){return w},setNext:function(De){w=De},iterate:Ie,onComplete:W}};function W(De,de){for(var Ge=[],_t=2;_t<arguments.length;_t++)Ge[_t-2]=arguments[_t];De&&x.push({func:De,self:Pe(de)?U.ctx:de,args:Ge})}function V(){var De=w;if(w=De?De.getNext():null,!De){var de=x;de&&de.length>0&&(nt(de,function(Ge){try{Ge.func.call(Ge.self,Ge.args)}catch(_t){Sn(b.logger,2,73,"Unexpected Exception during onComplete - "+an(_t))}}),x=[])}return De}function be(De,de,Ge){de===void 0&&(de={}),Ge===void 0&&(Ge=0);var _t;if(y){var yt=y.extensionConfig;yt&&De&&(_t=yt[De])}if(!_t)_t=de;else if(he(de)&&Ge!==0){var xt=nr(!0,de,_t);y&&Ge===2&&Ze(de,function(Nt){if(ae(xt[Nt])){var ar=y[Nt];ae(ar)||(xt[Nt]=ar)}}),_t=xt}return _t}function J(De,de,Ge){Ge===void 0&&(Ge=!1);var _t,yt=be(De,null);return yt&&!ae(yt[de])?_t=yt[de]:y&&!ae(y[de])&&(_t=y[de]),ae(_t)?Ge:_t}function Ie(De){for(var de;de=U._next();){var Ge=de.getPlugin();Ge&&De(Ge)}}return U}function Zr(h,y,b,I){var w=ea(h,y,b,I),x=w.ctx;function U(V){var be=w._next();return be&&be.processTelemetry(V,x),!be}function W(V,be){return V===void 0&&(V=null),Z(V)&&(V=cn(V,y,b,be)),Zr(V||x.getNext(),y,b,be)}return x.processNext=U,x.createNew=W,x}function Li(h,y,b){var I=y.config||{},w=ea(h,I,y,b),x=w.ctx;function U(V){var be=w._next();return be&&be.unload(x,V),!be}function W(V,be){return V===void 0&&(V=null),Z(V)&&(V=cn(V,I,y,be)),Li(V||x.getNext(),y,be)}return x.processNext=U,x.createNew=W,x}function ta(h,y,b){var I=y.config||{},w=ea(h,I,y,b),x=w.ctx;function U(V){return x.iterate(function(be){ut(be.update)&&be.update(x,V)})}function W(V,be){return V===void 0&&(V=null),Z(V)&&(V=cn(V,I,y,be)),ta(V||x.getNext(),y,be)}return x.processNext=U,x.createNew=W,x}function cn(h,y,b,I){var w=null,x=!I;if(Z(h)&&h.length>0){var U=null;nt(h,function(W){if(!x&&I===W&&(x=!0),x&&W&&ut(W.processTelemetry)){var V=Ed(W,y,b);w||(w=V),U&&U._setNext(V),U=V}})}return I&&!w?cn([I],y,b):w}function Ed(h,y,b){var I=null,w=ut(h.processTelemetry),x=ut(h.setNextPlugin),U;h?U=h.identifier+"-"+h.priority+"-"+Bu++:U="Unknown-0-"+Bu++;var W={getPlugin:function(){return h},getNext:function(){return I},processTelemetry:J,unload:Ie,update:De,_id:U,_setNext:function(de){I=de}};function V(){var de;return h&&ut(h[qu])&&(de=h[qu]()),de||(de=Zr(W,y,b)),de}function be(de,Ge,_t,yt,xt){var Nt=!1,ar=h?h.identifier:_d,sr=de[Hu];return sr||(sr=de[Hu]={}),de.setNext(I),h&&ko(de[ne](),function(){return ar+":"+_t},function(){sr[U]=!0;try{var Be=I?I._id:A;Be&&(sr[Be]=!1),Nt=Ge(de)}catch(jn){var ai=I?sr[I._id]:!0;ai&&(Nt=!0),(!I||!ai)&&Sn(de.diagLog(),1,73,"Plugin ["+ar+"] failed during "+_t+" - "+an(jn)+", run flags: "+an(sr))}},yt,xt),Nt}function J(de,Ge){Ge=Ge||V();function _t(yt){if(!h||!w)return!1;var xt=In(h);return xt.teardown||xt[Re]?!1:(x&&h.setNextPlugin(I),h.processTelemetry(de,yt),!0)}be(Ge,_t,"processTelemetry",function(){return{item:de}},!de.sync)||Ge.processNext(de)}function Ie(de,Ge){function _t(){var yt=!1;if(h){var xt=In(h),Nt=h[ne]||xt.core;h&&(!Nt||Nt===de[ne]())&&!xt[Y]&&(xt[ne]=null,xt[Y]=!0,xt[B]=!1,h[Y]&&h[Y](de,Ge)===!0&&(yt=!0))}return yt}be(de,_t,"unload",function(){},Ge.isAsync)||de.processNext(Ge)}function De(de,Ge){function _t(){var yt=!1;if(h){var xt=In(h),Nt=h[ne]||xt.core;h&&(!Nt||Nt===de[ne]())&&!xt[Y]&&h[ye]&&h[ye](de,Ge)===!0&&(yt=!0)}return yt}be(de,_t,"update",function(){},!1)||de.processNext(Ge)}return Q(W)}var bd=function(){function h(y,b,I,w){var x=this,U=Zr(y,b,I,w);Hr(x,U,C(U))}return h}(),Sd="iKey",Gu="extensionConfig",ji=500,Td="Channel has invalid priority - ";function Vu(h,y,b,I){y&&Z(y)&&y.length>0&&(y=y.sort(function(w,x){return w.priority-x.priority}),nt(y,function(w){w.priority<ji&&Ft(Td+w.identifier)}),h.push({queue:Q(y),chain:cn(y,b,I)}))}function Id(h,y){var b;function I(){return Zr(null,y.config,y,null)}function w(J,Ie,De,de){var Ge=J?J.length+1:1;function _t(){Ge--,Ge===0&&(de&&de(),de=null)}Ge>0&&nt(J,function(yt){if(yt&&yt.queue.length>0){var xt=yt.chain,Nt=Ie.createNew(xt);Nt.onComplete(_t),De(Nt)}else Ge--}),_t()}function x(J,Ie){var De=Ie||{reason:0};return w(h,J,function(de){de[ot](De)},function(){J[ot](De)}),!0}function U(J,Ie){var De=Ie||{reason:0,isAsync:!1};return w(h,J,function(de){de[ot](De)},function(){J[ot](De),V=!1}),!0}function W(J){var Ie=null;return h&&h.length>0&&nt(h,function(De){if(De&&De.queue.length>0&&(nt(De.queue,function(de){if(de.identifier===J)return Ie=de,-1}),Ie))return-1}),Ie}var V=!1,be=(b={identifier:"ChannelControllerPlugin",priority:ji,initialize:function(J,Ie,De,de){V=!0,nt(h,function(Ge){Ge&&Ge.queue.length>0&&Jo(Zr(Ge.chain,J,Ie),De)})},isInitialized:function(){return V},processTelemetry:function(J,Ie){w(h,Ie||I(),function(De){De[ot](J)},function(){Ie[ot](J)})},update:x},b[at]=function(){w(h,I(),function(J){J.iterate(function(Ie){Ie[at]&&Ie[at]()})},null)},b[Dt]=function(){w(h,I(),function(J){J.iterate(function(Ie){Ie[Dt]&&Ie[Dt]()})},null)},b[Y]=U,b.getChannel=W,b.flush=function(J,Ie,De,de){var Ge=1,_t=!1,yt=null;de=de||5e3;function xt(){Ge--,_t&&Ge===0&&(yt&&(clearTimeout(yt),yt=null),Ie&&Ie(_t),Ie=null)}return w(h,I(),function(Nt){Nt.iterate(function(ar){if(ar.flush){Ge++;var sr=!1;ar.flush(J,function(){sr=!0,xt()},De)||sr||(J&&yt==null?yt=setTimeout(function(){yt=null,xt()},de):xt())}})},function(){_t=!0,xt()}),!0},b._setQueue=function(J){h=J},b);return be}function wd(h,y,b,I){var w=[];if(h&&nt(h,function(U){return Vu(w,U,b,I)}),y){var x=[];nt(y,function(U){U.priority>ji&&x.push(U)}),Vu(w,x,b,I)}return w}function ra(){var h=[];function y(I){I&&h.push(I)}function b(I,w){nt(h,function(x){try{x(I,w)}catch(U){Sn(I.diagLog(),2,73,"Unexpected error calling unload handler - "+an(U))}}),h=[]}return{add:y,run:b}}var ln="getPlugin",zu=function(){function h(){var y=this,b,I,w,x,U;be(),z(h,y,function(J){J.initialize=function(Ie,De,de,Ge){V(Ie,De,Ge),b=!0},J.teardown=function(Ie,De){var de=J.core;if(!de||Ie&&de!==Ie.core())return;var Ge,_t=!1,yt=Ie||Li(null,de,w&&w[ln]?w[ln]():w),xt=De||{reason:0,isAsync:!1};function Nt(){_t||(_t=!0,x.run(yt,De),nt(U,function(ar){ar.rm()}),U=[],Ge===!0&&yt.processNext(xt),be())}return!J[st]||J[st](yt,xt,Nt)!==!0?Nt():Ge=!0,Ge},J.update=function(Ie,De){var de=J.core;if(!de||Ie&&de!==Ie.core())return;var Ge,_t=!1,yt=Ie||ta(null,de,w&&w[ln]?w[ln]():w),xt=De||{reason:0};function Nt(){_t||(_t=!0,V(yt.getCfg(),yt.core(),yt.getNext()))}return!J._doUpdate||J._doUpdate(yt,xt,Nt)!==!0?Nt():Ge=!0,Ge},J._addHook=function(Ie){Ie&&(Z(Ie)?U=U.concat(Ie):U.push(Ie))},hr(J,"_addUnloadCb",function(){return x},"add")}),y.diagLog=function(J){return W(J).diagLog()},y[B]=function(){return b},y.setInitialized=function(J){b=J},y[G]=function(J){w=J},y.processNext=function(J,Ie){Ie?Ie.processNext(J):w&&ut(w.processTelemetry)&&w.processTelemetry(J,null)},y._getTelCtx=W;function W(J){J===void 0&&(J=null);var Ie=J;if(!Ie){var De=I||Zr(null,{},y.core);w&&w[ln]?Ie=De.createNew(null,w[ln]):Ie=De.createNew(null,w)}return Ie}function V(J,Ie,De){J&&qe(J,Gu,[],null,ae),!De&&Ie&&(De=Ie.getProcessTelContext().getNext());var de=w;w&&w[ln]&&(de=w[ln]()),y.core=Ie,I=Zr(De,J,Ie,de)}function be(){b=!1,y.core=null,I=null,w=null,U=[],x=ra()}}return h}(),Ad=function(h){P(y,h);function y(){var b=h.call(this)||this;b.identifier="TelemetryInitializerPlugin",b.priority=199;var I,w;x(),z(y,b,function(U,W){U.addTelemetryInitializer=function(V){var be={id:I++,fn:V};w.push(be);var J={remove:function(){nt(w,function(Ie,De){if(Ie.id===be.id)return w.splice(De,1),-1})}};return J},U.processTelemetry=function(V,be){for(var J=!1,Ie=w.length,De=0;De<Ie;++De){var de=w[De];if(de)try{if(de.fn.apply(null,[V])===!1){J=!0;break}}catch(Ge){Sn(be.diagLog(),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+lt(Ge),{exception:an(Ge)},!0)}}J||U.processNext(V,be)},U[st]=function(){x()}});function x(){I=0,w=[]}return b}return y}(zu),Wu="Plugins must provide initialize method",$u="_notificationManager",Ku="SDK is still unloading...",Pd="SDK is not initialized",Od={loggingLevelConsole:1};function Cd(h,y){return new Ws(y)}function Rd(h,y,b){var I=[],w={};return nt(b,function(x){(ae(x)||ae(x.initialize))&&Ft(Wu);var U=x.priority,W=x.identifier;x&&U&&(ae(w[U])?w[U]=W:Vs(h,"Two extensions have same priority #"+U+" - "+w[U]+", "+W)),(!U||U<y)&&I.push(x)}),{all:b,core:I}}function Xu(h,y){var b=!1;return nt(y,function(I){if(I===h)return b=!0,-1}),b}function Dd(){var h;return E((h={},h[ge]=function(y){},h[le]=function(y){},h[Ue]=function(y){},h[X]=function(y,b){},h[Ee]=function(y,b){},h))}var Qu=function(){function h(){var y,b,I,w,x,U,W,V,be,J,Ie,De,de,Ge,_t,yt,xt,Nt,ar,sr=0;z(h,this,function(Be){ai(),Be.isInitialized=function(){return y},Be.initialize=function(ke,Mt,Yt,Rt){de&&Ft(Ku),Be.isInitialized()&&Ft("Core should not be initialized more than once"),(!ke||ae(ke.instrumentationKey))&&Ft("Please provide instrumentation key"),I=Rt,Be[$u]=Rt,Be.config=ke||{},Ud(ke),Hd(ke),ke.extensions=ae(ke.extensions)?[]:ke.extensions,qd(ke),Yt&&(Be.logger=Yt),V=[],V.push.apply(V,O(O([],Mt,!1),ke.extensions)),Ie=(ke||{}).channels,aa(ke,null),(!De||De.length===0)&&Ft("No channels available"),y=!0,Be.releaseQueue()},Be.getTransmissionControls=function(){var ke=[];return De&&nt(De,function(Mt){ke.push(Mt.queue)}),Q(ke)},Be.track=function(ke){qe(ke,Sd,Be.config.instrumentationKey,null,dt),qe(ke,"time",Wt(new Date),null,dt),qe(ke,"ver","4.0",null,ae),!de&&Be.isInitialized()?jn().processNext(ke):b.push(ke)},Be.getProcessTelContext=jn,Be.getNotifyMgr=function(){return I||(I=Dd(),Be[$u]=I),I},Be[ge]=function(ke){I&&I[ge](ke)},Be[le]=function(ke){I&&I[le](ke)},Be.getCookieMgr=function(){return U||(U=xn(Be.config,Be.logger)),U},Be.setCookieMgr=function(ke){U=ke},Be.getPerfMgr=function(){return!w&&!x&&Be.config&&Be.config.enablePerfMgr&&ut(Be.config.createPerfMgr)&&(x=Be.config.createPerfMgr(Be,Be.getNotifyMgr())),w||x||$s()},Be.setPerfMgr=function(ke){w=ke},Be.eventCnt=function(){return b.length},Be.releaseQueue=function(){if(y&&b.length>0){var ke=b;b=[],nt(ke,function(Mt){jn().processNext(Mt)})}},Be.pollInternalLogs=function(ke){_t=ke||null;var Mt=Be.config.diagnosticLogInterval;return(!Mt||!(Mt>0))&&(Mt=1e4),sr&&clearInterval(sr),sr=setInterval(function(){ic()},Mt),sr},Be.stopPollingInternalLogs=function(){sr&&(clearInterval(sr),sr=0,ic())},Hr(Be,function(){return Ge},["addTelemetryInitializer"]),Be.unload=function(ke,Mt,Yt){ke===void 0&&(ke=!0),y||Ft(Pd),de&&Ft(Ku);var Rt={reason:50,isAsync:ke,flushComplete:!1},fr=Li(sa(),Be);fr.onComplete(function(){ai(),Mt&&Mt(Rt)},Be);function Nr(Jr){Rt.flushComplete=Jr,de=!0,xt.run(fr,Rt),Be.stopPollingInternalLogs(),fr.processNext(Rt)}oc(ke,Nr,6,Yt)||Nr(!1)},Be.getPlugin=rc,Be.addPlugin=function(ke,Mt,Yt,Rt){if(!ke){Rt&&Rt(!1),ac(Wu);return}var fr=rc(ke.identifier);if(fr&&!Mt){Rt&&Rt(!1),ac("Plugin ["+ke.identifier+"] is already loaded!");return}var Nr={reason:16};function Jr(Hi){V.push(ke),Nr.added=[ke],aa(Be.config,Nr),Rt&&Rt(!0)}if(fr){var fn=[fr.plugin],Fn={reason:2,isAsync:!!Yt};nc(fn,Fn,function(Hi){Hi?(Nr.removed=fn,Nr.reason|=32,Jr()):Rt&&Rt(!1)})}else Jr()},Be.evtNamespace=function(){return yt},Be.flush=oc,Be.getTraceCtx=function(ke){return ar||(ar=gd()),ar},Be.setTraceCtx=function(ke){ar=ke||null},hr(Be,"addUnloadCb",function(){return xt},"add");function ai(){y=!1,Be.config=nr(!0,{},Od),Be.logger=new Dn(Be.config),Be._extensions=[],Ge=new Ad,b=[],I=null,w=null,x=null,U=null,W=null,be=null,V=[],J=null,Ie=null,De=null,de=!1,_t=null,yt=Yn("AIBaseCore",!0),xt=ra(),ar=null}function jn(){return Zr(sa(),Be.config,Be)}function aa(ke,Mt){var Yt=Rd(Be.logger,ji,V);be=Yt.core,W=null;var Rt=Yt.all;if(De=Q(wd(Ie,Rt,ke,Be)),J){var fr=Ct(Rt,J);fr!==-1&&Rt.splice(fr,1),fr=Ct(be,J),fr!==-1&&be.splice(fr,1),J._setQueue(De)}else J=Id(De,Be);Rt.push(J),be.push(J),Be._extensions=ki(Rt),J.initialize(ke,Be,Rt),Jo(jn(),Rt),Be._extensions=Q(ki(be||[])).slice(),Mt&&Bd(Mt)}function rc(ke){var Mt=null,Yt=null;return nt(Be._extensions,function(Rt){if(Rt.identifier===ke&&Rt!==J&&Rt!==Ge)return Yt=Rt,-1}),!Yt&&J&&(Yt=J.getChannel(ke)),Yt&&(Mt={plugin:Yt,setEnabled:function(Rt){In(Yt)[Re]=!Rt},isEnabled:function(){var Rt=In(Yt);return!Rt[Y]&&!Rt[Re]},remove:function(Rt,fr){Rt===void 0&&(Rt=!0);var Nr=[Yt],Jr={reason:1,isAsync:Rt};nc(Nr,Jr,function(fn){fn&&aa(Be.config,{reason:32,removed:Nr}),fr&&fr(fn)})}}),Mt}function sa(){if(!W){var ke=(be||[]).slice();Ct(ke,Ge)===-1&&ke.push(Ge),W=cn(ki(ke),Be.config,Be)}return W}function nc(ke,Mt,Yt){if(ke&&ke.length>0){var Rt=cn(ke,Be.config,Be),fr=Li(Rt,Be);fr.onComplete(function(){var Nr=!1,Jr=[];nt(V,function(Fn,Hi){Xu(Fn,ke)?Nr=!0:Jr.push(Fn)}),V=Jr;var fn=[];Ie&&(nt(Ie,function(Fn,Hi){var sc=[];nt(Fn,function(uc){Xu(uc,ke)?Nr=!0:sc.push(uc)}),fn.push(sc)}),Ie=fn),Yt&&Yt(Nr)}),fr.processNext(Mt)}else Yt(!1)}function ic(){var ke=Be.logger?Be.logger.queue:[];ke&&(nt(ke,function(Mt){var Yt={name:_t||"InternalMessageId: "+Mt.messageId,iKey:Be.config.instrumentationKey,time:Wt(new Date),baseType:wi.dataType,baseData:{message:Mt.message}};Be.track(Yt)}),ke.length=0)}function oc(ke,Mt,Yt,Rt){return J?J.flush(ke,Mt,Yt||6,Rt):(Mt&&Mt(!1),!0)}function Ud(ke){ke.disableDbgExt===!0&&Nt&&(I[le](Nt),Nt=null),I&&!Nt&&ke.disableDbgExt!==!0&&(Nt=Us(ke),I[ge](Nt))}function Hd(ke){!ke.enablePerfMgr&&x&&(x=null),ke.enablePerfMgr&&qe(Be.config,"createPerfMgr",Cd)}function qd(ke){var Mt=it(ke,Gu);Mt.NotificationManager=I}function Bd(ke){var Mt=ta(sa(),Be);(!Be._updateHook||Be._updateHook(Mt,ke)!==!0)&&Mt.processNext(ke)}function ac(ke){var Mt=Be.logger;Mt?Sn(Mt,2,73,ke):Ft(ke)}})}return h}();function Fi(h,y,b,I){nt(h,function(w){if(w&&w[y])if(b)setTimeout(function(){return I(w)},0);else try{I(w)}catch{}})}var Yu=function(){function h(y){this.listeners=[];var b=!!(y||{}).perfEvtsSendAll;z(h,this,function(I){I[ge]=function(w){I.listeners.push(w)},I[le]=function(w){for(var x=Ct(I.listeners,w);x>-1;)I.listeners.splice(x,1),x=Ct(I.listeners,w)},I[Ue]=function(w){Fi(I.listeners,Ue,!0,function(x){x[Ue](w)})},I[X]=function(w,x){Fi(I.listeners,X,!0,function(U){U[X](w,x)})},I[Ee]=function(w,x){Fi(I.listeners,Ee,x,function(U){U[Ee](w,x)})},I[se]=function(w){w&&(b||!w.isChildEvt())&&Fi(I.listeners,se,!1,function(x){w.isAsync?setTimeout(function(){return x[se](w)},0):x[se](w)})}})}return h}(),Nd=function(h){P(y,h);function y(){var b=h.call(this)||this;return z(y,b,function(I,w){I.initialize=function(W,V,be,J){w.initialize(W,V,be||new Dn(W),J||new Yu(W))},I.track=function(W){ko(I.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){W===null&&(U(W),Ft("Invalid telemetry item")),x(W),w.track(W)},function(){return{item:W}},!W.sync)};function x(W){ae(W.name)&&(U(W),Ft("telemetry name required"))}function U(W){var V=I.getNotifyMgr();V&&V.eventsDiscarded([W],2)}}),b}return y}(Qu),xd=wr({CRITICAL:1,WARNING:2}),Md=wr({BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103,FailedAddingCustomDefinedRequestContext:104,InMemoryStorageBufferFull:105,InstrumentationKeyDeprecation:106}),Zu="_aiHooks",Ju=["req","rsp","hkErr","fnErr"];function Ui(h,y){if(h)for(var b=0;b<h.length&&!y(h[b],b);b++);}function na(h,y,b,I,w){w>=0&&w<=2&&Ui(h,function(x,U){var W=x.cbks,V=W[Ju[w]];if(V){y.ctx=function(){var Ie=I[U]=I[U]||{};return Ie};try{V.apply(y.inst,b)}catch(Ie){var be=y.err;try{var J=W[Ju[2]];J&&(y.err=Ie,J.apply(y.inst,b))}catch{}finally{y.err=be}}}})}function kd(h){return function(){var y=this,b=arguments,I=h.h,w={name:h.n,inst:y,ctx:null,set:V},x=[],U=W([w],b);w.evt=lr("event");function W(J,Ie){return Ui(Ie,function(De){J.push(De)}),J}function V(J,Ie){b=W([],b),b[J]=Ie,U=W([w],b)}na(I,w,U,x,0);var be=h.f;if(be)try{w.rslt=be.apply(y,b)}catch(J){throw w.err=J,na(I,w,U,x,3),J}return na(I,w,U,x,1),w.rslt}}function ia(h,y,b){var I=null;return h&&(Le(h,y)?I=h:b&&(I=ia($e(h),y,!1))),I}function Ld(h,y,b){return h?oa(h[a],y,b,!1):null}function jd(h,y,b){return h?tc(h[a],y,b,!1):null}function ec(h,y,b,I){var w=b&&b[Zu];if(!w){w={i:0,n:y,f:b,h:[]};var x=kd(w);x[Zu]=w,h[y]=x}var U={id:w.i,cbks:I,rm:function(){var W=this.id;Ui(w.h,function(V,be){if(V.id===W)return w.h.splice(be,1),1})}};return w.i++,w.h.push(U),U}function oa(h,y,b,I){if(I===void 0&&(I=!0),h&&y&&b){var w=ia(h,y,I);if(w){var x=w[y];if(typeof x===t)return ec(w,y,x,b)}}return null}function tc(h,y,b,I){I===void 0&&(I=!0);var w=null;return Ui(y,function(x){var U=oa(h,x,b,I);U&&(w||(w=[]),w.push(U))}),w}function Fd(h,y,b,I){if(h&&y&&b){var w=ia(h,y,I)||h;if(w)return ec(w,y,w[y],b)}return null}e.AppInsightsCore=Nd,e.BaseCore=Qu,e.BaseTelemetryPlugin=zu,e.CoreUtils=$o,e.DiagnosticLogger=Dn,e.EventHelper=id,e.EventsDiscardedReason=br,e.InstrumentEvent=Fd,e.InstrumentFunc=oa,e.InstrumentFuncs=tc,e.InstrumentProto=Ld,e.InstrumentProtos=jd,e.LoggingSeverity=xd,e.MinChannelPriorty=r,e.NotificationManager=Yu,e.PerfEvent=Kn,e.PerfManager=Ws,e.ProcessTelemetryContext=bd,e.Undefined=rd,e._InternalLogMessage=wi,e._InternalMessageId=Md,e.__getRegisteredEvents=Xf,e._legacyCookieMgr=Ln,e._logInternalMessage=Lf,e._throwInternal=Sn,e._warnToConsole=Vs,e.addEventHandler=Wo,e.addEventListeners=Ru,e.addPageHideEventListener=Du,e.addPageShowEventListener=Nu,e.addPageUnloadEventListener=Zf,e.areCookiesSupported=Go,e.arrForEach=nt,e.arrIndexOf=Ct,e.arrMap=ct,e.arrReduce=mt,e.attachEvent=Vo,e.canUseCookies=od,e.createClassFromInterface=Lr,e.createCookieMgr=xn,e.createEnumMap=qr,e.createEnumStyle=wr,e.createProcessTelemetryContext=Zr,e.createTraceParent=ld,e.createUniqueNamespace=Yn,e.createUnloadHandlerContainer=ra,e.createValueMap=Ar,e.dateNow=Fe,e.deepFreeze=L,e.deleteCookie=ud,e.detachEvent=zo,e.disableCookies=ku,e.doPerf=ko,e.dumpObj=an,e.eventOff=ni,e.eventOn=ri,e.findMetaTag=js,e.findNamedServerTiming=Fs,e.findW3cTraceParent=pd,e.formatTraceParent=dd,e.generateW3CId=Ni,e.getConsole=Ns,e.getCookie=ad,e.getCrypto=xs,e.getDebugExt=xo,e.getDebugListener=Us,e.getDocument=on,e.getExceptionName=lt,e.getGblPerfMgr=$s,e.getGlobal=m,e.getGlobalInst=lr,e.getHistory=Sf,e.getIEVersion=If,e.getJSON=Do,e.getLocation=Ds,e.getMsCrypto=Ms,e.getNavigator=bn,e.getPerformance=Ro,e.getSetValue=it,e.getWindow=Oo,e.hasDocument=Cs,e.hasHistory=Rs,e.hasJSON=Si,e.hasNavigator=Co,e.hasOwnProperty=Le,e.hasWindow=Po,e.initializePlugins=Jo,e.isArray=Z,e.isBeaconsSupported=Af,e.isBoolean=Et,e.isDate=Se,e.isError=ze,e.isFetchSupported=Pf,e.isFunction=ut,e.isIE=$n,e.isNotNullOrUndefined=we,e.isNotTruthy=dt,e.isNotUndefined=Ye,e.isNullOrUndefined=ae,e.isNumber=vt,e.isObject=he,e.isReactNative=Tf,e.isSafari=wf,e.isSampledFlag=fd,e.isString=pe,e.isSymbol=Ot,e.isTruthy=bt,e.isTypeof=Tt,e.isUndefined=Pe,e.isValidSpanId=Zo,e.isValidTraceId=Yo,e.isValidTraceParent=Uu,e.isXhrSupported=ks,e.mergeEvtNamespace=ti,e.mwcRandom32=jo,e.mwcRandomSeed=Zs,e.newGuid=xu,e.newId=Fo,e.normalizeJsName=qt,e.objCreate=E,e.objDefineAccessors=R,e.objExtend=nr,e.objForEachKey=Ze,e.objFreeze=Q,e.objKeys=C,e.objSeal=te,e.objToString=St,e.optimizeObject=$r,e.parseTraceParent=Qo,e.perfNow=Mu,e.proxyAssign=cr,e.proxyFunctionAs=hr,e.proxyFunctions=Hr,e.random32=Tn,e.randomValue=Lo,e.removeEventHandler=Cu,e.removeEventListeners=kn,e.removePageHideEventListener=ed,e.removePageShowEventListener=td,e.removePageUnloadEventListener=Jf,e.safeGetCookieMgr=Gf,e.safeGetLogger=Bs,e.setCookie=sd,e.setEnableEnvMocks=bf,e.setGblPerfMgr=jf,e.setValue=qe,e.sortPlugins=ki,e.strContains=je,e.strEndsWith=$t,e.strFunction=t,e.strObject=i,e.strPrototype=a,e.strStartsWith=Er,e.strTrim=d,e.strUndefined=u,e.throwError=Ft,e.toISOString=Wt,e.uaDisallowsSameSiteNone=hu,e.unloadComponents=md,e.useXDomainRequest=Of,function(h,y,b){var I=Object.defineProperty;if(I)try{return I(h,y,b)}catch{}return b&&typeof b.value!==void 0&&(h[y]=b.value),h}(e,"__esModule",{value:!0})})});var fa=Ht((ca,la)=>{(function(e,r){typeof ca=="object"&&typeof la!="undefined"?la.exports=r():typeof define=="function"&&define.amd?define(r):(e=typeof globalThis!="undefined"?globalThis:e||self,e.Microsoft=e.Microsoft||{},e.Microsoft["DynamicProto-JS"]=r())})(ca,function(){"use strict";var e="constructor",r="prototype",t="function",i="_dynInstFuncs",u="_isDynProxy",a="_dynClass",o="_dynCls$",n="_dynInstChk",s=n,l="_dfOpts",f="_unknown_",c="__proto__",p="_dyn"+c,v="_dynInstProto",m="useBaseInst",g="setInstFuncs",E=Object,T=E.getPrototypeOf,P=E.getOwnPropertyNames,O=0;function A(X,Ee){return X&&E[r].hasOwnProperty.call(X,Ee)}function M(X){return X&&(X===E[r]||X===Array[r])}function j(X){return M(X)||X===Function[r]}function G(X){var Ee;if(X){if(T)return T(X);var se=X[c]||X[r]||(X[e]?X[e][r]:null);Ee=X[p]||se,A(X,p)||(delete X[v],Ee=X[p]=X[v]||X[p],X[v]=se)}return Ee}function B(X,Ee){var se=[];if(P)se=P(X);else for(var We in X)typeof We=="string"&&A(X,We)&&se.push(We);if(se&&se.length>0)for(var rt=0;rt<se.length;rt++)Ee(se[rt])}function Y(X,Ee,se){return Ee!==e&&typeof X[Ee]===t&&(se||A(X,Ee))}function ne(X){throw new TypeError("DynamicProto: "+X)}function ye(X){var Ee={};return B(X,function(se){!Ee[se]&&Y(X,se,!1)&&(Ee[se]=X[se])}),Ee}function Re(X,Ee){for(var se=X.length-1;se>=0;se--)if(X[se]===Ee)return!0;return!1}function st(X,Ee,se,We){function rt(ve,Ve,Ae){var xe=Ve[Ae];if(xe[u]&&We){var Qe=ve[i]||{};Qe[s]!==!1&&(xe=(Qe[Ve[a]]||{})[Ae]||xe)}return function(){return xe.apply(ve,arguments)}}var $={};B(se,function(ve){$[ve]=rt(Ee,se,ve)});for(var ee=G(X),re=[];ee&&!j(ee)&&!Re(re,ee);)B(ee,function(ve){!$[ve]&&Y(ee,ve,!T)&&($[ve]=rt(Ee,ee,ve))}),re.push(ee),ee=G(ee);return $}function ot(X,Ee,se,We){var rt=null;if(X&&A(se,a)){var $=X[i]||{};if(rt=($[se[a]]||{})[Ee],rt||ne("Missing ["+Ee+"] "+t),!rt[n]&&$[s]!==!1){for(var ee=!A(X,Ee),re=G(X),ve=[];ee&&re&&!j(re)&&!Re(ve,re);){var Ve=re[Ee];if(Ve){ee=Ve===We;break}ve.push(re),re=G(re)}try{ee&&(X[Ee]=rt),rt[n]=1}catch{$[s]=!1}}}return rt}function Dt(X,Ee,se){var We=Ee[X];return We===se&&(We=G(Ee)[X]),typeof We!==t&&ne("["+X+"] is not a "+t),We}function at(X,Ee,se,We,rt){function $(ve,Ve){var Ae=function(){var xe=ot(this,Ve,ve,Ae)||Dt(Ve,ve,Ae);return xe.apply(this,arguments)};return Ae[u]=1,Ae}if(!M(X)){var ee=se[i]=se[i]||{},re=ee[Ee]=ee[Ee]||{};ee[s]!==!1&&(ee[s]=!!rt),B(se,function(ve){Y(se,ve,!1)&&se[ve]!==We[ve]&&(re[ve]=se[ve],delete se[ve],(!A(X,ve)||X[ve]&&!X[ve][u])&&(X[ve]=$(X,ve)))})}}function oe(X,Ee){if(T){for(var se=[],We=G(Ee);We&&!j(We)&&!Re(se,We);){if(We===X)return!0;se.push(We),We=G(We)}return!1}return!0}function ge(X,Ee){return A(X,r)?X.name||Ee||f:((X||{})[e]||{}).name||Ee||f}function le(X,Ee,se,We){A(X,r)||ne("theClass is an invalid class definition.");var rt=X[r];oe(rt,Ee)||ne("["+ge(X)+"] is not in class hierarchy of ["+ge(Ee)+"]");var $=null;A(rt,a)?$=rt[a]:($=o+ge(X,"_")+"$"+O,O++,rt[a]=$);var ee=le[l],re=!!ee[m];re&&We&&We[m]!==void 0&&(re=!!We[m]);var ve=ye(Ee),Ve=st(rt,Ee,ve,re);se(Ee,Ve);var Ae=!!T&&!!ee[g];Ae&&We&&(Ae=!!We[g]),at(rt,$,Ee,ve,Ae!==!1)}var Ue={setInstFuncs:!0,useBaseInst:!0};return le[l]=Ue,le})});var da=Ht((Vi,hc)=>{(function(e,r){typeof Vi=="object"&&typeof hc!="undefined"?r(Vi,ua(),pc(),fa()):typeof define=="function"&&define.amd?define(["exports","@microsoft/applicationinsights-shims","@microsoft/applicationinsights-core-js","@microsoft/dynamicproto-js"],r):(e=typeof globalThis!="undefined"?globalThis:e||self,r(e.oneDS=e.oneDS||{},e.applicationinsightsShims,e.applicationinsightsCoreJs,e.dynamicProto))})(Vi,function(e,r,t,i){"use strict";function u(ie){return ie&&typeof ie=="object"&&"default"in ie?ie.default:ie}var a=u(i),o=t.createEnumStyle({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),n=t.createEnumStyle({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),s=t.createEnumStyle({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),l=t.createEnumStyle({Normal:1,Critical:2}),f=t.createEnumStyle({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),c=t.objFreeze(r.__assignFn(r.__assignFn({},t._InternalMessageId),t.createEnumStyle({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),p,v="3.2.3",m="1DS-Web-JS-"+v,g="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",E="withCredentials",T="timeout",P=(p={},p[0]=0,p[2]=6,p[1]=1,p[3]=7,p[4096|2]=6,p[4096|1]=1,p[4096|3]=7,p),O=null,A=Boolean(t.getDocument()),M=Boolean(t.getWindow());function j(ie){return!(ie===""||t.isNullOrUndefined(ie))}function G(ie){if(ie){var K=ie.indexOf("-");if(K>-1)return ie.substring(0,K)}return""}function B(){return O===null&&(O=!t.isUndefined(Uint8Array)&&!Ee()&&!t.isReactNative()),O}function Y(ie){return!!(ie&&t.isNumber(ie)&&ie>=1&&ie<=4)}function ne(ie,K,Ne){if(!K&&!j(K)||typeof ie!="string")return null;var Te=typeof K;if(Te==="string"||Te==="number"||Te==="boolean"||t.isArray(K))K={value:K};else if(Te==="object"&&!K.hasOwnProperty("value"))K={value:Ne?JSON.stringify(K):K};else if(t.isNullOrUndefined(K.value)||K.value===""||!t.isString(K.value)&&!t.isNumber(K.value)&&!t.isBoolean(K.value)&&!t.isArray(K.value))return null;if(t.isArray(K.value)&&!se(K.value))return null;if(!t.isNullOrUndefined(K.kind)){if(t.isArray(K.value)||!Ue(K.kind))return null;K.value=K.value.toString()}return K}function ye(ie,K,Ne){var Te=-1;if(!t.isUndefined(ie))if(K>0&&(K===32?Te=1<<13:K<=13&&(Te=K<<5)),X(Ne))Te===-1&&(Te=0),Te|=Ne;else{var ht=P[rt(ie)]||-1;Te!==-1&&ht!==-1?Te|=ht:ht===6&&(Te=ht)}return Te}function Re(){t.safeGetCookieMgr(null).setEnabled(!1)}function st(ie,K,Ne){t.areCookiesSupported(null)&&t.safeGetCookieMgr(null).set(ie,K,Ne*86400,null,"/")}function ot(ie){t.areCookiesSupported(null)&&t.safeGetCookieMgr(null).del(ie)}function Dt(ie){return t.areCookiesSupported(null)?at(t.safeGetCookieMgr(null),ie):""}function at(ie,K,Ne){Ne===void 0&&(Ne=!0);var Te;return ie&&(Te=ie.get(K),Ne&&Te&&decodeURIComponent&&(Te=decodeURIComponent(Te))),Te||""}function oe(ie){ie===void 0&&(ie="D");var K=t.newGuid();return ie==="B"?K="{"+K+"}":ie==="P"?K="("+K+")":ie==="N"&&(K=K.replace(/-/g,"")),K}function ge(ie,K,Ne,Te,ht){var Ke={},He=!1,$e=0,St=arguments.length,Tt=Object[t.strPrototype],Pe=arguments;for(Tt.toString.call(Pe[0])==="[object Boolean]"&&(He=Pe[0],$e++);$e<St;$e++){var ie=Pe[$e];t.objForEachKey(ie,function(ae,we){He&&we&&t.isObject(we)?t.isArray(we)?(Ke[ae]=Ke[ae]||[],t.arrForEach(we,function(Le,he){Le&&t.isObject(Le)?Ke[ae][he]=ge(!0,Ke[ae][he],Le):Ke[ae][he]=Le})):Ke[ae]=ge(!0,Ke[ae],we):Ke[ae]=we})}return Ke}var le=t.perfNow;function Ue(ie){return ie===0||ie>0&&ie<=13||ie===32}function X(ie){return ie>=0&&ie<=9}function Ee(){var ie=t.getNavigator();if(!t.isUndefined(ie)&&ie.userAgent){var K=ie.userAgent.toLowerCase();if((K.indexOf("safari")>=0||K.indexOf("firefox")>=0)&&K.indexOf("chrome")<0)return!0}return!1}function se(ie){return ie.length>0}function We(ie,K){var Ne=ie;Ne.timings=Ne.timings||{},Ne.timings.processTelemetryStart=Ne.timings.processTelemetryStart||{},Ne.timings.processTelemetryStart[K]=le()}function rt(ie){var K=0;if(ie!=null){var Ne=typeof ie;Ne==="string"?K=1:Ne==="number"?K=2:Ne==="boolean"?K=3:Ne===r.strShimObject&&(K=4,t.isArray(ie)?(K=4096,ie.length>0&&(K|=rt(ie[0]))):t.hasOwnProperty(ie,"value")&&(K=8192|rt(ie.value)))}return K}var $={Version:v,FullVersionString:m,strUndefined:t.strUndefined,strObject:t.strObject,Undefined:t.strUndefined,arrForEach:t.arrForEach,arrIndexOf:t.arrIndexOf,arrMap:t.arrMap,arrReduce:t.arrReduce,objKeys:t.objKeys,toISOString:t.toISOString,isReactNative:t.isReactNative,isString:t.isString,isNumber:t.isNumber,isBoolean:t.isBoolean,isFunction:t.isFunction,isArray:t.isArray,isObject:t.isObject,strTrim:t.strTrim,isDocumentObjectAvailable:A,isWindowObjectAvailable:M,isValueAssigned:j,getTenantId:G,isBeaconsSupported:t.isBeaconsSupported,isUint8ArrayAvailable:B,isLatency:Y,sanitizeProperty:ne,getISOString:t.toISOString,useXDomainRequest:t.useXDomainRequest,getCommonSchemaMetaData:ye,cookieAvailable:t.areCookiesSupported,disallowsSameSiteNone:t.uaDisallowsSameSiteNone,setCookie:st,deleteCookie:ot,getCookie:Dt,createGuid:oe,extend:ge,getTime:le,isValueKind:Ue,isArrayValid:se,objDefineAccessors:t.objDefineAccessors,addPageUnloadEventListener:t.addPageUnloadEventListener,setProcessTelemetryTimings:We,addEventHandler:t.addEventHandler,getFieldValueType:rt,strEndsWith:t.strEndsWith,objForEachKey:t.objForEachKey},ee={_canUseCookies:void 0,isTypeof:t.isTypeof,isUndefined:t.isUndefined,isNullOrUndefined:t.isNullOrUndefined,hasOwnProperty:t.hasOwnProperty,isFunction:t.isFunction,isObject:t.isObject,isDate:t.isDate,isArray:t.isArray,isError:t.isError,isString:t.isString,isNumber:t.isNumber,isBoolean:t.isBoolean,toISOString:t.toISOString,arrForEach:t.arrForEach,arrIndexOf:t.arrIndexOf,arrMap:t.arrMap,arrReduce:t.arrReduce,strTrim:t.strTrim,objCreate:r.objCreateFn,objKeys:t.objKeys,objDefineAccessors:t.objDefineAccessors,addEventHandler:t.addEventHandler,dateNow:t.dateNow,isIE:t.isIE,disableCookies:Re,newGuid:t.newGuid,perfNow:t.perfNow,newId:t.newId,randomValue:t.randomValue,random32:t.random32,mwcRandomSeed:t.mwcRandomSeed,mwcRandom32:t.mwcRandom32,generateW3CId:t.generateW3CId};function re(){return!!t.getGlobalInst("chrome")}function ve(ie,K,Ne,Te,ht,Ke){Te===void 0&&(Te=!1),ht===void 0&&(ht=!1);function He(St,Tt,Pe){try{St[Tt]=Pe}catch{}}var $e=new XMLHttpRequest;return Te&&He($e,g,Te),Ne&&He($e,E,Ne),$e.open(ie,K,!ht),Ne&&He($e,E,Ne),!ht&&Ke&&He($e,T,Ke),$e}var Ve="version",Ae="properties",xe=function(ie){r.__extendsFn(K,ie);function K(){var Ne=ie.call(this)||this;return Ne.pluginVersionStringArr=[],Ne.pluginVersionString="",a(K,Ne,function(Te,ht){(!Te.logger||!Te.logger.queue)&&(Te.logger=new t.DiagnosticLogger({loggingLevelConsole:1})),Te.initialize=function(Ke,He,$e,St){t.doPerf(Te,function(){return"AppInsightsCore.initialize"},function(){if(Ke){Ke.endpointUrl||(Ke.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var Tt=Ke.propertyStorageOverride;if(Tt&&(!Tt.getProperty||!Tt.setProperty))throw new Error("Invalid property storage override passed.");Ke.channels&&t.arrForEach(Ke.channels,function(ae){ae&&t.arrForEach(ae,function(we){if(we.identifier&&we.version){var Le=we.identifier+"="+we.version;Te.pluginVersionStringArr.push(Le)}})})}Te.getWParam=function(){return typeof document!="undefined"?0:-1},He&&t.arrForEach(He,function(ae){if(ae&&ae.identifier&&ae.version){var we=ae.identifier+"="+ae.version;Te.pluginVersionStringArr.push(we)}}),Te.pluginVersionString=Te.pluginVersionStringArr.join(";");try{ht.initialize(Ke,He,$e,St),Te.pollInternalLogs("InternalLog")}catch(ae){var Pe=Te.logger,Ye=t.dumpObj(ae);Ye.indexOf("channels")!==-1&&(Ye+=`
 - Channels must be provided through config.channels only!`),Pe.throwInternal(1,514,"SDK Initialization Failed - no telemetry will be sent: "+Ye)}},function(){return{config:Ke,extensions:He,logger:$e,notificationManager:St}})},Te.track=function(Ke){t.doPerf(Te,function(){return"AppInsightsCore.track"},function(){var He=Ke;if(He){He.timings=He.timings||{},He.timings.trackStart=le(),Y(He.latency)||(He.latency=1);var $e=He.ext=He.ext||{};$e.sdk=$e.sdk||{},$e.sdk.ver=m;var St=He.baseData=He.baseData||{};St[Ae]||(St[Ae]={});var Tt=St[Ae];Tt[Ve]||(Tt[Ve]=""),Te.pluginVersionString!==""&&(Tt[Ve]=Te.pluginVersionString)}ht.track(He)},function(){return{item:Ke}},!Ke.sync)}}),Ne}return K}(t.AppInsightsCore),Qe=function(ie){r.__extendsFn(K,ie);function K(){var Ne=ie.call(this)||this;return a(K,Ne,function(Te,ht){Te.initialize=function(Ke,He,$e,St){Ke&&!Ke.endpointUrl&&(Ke.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/"),Te.getWParam=function(){return A?0:-1};try{ht.initialize(Ke,He,$e,St)}catch(Tt){t._throwInternal(Te.logger,1,514,"Initialization Failed: "+t.dumpObj(Tt)+`
 - Note: Channels must be provided through config.channels only`)}},Te.track=function(Ke){var He=Ke;if(He){var $e=He.ext=He.ext||{};$e.sdk=$e.sdk||{},$e.sdk.ver=m}ht.track(He)}}),Ne}return K}(t.BaseCore),At=t.isFunction;function gr(ie,K,Ne){return function(Te){ie[K]=Te,Ne()}}var dr=function(){function ie(K){var Ne=0,Te=null,ht=[];a(ie,this,function(Tt){Tt.then=function(Pe,Ye){return new ie(function(ae,we){Ke(Pe,Ye,ae,we)})},Tt.catch=function(Pe){return Tt.then(null,Pe)}});function Ke(Tt,Pe,Ye,ae){ht.push(function(){var we;try{Ne===1?we=At(Tt)?Tt(Te):Te:we=At(Pe)?Pe(Te):Te,we instanceof ie?we.then(Ye,ae):Ne===2&&!At(Pe)?ae(we):Ye(we)}catch(Le){ae(Le);return}}),Ne!==0&&He()}function He(){if(ht.length>0){var Tt=ht.slice();ht=[],setTimeout(function(){for(var Pe=0,Ye=Tt.length;Pe<Ye;++Pe)try{Tt[Pe]()}catch{}},0)}}function $e(Tt){Ne===0&&(Te=Tt,Ne=1,He())}function St(Tt){Ne===0&&(Te=Tt,Ne=2,He())}(function(){if(!At(K))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{K($e,St)}catch(Pe){St(Pe)}})()}return ie.resolve=function(K){return K instanceof ie?K:K&&At(K.then)?new ie(function(Ne,Te){try{K.then(Ne,Te)}catch(ht){Te(ht)}}):new ie(function(Ne){Ne(K)})},ie.reject=function(K){return new ie(function(Ne,Te){Te(K)})},ie.all=function(K){if(!(!K||!K.length))return new ie(function(Ne,Te){try{for(var ht=[],Ke=0,He=0;He<K.length;He++){var $e=K[He];$e&&At($e.then)?(Ke++,$e.then(gr(ht,He,function(){--Ke===0&&Ne(ht)}),Te)):ht[He]=$e}Ke===0&&setTimeout(function(){Ne(ht)},0)}catch(St){Te(St)}})},ie.race=function(K){return new ie(function(Ne,Te){if(!(!K||!K.length))try{for(var ht=function(He){var $e=K[He];$e&&At($e.then)?$e.then(Ne,Te):setTimeout(function(){Ne($e)},0)},Ke=0;Ke<K.length;Ke++)ht(Ke)}catch(He){Te(He)}})},ie}(),ue=6e5,_r=0,tr=[],zt=[],Ut=[];function or(){return new Date().getTime()}var rr=function(){function ie(K,Ne){var Te=0,ht=(K||"<unnamed>")+"."+_r;_r++,a(ie,this,function($e){var St=null,Tt=0;$e.scheduleEvent=function(Ye,ae,we){var Le=ht+"."+Tt;Tt++,ae&&(Le+="-("+ae+")");var he=Le+"{"+Te+"}";Te++;var ut={evt:null,tm:or(),id:he,isRunning:!1,isAborted:!1};return St?ut.evt=je(ut,St):ut.evt=Me(ut),St=ut,St.evt._schId=he,ut.evt;function qt(Se){for(var Z=or(),et=Z-ue,ze=Se.length,pe=0;pe<ze;){var vt=Se[pe];if(vt&&vt.tm<et){var Et=null;vt.abort?(Et="Aborting ["+vt.id+"] due to Excessive runtime ("+(Z-vt.tm)+" ms)",vt.abort(Et)):Et="Removing ["+vt.id+"] due to Excessive runtime ("+(Z-vt.tm)+" ms)",He(Et),Se.splice(pe,1),ze--}else pe++}}function Ze(Se,Z){var et=!1,ze=Pe(tr,Se);if(ze||(ze=Pe(Ut,Se),et=!0),ze){ze.to&&(clearTimeout(ze.to),ze.to=null);var pe=or()-ze.tm;Z?et?He("Timed out event ["+Se+"] finally complete -- "+pe+" ms"):Ke("Promise ["+Se+"] Complete -- "+pe+" ms"):(Ut.push(ze),He("Event ["+Se+"] Timed out and removed -- "+pe+" ms"))}else Ke("Failed to remove ["+Se+"] from running queue");St&&St.id===Se&&(St=null),qt(tr),qt(zt),qt(Ut)}function $t(Se,Z){return function(et){return Ze(Se,!0),Z&&Z(et),et}}function pr(Se,Z,et,ze){Z.then(function(pe){return pe instanceof dr?(Ke("Event ["+Se+"] returned a promise -- waiting"),pr(Se,pe,et,ze),pe):$t(Se,et)(pe)},$t(Se,ze))}function Er(Se,Z){var et=Se.id;return new dr(function(ze,pe){Ke("Event ["+et+"] Starting -- waited for "+(Se.wTm||"--")+" ms"),Se.isRunning=!0,Se.abort=function(Et){Se.abort=null,Se.isAborted=!0,Ze(et,!1),pe(new Error(Et))};var vt=Z(et);vt instanceof dr?(we&&(Se.to=setTimeout(function(){Ze(et,!1),pe(new Error("Timed out after ["+we+"] ms"))},we)),pr(et,vt,function(Et){Ke("Event ["+et+"] Resolving after "+(or()-Se.tm)+" ms"),ze(Et)},pe)):(Ke("Promise ["+et+"] Auto completed as the start action did not return a promise"),ze())})}function Me(Se){var Z=or();return Se.wTm=Z-Se.tm,Se.tm=Z,Se.isAborted?dr.reject(new Error("["+Le+"] was aborted")):(tr.push(Se),Er(Se,Ye))}function je(Se,Z){var et=new dr(function(ze,pe){var vt=or()-Z.tm,Et=Z.id;Ke("["+Le+"] is waiting for ["+Et+":"+vt+" ms] to complete before starting -- ["+zt.length+"] waiting and ["+tr.length+"] running"),Se.abort=function(Ot){Se.abort=null,Pe(zt,Le),Se.isAborted=!0,pe(new Error(Ot))},Z.evt.then(function(Ot){Pe(zt,Le),Me(Se).then(ze,pe)},function(Ot){Pe(zt,Le),Me(Se).then(ze,pe)})});return zt.push(Se),et}};function Pe(Ye,ae){for(var we=0;we<Ye.length;we++)if(Ye[we].id===ae)return Ye.splice(we,1)[0];return null}});function Ke($e){var St=t.getGlobal();St&&St.QUnit&&console&&console.log("ESPromiseScheduler["+ht+"] "+$e)}function He($e){Ne&&Ne.warnToConsole("ESPromiseScheduler["+ht+"] "+$e)}}return ie.incomplete=function(){return tr},ie.waitingToStart=function(){return zt},ie}(),yr=function(){function ie(K){var Ne=this,Te={},ht=[],Ke=[];K&&Ke.push(K);function He(Pe,Ye){var ae,we=Te[Pe];if(we&&(ae=we[Ye]),!ae&&ae!==null){if(t.isString(Pe)&&t.isString(Ye))if(Ke.length>0){for(var Le=0;Le<Ke.length;Le++)if(Ke[Le].handleField(Pe,Ye)){ae={canHandle:!0,fieldHandler:Ke[Le]};break}}else ht.length===0&&(ae={canHandle:!0});if(!ae&&ae!==null){ae=null;for(var Le=0;Le<ht.length;Le++)if(ht[Le].handleField(Pe,Ye)){ae={canHandle:!0,handler:ht[Le],fieldHandler:null};break}}we||(we=Te[Pe]={}),we[Ye]=ae}return ae}Ne.addSanitizer=function(Pe){Pe&&(ht.push(Pe),Te={})},Ne.addFieldSanitizer=function(Pe){Pe&&(Ke.push(Pe),Te={})},Ne.handleField=function(Pe,Ye){var ae=He(Pe,Ye);return ae?ae.canHandle:!1},Ne.value=function(Pe,Ye,ae,we){var Le=He(Pe,Ye);if(Le&&Le.canHandle){if(!Le||!Le.canHandle)return null;if(Le.handler)return Le.handler.value(Pe,Ye,ae,we);if(!t.isString(Ye)||t.isNullOrUndefined(ae)||ae==="")return null;var he=null,ut=rt(ae);if((ut&8192)===8192){var qt=ut&~8192;if(he=ae,!j(he.value)||qt!==1&&qt!==2&&qt!==3&&(qt&4096)!==4096)return null}else ut===1||ut===2||ut===3||(ut&4096)===4096?he=St(Pe,Ye,ae):ut===4&&(he=St(Pe,Ye,we?JSON.stringify(ae):ae));if(he)return $e(Le,Pe,Ye,ut,he,we)}return null},Ne.property=function(Pe,Ye,ae,we){var Le=He(Pe,Ye);if(!Le||!Le.canHandle||!t.isString(Ye)||t.isNullOrUndefined(ae)||!j(ae.value))return null;var he=rt(ae.value);return he===0?null:$e(Le,Pe,Ye,he,ae,we)};function $e(Pe,Ye,ae,we,Le,he){if(Pe.handler)return Pe.handler.property(Ye,ae,Le,he);if(!t.isNullOrUndefined(Le.kind)){if((we&4096)===4096||!Ue(Le.kind))return null;Le.value=Le.value.toString()}return Tt(Pe.fieldHandler,Ye,ae,we,Le)}function St(Pe,Ye,ae){return j(ae)?{value:ae}:null}function Tt(Pe,Ye,ae,we,Le){if(Le&&Pe){var he=Pe.getSanitizer(Ye,ae,we,Le.kind,Le.propertyType);if(he)if(we===4){var ut={},qt=Le.value;t.objForEachKey(qt,function($t,pr){var Er=Ye+"."+ae;if(j(pr)){var Me=St(Er,$t,pr);Me=Tt(Pe,Er,$t,rt(pr),Me),Me&&(ut[$t]=Me.value)}}),Le.value=ut}else{var Ze={path:Ye,name:ae,type:we,prop:Le,sanitizer:Ne};Le=he.call(Ne,Ze)}}return Le}}return ie.getFieldType=rt,ie}();e.BaseTelemetryPlugin=t.BaseTelemetryPlugin,e.DiagnosticLogger=t.DiagnosticLogger,e.EventHelper=t.EventHelper,e.EventsDiscardedReason=t.EventsDiscardedReason,e.InternalAppInsightsCore=t.AppInsightsCore,e.InternalBaseCore=t.BaseCore,e.LoggingSeverity=t.LoggingSeverity,e.MinChannelPriorty=t.MinChannelPriorty,e.NotificationManager=t.NotificationManager,e.PerfEvent=t.PerfEvent,e.PerfManager=t.PerfManager,e.ProcessTelemetryContext=t.ProcessTelemetryContext,e.Undefined=t.strUndefined,e._InternalLogMessage=t._InternalLogMessage,e._InternalMessageId=t._InternalMessageId,e.__getRegisteredEvents=t.__getRegisteredEvents,e._throwInternal=t._throwInternal,e.addEventHandler=t.addEventHandler,e.addEventListeners=t.addEventListeners,e.addPageHideEventListener=t.addPageHideEventListener,e.addPageShowEventListener=t.addPageShowEventListener,e.addPageUnloadEventListener=t.addPageUnloadEventListener,e.areCookiesSupported=t.areCookiesSupported,e.arrForEach=t.arrForEach,e.arrIndexOf=t.arrIndexOf,e.arrMap=t.arrMap,e.arrReduce=t.arrReduce,e.attachEvent=t.attachEvent,e.cookieAvailable=t.areCookiesSupported,e.createCookieMgr=t.createCookieMgr,e.createEnumStyle=t.createEnumStyle,e.createProcessTelemetryContext=t.createProcessTelemetryContext,e.createTraceParent=t.createTraceParent,e.createUniqueNamespace=t.createUniqueNamespace,e.createUnloadHandlerContainer=t.createUnloadHandlerContainer,e.dateNow=t.dateNow,e.detachEvent=t.detachEvent,e.disallowsSameSiteNone=t.uaDisallowsSameSiteNone,e.doPerf=t.doPerf,e.dumpObj=t.dumpObj,e.eventOff=t.eventOff,e.eventOn=t.eventOn,e.findW3cTraceParent=t.findW3cTraceParent,e.formatTraceParent=t.formatTraceParent,e.generateW3CId=t.generateW3CId,e.getConsole=t.getConsole,e.getCrypto=t.getCrypto,e.getDocument=t.getDocument,e.getExceptionName=t.getExceptionName,e.getGlobal=t.getGlobal,e.getGlobalInst=t.getGlobalInst,e.getHistory=t.getHistory,e.getIEVersion=t.getIEVersion,e.getISOString=t.toISOString,e.getJSON=t.getJSON,e.getLocation=t.getLocation,e.getMsCrypto=t.getMsCrypto,e.getNavigator=t.getNavigator,e.getPerformance=t.getPerformance,e.getSetValue=t.getSetValue,e.getWindow=t.getWindow,e.hasDocument=t.hasDocument,e.hasHistory=t.hasHistory,e.hasJSON=t.hasJSON,e.hasNavigator=t.hasNavigator,e.hasOwnProperty=t.hasOwnProperty,e.hasWindow=t.hasWindow,e.isArray=t.isArray,e.isBeaconsSupported=t.isBeaconsSupported,e.isBoolean=t.isBoolean,e.isDate=t.isDate,e.isError=t.isError,e.isFetchSupported=t.isFetchSupported,e.isFunction=t.isFunction,e.isIE=t.isIE,e.isNotTruthy=t.isNotTruthy,e.isNullOrUndefined=t.isNullOrUndefined,e.isNumber=t.isNumber,e.isObject=t.isObject,e.isReactNative=t.isReactNative,e.isSampledFlag=t.isSampledFlag,e.isString=t.isString,e.isTruthy=t.isTruthy,e.isTypeof=t.isTypeof,e.isUndefined=t.isUndefined,e.isValidSpanId=t.isValidSpanId,e.isValidTraceId=t.isValidTraceId,e.isValidTraceParent=t.isValidTraceParent,e.isXhrSupported=t.isXhrSupported,e.mergeEvtNamespace=t.mergeEvtNamespace,e.newGuid=t.newGuid,e.newId=t.newId,e.normalizeJsName=t.normalizeJsName,e.objCreate=t.objCreate,e.objDefineAccessors=t.objDefineAccessors,e.objForEachKey=t.objForEachKey,e.objFreeze=t.objFreeze,e.objKeys=t.objKeys,e.objSeal=t.objSeal,e.optimizeObject=t.optimizeObject,e.parseTraceParent=t.parseTraceParent,e.perfNow=t.perfNow,e.proxyAssign=t.proxyAssign,e.proxyFunctionAs=t.proxyFunctionAs,e.proxyFunctions=t.proxyFunctions,e.random32=t.random32,e.randomValue=t.randomValue,e.removeEventHandler=t.removeEventHandler,e.removeEventListeners=t.removeEventListeners,e.removePageHideEventListener=t.removePageHideEventListener,e.removePageShowEventListener=t.removePageShowEventListener,e.removePageUnloadEventListener=t.removePageUnloadEventListener,e.safeGetCookieMgr=t.safeGetCookieMgr,e.safeGetLogger=t.safeGetLogger,e.setEnableEnvMocks=t.setEnableEnvMocks,e.setValue=t.setValue,e.strContains=t.strContains,e.strEndsWith=t.strEndsWith,e.strFunction=t.strFunction,e.strObject=t.strObject,e.strPrototype=t.strPrototype,e.strStartsWith=t.strStartsWith,e.strTrim=t.strTrim,e.strUndefined=t.strUndefined,e.throwError=t.throwError,e.toISOString=t.toISOString,e.useXDomainRequest=t.useXDomainRequest,e.AppInsightsCore=xe,e.BaseCore=Qe,e.CoreUtils=ee,e.ESPromise=dr,e.ESPromiseScheduler=rr,e.EventLatency=n,e.EventPersistence=l,e.EventPropertyType=s,e.FullVersionString=m,e.TraceLevel=f,e.Utils=$,e.ValueKind=o,e.ValueSanitizer=yr,e.Version=v,e._ExtendedInternalMessageId=c,e.createGuid=oe,e.deleteCookie=ot,e.disableCookies=Re,e.extend=ge,e.getCommonSchemaMetaData=ye,e.getCookie=Dt,e.getCookieValue=at,e.getFieldValueType=rt,e.getTenantId=G,e.getTime=le,e.isArrayValid=se,e.isChromium=re,e.isDocumentObjectAvailable=A,e.isLatency=Y,e.isUint8ArrayAvailable=B,e.isValueAssigned=j,e.isValueKind=Ue,e.isWindowObjectAvailable=M,e.openXhr=ve,e.sanitizeProperty=ne,e.setCookie=st,e.setProcessTelemetryTimings=We,function(ie,K,Ne){var Te=Object.defineProperty;if(Te)try{return Te(ie,K,Ne)}catch{}return Ne&&typeof Ne.value!==void 0&&(ie[K]=Ne.value),ie}(e,"__esModule",{value:!0})})});var mc=Ht((zi,vc)=>{(function(e,r){typeof zi=="object"&&typeof vc!="undefined"?r(zi,ua(),fa(),da()):typeof define=="function"&&define.amd?define(["exports","@microsoft/applicationinsights-shims","@microsoft/dynamicproto-js","@microsoft/1ds-core-js"],r):(e=typeof globalThis!="undefined"?globalThis:e||self,r(e.oneDS=e.oneDS||{},e.applicationinsightsShims,e.dynamicProto,e._1dsCoreJs))})(zi,function(e,r,t,i){"use strict";function u(Me){return Me&&typeof Me=="object"&&"default"in Me?Me.default:Me}var a=u(t),o="REAL_TIME",n="NEAR_REAL_TIME",s="BEST_EFFORT",l="POST",f="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",c="drop",p="send",v="requeue",m="rspFail",g="oth",E="no-cache, no-store",T="application/x-json-stream",P="cache-control",O="content-type",A="kill-tokens",M="kill-duration",j="kill-duration-seconds",G="time-delta-millis",B="client-version",Y="client-id",ne="time-delta-to-apply-millis",ye="upload-time",Re="apikey",st="AuthMsaDeviceTicket",ot="AuthXToken",Dt="NoResponseBody",at="msfpc";function oe(Me){var je=(Me.ext||{}).intweb;return je&&i.isValueAssigned(je[at])?je[at]:null}function ge(Me){for(var je=null,Se=0;je===null&&Se<Me.length;Se++)je=oe(Me[Se]);return je}var le=function(){function Me(je,Se){var Z=Se?[].concat(Se):[],et=this,ze=ge(Z);et.iKey=function(){return je},et.Msfpc=function(){return ze||""},et.count=function(){return Z.length},et.events=function(){return Z},et.addEvent=function(pe){return pe?(Z.push(pe),ze||(ze=oe(pe)),!0):!1},et.split=function(pe,vt){var Et;if(pe<Z.length){var Ot=Z.length-pe;i.isNullOrUndefined(vt)||(Ot=vt<Ot?vt:Ot),Et=Z.splice(pe,Ot),ze=ge(Z)}return new Me(je,Et)}}return Me.create=function(je,Se){return new Me(je,Se)},Me}(),Ue=20,X=3984588,Ee=65e3,se=2e6,We=Math.min(se,Ee),rt="metadata",$="f",ee=/\./,re=function(){function Me(je,Se,Z,et){var ze="data",pe="baseData",vt="ext",Et=!!et,Ot=!0,Gt=Se,Wt={};a(Me,this,function(jt){jt.createPayload=function(ct,mt,d,_,S,C){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:ct,isTeardown:mt,isSync:d,isBeacon:_,sendType:C,sendReason:S}},jt.appendPayload=function(ct,mt,d){var _=ct&&mt&&!ct.overflow;return _&&i.doPerf(je,function(){return"Serializer:appendPayload"},function(){for(var S=mt.events(),C=ct.payloadBlob,R=ct.numEvents,k=!1,L=[],Q=[],te=ct.isBeacon,Fe=te?Ee:X,lt=te?We:se,qe=0,it=0;qe<S.length;){var dt=S[qe];if(dt){if(R>=d){ct.overflow=mt.split(qe);break}var bt=jt.getEventBlob(dt);if(bt&&bt.length<=lt){var Ft=bt.length,kr=C.length;if(kr+Ft>Fe){ct.overflow=mt.split(qe);break}C&&(C+=`
`),C+=bt,it++,it>Ue&&(C.substr(0,1),it=0),k=!0,R++}else bt?L.push(dt):Q.push(dt),S.splice(qe,1),qe--}qe++}if(L&&L.length>0&&ct.sizeExceed.push(le.create(mt.iKey(),L)),Q&&Q.length>0&&ct.failedEvts.push(le.create(mt.iKey(),Q)),k){ct.batches.push(mt),ct.payloadBlob=C,ct.numEvents=R;var cr=mt.iKey();i.arrIndexOf(ct.apiKeys,cr)===-1&&ct.apiKeys.push(cr)}},function(){return{payload:ct,theBatch:{iKey:mt.iKey(),evts:mt.events()},max:d}}),_},jt.getEventBlob=function(ct){try{return i.doPerf(je,function(){return"Serializer.getEventBlob"},function(){var mt={};mt.name=ct.name,mt.time=ct.time,mt.ver=ct.ver,mt.iKey="o:"+i.getTenantId(ct.iKey);var d={},_=ct[vt];_&&(mt[vt]=d,i.objForEachKey(_,function(R,k){var L=d[R]={};Ct(k,L,"ext."+R,!0,null,null,!0)}));var S=mt[ze]={};S.baseType=ct.baseType;var C=S[pe]={};return Ct(ct.baseData,C,pe,!1,[pe],function(R,k,L){ve(d,R,k,L)},Ot),Ct(ct.data,S,ze,!1,[],function(R,k,L){ve(d,R,k,L)},Ot),JSON.stringify(mt)},function(){return{item:ct}})}catch{return null}};function nt(ct,mt){var d=Wt[ct];return d===void 0&&(ct.length>=7&&(d=i.strStartsWith(ct,"ext.metadata")||i.strStartsWith(ct,"ext.web")),Wt[ct]=d),d}function Ct(ct,mt,d,_,S,C,R){i.objForEachKey(ct,function(k,L){var Q=null;if(L||i.isValueAssigned(L)){var te=d,Fe=k,lt=S,qe=mt;if(Et&&!_&&ee.test(k)){var it=k.split("."),dt=it.length;if(dt>1){lt&&(lt=lt.slice());for(var bt=0;bt<dt-1;bt++){var Ft=it[bt];qe=qe[Ft]=qe[Ft]||{},te+="."+Ft,lt&&lt.push(Ft)}Fe=it[dt-1]}}var kr=_&&nt(te);if(!kr&&Gt&&Gt.handleField(te,Fe)?Q=Gt.value(te,Fe,L,Z):Q=i.sanitizeProperty(Fe,L,Z),Q){var cr=Q.value;if(qe[Fe]=cr,C&&C(lt,Fe,Q),R&&typeof cr=="object"&&!i.isArray(cr)){var hr=lt;hr&&(hr=hr.slice(),hr.push(Fe)),Ct(L,cr,te+"."+Fe,_,hr,C,R)}}}})}})}return Me}();function ve(Me,je,Se,Z){if(Z&&Me){var et=i.getCommonSchemaMetaData(Z.value,Z.kind,Z.propertyType);if(et>-1){var ze=Me[rt];ze||(ze=Me[rt]={f:{}});var pe=ze[$];if(pe||(pe=ze[$]={}),je)for(var vt=0;vt<je.length;vt++){var Et=je[vt];pe[Et]||(pe[Et]={f:{}});var Ot=pe[Et][$];Ot||(Ot=pe[Et][$]={}),pe=Ot}pe=pe[Se]={},i.isArray(Z.value)?pe.a={t:et}:pe.t=et}}}var Ve=.8,Ae=1.2,xe=3e3,Qe=6e5;function At(Me){return!(Me>=300&&Me<500&&Me!=408&&Me!=429||Me==501||Me==505)}function gr(Me){var je=0,Se=xe*Ve,Z=xe*Ae,et=Math.floor(Math.random()*(Z-Se))+Se;return je=Math.pow(2,Me)*et,Math.min(je,Qe)}var dr=1e3,ue=function(){function Me(){var je={};function Se(Z){var et=[];return Z&&i.arrForEach(Z,function(ze){et.push(i.strTrim(ze))}),et}a(Me,this,function(Z){Z.setKillSwitchTenants=function(et,ze){if(et&&ze)try{var pe=Se(et.split(","));if(ze==="this-request-only")return pe;for(var vt=parseInt(ze,10)*dr,Et=0;Et<pe.length;++Et)je[pe[Et]]=i.dateNow()+vt}catch{return[]}return[]},Z.isTenantKilled=function(et){var ze=je,pe=i.strTrim(et);return ze[pe]!==void 0&&ze[pe]>i.dateNow()?!0:(delete ze[pe],!1)}})}return Me}(),_r=function(){function Me(){var je=!0,Se=!0,Z=!0,et="use-collector-delta",ze=!1;a(Me,this,function(pe){pe.allowRequestSending=function(){return je},pe.firstRequestSent=function(){Z&&(Z=!1,ze||(je=!1))},pe.shouldAddClockSkewHeaders=function(){return Se},pe.getClockSkewHeaderValue=function(){return et},pe.setClockSkew=function(vt){ze||(vt?(et=vt,Se=!0,ze=!0):Se=!1,je=!0)}})}return Me}(),tr,zt="sendAttempt",Ut="&"+Dt+"=true",or=(tr={},tr[1]=v,tr[100]=v,tr[200]="sent",tr[8004]=c,tr[8003]=c,tr),rr={},yr={};function ie(Me,je,Se){rr[Me]=je,Se!==!1&&(yr[je]=Me)}ie(st,st,!1),ie(B,B),ie(Y,"Client-Id"),ie(Re,Re),ie(ne,ne),ie(ye,ye),ie(ot,ot);function K(Me){try{return Me.responseText}catch{}return""}function Ne(Me,je){var Se=!1;if(Me&&je){var Z=i.objKeys(Me);if(Z&&Z.length>0)for(var et=je.toLowerCase(),ze=0;ze<Z.length;ze++){var pe=Z[ze];if(pe&&i.hasOwnProperty(je,pe)&&pe.toLowerCase()===et){Se=!0;break}}}return Se}function Te(Me,je,Se,Z){je&&Se&&Se.length>0&&(Z&&rr[je]?(Me.hdrs[rr[je]]=Se,Me.useHdrs=!0):Me.url+="&"+je+"="+Se)}var ht=function(){function Me(je,Se,Z,et,ze){this._responseHandlers=[];var pe="?cors=true&"+O.toLowerCase()+"="+T,vt=new ue,Et=!1,Ot=new _r,Gt=!1,Wt=0,jt,nt,Ct,ct=!0,mt=[],d={},_=[],S=null,C=!1,R,k=!1,L=!1,Q,te;a(Me,this,function(Fe){var lt=!0;Fe.initialize=function(H,me,_e,Oe,Xe){var It;Xe||(Xe={}),pe=H+pe,L=i.isUndefined(Xe.avoidOptions)?!0:!Xe.avoidOptions,Ct=me,R=me.getCookieMgr(),C=!Ct.config.disableEventTimings;var gt=!!Ct.config.enableCompoundKey;jt=_e;var Pt=Xe.valueSanitizer,wt=Xe.stringifyObjects;i.isUndefined(Xe.enableCompoundKey)||(gt=!!Xe.enableCompoundKey),Q=Xe.xhrTimeout,te=Xe.disableXhrSync,Gt=!i.isReactNative(),S=new re(Ct,Pt,wt,gt);var Je=Oe,q=Xe.alwaysUseXhrOverride?Oe:null,ce=Xe.alwaysUseXhrOverride?Oe:null;if(!Oe){ct=!1;var fe=i.getLocation();fe&&fe.protocol&&fe.protocol.toLowerCase()==="file:"&&(lt=!1);var Ce=[];i.isReactNative()?Ce=[2,1]:Ce=[1,2,3];var ft=Xe.transports;ft&&(i.isNumber(ft)?Ce=[ft].concat(Ce):i.isArray(ft)&&(Ce=ft.concat(Ce))),Oe=qe(Ce,!1),Je=qe(Ce,!0),Oe||jt.diagLog().warnToConsole("No available transport to send events")}nt=(It={},It[0]=Oe,It[1]=Je||qe([1,2,3],!0),It[2]=q||qe([3,2],!0)||Je||qe([1],!0),It[3]=ce||qe([2,3],!0)||Je||qe([1],!0),It)};function qe(H,me){for(var _e=0,Oe=null,Xe=0;Oe==null&&Xe<H.length;)_e=H[Xe],_e===1?i.useXDomainRequest()?Oe=it:i.isXhrSupported()&&(Oe=bt):_e===2&&i.isFetchSupported(me)?Oe=dt:Gt&&_e===3&&i.isBeaconsSupported()&&(Oe=kr),Xe++;return Oe?{_transport:_e,_isSync:me,sendPOST:Oe}:null}Fe._getDbgPlgTargets=function(){return[nt[0],vt,S,nt]};function it(H,me,_e){var Oe=new XDomainRequest;Oe.open(l,H.urlString),H.timeout&&(Oe.timeout=H.timeout),Oe.onload=function(){var Xe=K(Oe);Ft(me,200,{},Xe),Cr(Xe)},Oe.onerror=function(){Ft(me,400,{})},Oe.ontimeout=function(){Ft(me,500,{})},Oe.onprogress=function(){},_e?Oe.send(H.data):ze.set(function(){Oe.send(H.data)},0)}function dt(H,me,_e){var Oe,Xe=H.urlString,It=!1,gt=!1,Pt=(Oe={body:H.data,method:l},Oe[f]=!0,Oe);_e&&(Pt.keepalive=!0,H._sendReason===2&&(It=!0,Xe+=Ut)),lt&&(Pt.credentials="include"),H.headers&&i.objKeys(H.headers).length>0&&(Pt.headers=H.headers),fetch(Xe,Pt).then(function(wt){var Je={},q="";wt.headers&&wt.headers.forEach(function(ce,fe){Je[fe]=ce}),wt.body&&wt.text().then(function(ce){q=ce}),gt||(gt=!0,Ft(me,wt.status,Je,q),Cr(q))}).catch(function(wt){gt||(gt=!0,Ft(me,0,{}))}),It&&!gt&&(gt=!0,Ft(me,200,{})),!gt&&H.timeout>0&&ze.set(function(){gt||(gt=!0,Ft(me,500,{}))},H.timeout)}function bt(H,me,_e){var Oe=H.urlString;function Xe(wt,Je,q){if(!wt[q]&&Je&&Je.getResponseHeader){var ce=Je.getResponseHeader(q);ce&&(wt[q]=i.strTrim(ce))}return wt}function It(wt){var Je={};return wt.getAllResponseHeaders?Je=Xr(wt.getAllResponseHeaders()):(Je=Xe(Je,wt,G),Je=Xe(Je,wt,M),Je=Xe(Je,wt,j)),Je}function gt(wt,Je){Ft(me,wt.status,It(wt),Je)}_e&&H.disableXhrSync&&(_e=!1);var Pt=i.openXhr(l,Oe,lt,!0,_e,H.timeout);i.objForEachKey(H.headers,function(wt,Je){Pt.setRequestHeader(wt,Je)}),Pt.onload=function(){var wt=K(Pt);gt(Pt,wt),Cr(wt)},Pt.onerror=function(){gt(Pt)},Pt.ontimeout=function(){gt(Pt)},Pt.send(H.data)}function Ft(H,me,_e,Oe){try{H(me,_e,Oe)}catch(Xe){i._throwInternal(jt.diagLog(),2,518,i.dumpObj(Xe))}}function kr(H,me,_e){var Oe=H,Xe=200,It=Oe._thePayload,gt=H.urlString+Ut;try{var Pt=i.getNavigator();if(!Pt.sendBeacon(gt,H.data))if(It){var wt=[];i.arrForEach(It.batches,function(Je){if(wt&&Je&&Je.count()>0){for(var q=Je.events(),ce=0;ce<q.length;ce++)if(!Pt.sendBeacon(gt,S.getEventBlob(q[ce]))){wt.push(Je.split(ce));break}}else wt.push(Je.split(0))}),Tr(wt,8003,It.sendType,!0)}else Xe=0}catch(Je){jt.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+i.dumpObj(Je)),Xe=0}finally{Ft(me,Xe,{},"")}}function cr(H){return H===2||H===3}function hr(H){return k&&cr(H)&&(H=2),H}Fe.addQueryStringParameter=function(H,me){for(var _e=0;_e<mt.length;_e++)if(mt[_e].name===H){mt[_e].value=me;return}mt.push({name:H,value:me})},Fe.addHeader=function(H,me){d[H]=me},Fe.canSendRequest=function(){return Hr()&&Ot.allowRequestSending()},Fe.sendQueuedRequests=function(H,me){i.isUndefined(H)&&(H=0),k&&(H=hr(H),me=2),$r(_,H,0)&&wr(Lr(),0,!1,H,me||0)},Fe.isCompletelyIdle=function(){return!Et&&Wt===0&&_.length===0},Fe.setUnloading=function(H){k=H},Fe.addBatch=function(H){if(H&&H.count()>0){if(vt.isTenantKilled(H.iKey()))return!1;_.push(H)}return!0},Fe.teardown=function(){_.length>0&&wr(Lr(),0,!0,2,2)},Fe.pause=function(){Et=!0},Fe.resume=function(){Et=!1,Fe.sendQueuedRequests(0,4)},Fe.sendSynchronousBatch=function(H,me,_e){H&&H.count()>0&&(i.isNullOrUndefined(me)&&(me=1),k&&(me=hr(me),_e=2),wr([H],0,!1,me,_e||0))};function Hr(){return!Et&&Wt<Se}function Lr(){var H=_;return _=[],H}function $r(H,me,_e){var Oe=!1;return H&&H.length>0&&!Et&&nt[me]&&S&&(Oe=me!==0||Hr()&&(_e>0||Ot.allowRequestSending())),Oe}function nr(H){var me={};return H&&i.arrForEach(H,function(_e,Oe){me[Oe]={iKey:_e.iKey(),evts:_e.events()}}),me}function wr(H,me,_e,Oe,Xe){if(!(!H||H.length===0)){if(Et){Tr(H,1,Oe);return}Oe=hr(Oe);try{var It=H,gt=Oe!==0;i.doPerf(Ct,function(){return"HttpManager:_sendBatches"},function(Pt){Pt&&(H=H.slice(0));for(var wt=[],Je=null,q=i.getTime(),ce=nt[Oe]||(gt?nt[1]:nt[0]),fe=(k||cr(Oe)||ce&&ce._transport===3)&&Ar();$r(H,Oe,me);){var Ce=H.shift();Ce&&Ce.count()>0&&(vt.isTenantKilled(Ce.iKey())?wt.push(Ce):(Je=Je||S.createPayload(me,_e,gt,fe,Xe,Oe),S.appendPayload(Je,Ce,je)?Je.overflow!==null&&(H=[Je.overflow].concat(H),Je.overflow=null,Pr(Je,q,i.getTime(),Xe),q=i.getTime(),Je=null):(Pr(Je,q,i.getTime(),Xe),q=i.getTime(),H=[Ce].concat(H),Je=null)))}Je&&Pr(Je,q,i.getTime(),Xe),H.length>0&&(_=H.concat(_)),Tr(wt,8004,Oe)},function(){return{batches:nr(It),retryCount:me,isTeardown:_e,isSynchronous:gt,sendReason:Xe,useSendBeacon:cr(Oe),sendType:Oe}},!gt)}catch(Pt){i._throwInternal(jt.diagLog(),2,48,"Unexpected Exception sending batch: "+i.dumpObj(Pt))}}}function qr(H,me){var _e={url:pe,hdrs:{},useHdrs:!1};me?(_e.hdrs=i.extend(_e.hdrs,d),_e.useHdrs=i.objKeys(_e.hdrs).length>0):i.objForEachKey(d,function(Pt,wt){yr[Pt]?Te(_e,yr[Pt],wt,!1):(_e.hdrs[Pt]=wt,_e.useHdrs=!0)}),Te(_e,Y,"NO_AUTH",me),Te(_e,B,i.FullVersionString,me);var Oe="";i.arrForEach(H.apiKeys,function(Pt){Oe.length>0&&(Oe+=","),Oe+=Pt}),Te(_e,Re,Oe,me),Te(_e,ye,i.dateNow().toString(),me);var Xe=Gr(H);if(i.isValueAssigned(Xe)&&(_e.url+="&ext.intweb.msfpc="+Xe),Ot.shouldAddClockSkewHeaders()&&Te(_e,ne,Ot.getClockSkewHeaderValue(),me),Ct.getWParam){var It=Ct.getWParam();It>=0&&(_e.url+="&w="+It)}for(var gt=0;gt<mt.length;gt++)_e.url+="&"+mt[gt].name+"="+mt[gt].value;return _e}function Ar(){return!ct&&Gt&&i.isBeaconsSupported()}function br(H,me,_e){H[me]=H[me]||{},H[me][jt.identifier]=_e}function Pr(H,me,_e,Oe){if(H&&H.payloadBlob&&H.payloadBlob.length>0){var Xe=!!Fe.sendHook,It=nt[H.sendType];!cr(H.sendType)&&H.isBeacon&&H.sendReason===2&&(It=nt[2]||nt[3]||It);var gt=L;(H.isBeacon||It._transport===3)&&(gt=!1);var Pt=qr(H,gt);gt=gt||Pt.useHdrs;var wt=i.getTime();i.doPerf(Ct,function(){return"HttpManager:_doPayloadSend"},function(){for(var Je=0;Je<H.batches.length;Je++)for(var q=H.batches[Je],ce=q.events(),fe=0;fe<ce.length;fe++){var Ce=ce[fe];if(C){var ft=Ce.timings=Ce.timings||{};br(ft,"sendEventStart",wt),br(ft,"serializationStart",me),br(ft,"serializationCompleted",_e)}Ce[zt]>0?Ce[zt]++:Ce[zt]=1}Tr(H.batches,1e3+(Oe||0),H.sendType,!0);var pt={data:H.payloadBlob,urlString:Pt.url,headers:Pt.hdrs,_thePayload:H,_sendReason:Oe,timeout:Q};i.isUndefined(te)||(pt.disableXhrSync=!!te),gt&&(Ne(pt.headers,P)||(pt.headers[P]=E),Ne(pt.headers,O)||(pt.headers[O]=T));var Kt=null;It&&(Kt=function(Zt){Ot.firstRequestSent();var vr=function(nn,zn){Br(nn,zn,H,Oe)},Rr=H.isTeardown||H.isSync;try{It.sendPOST(Zt,vr,Rr),Fe.sendListener&&Fe.sendListener(pt,Zt,Rr,H.isBeacon)}catch(nn){jt.diagLog().warnToConsole("Unexpected exception sending payload. Ex:"+i.dumpObj(nn)),Ft(vr,0,{})}}),i.doPerf(Ct,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Kt)if(H.sendType===0&&Wt++,Xe&&!H.isBeacon&&It._transport!==3){var Zt={data:pt.data,urlString:pt.urlString,headers:i.extend({},pt.headers),timeout:pt.timeout,disableXhrSync:pt.disableXhrSync},vr=!1;i.doPerf(Ct,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Fe.sendHook(Zt,function(Rr){vr=!0,!ct&&!Rr._thePayload&&(Rr._thePayload=Rr._thePayload||pt._thePayload,Rr._sendReason=Rr._sendReason||pt._sendReason),Kt(Rr)},H.isSync||H.isTeardown)}catch{vr||Kt(pt)}})}else Kt(pt)})},function(){return{thePayload:H,serializationStart:me,serializationCompleted:_e,sendReason:Oe}},H.isSync)}H.sizeExceed&&H.sizeExceed.length>0&&Tr(H.sizeExceed,8003,H.sendType),H.failedEvts&&H.failedEvts.length>0&&Tr(H.failedEvts,8002,H.sendType)}function Sr(H,me){C&&i.arrForEach(H,function(_e){var Oe=_e.timings=_e.timings||{};br(Oe,"sendEventCompleted",me)})}function Br(H,me,_e,Oe){var Xe=9e3,It=null,gt=!1,Pt=!1;try{var wt=!0;if(typeof H!==i.strUndefined){if(me){Ot.setClockSkew(me[G]);var Je=me[M]||me["kill-duration-seconds"];i.arrForEach(vt.setKillSwitchTenants(me[A],Je),function(ce){i.arrForEach(_e.batches,function(fe){if(fe.iKey()===ce){It=It||[];var Ce=fe.split(0);_e.numEvents-=Ce.count(),It.push(Ce)}})})}if(H==200||H==204){Xe=200;return}(!At(H)||_e.numEvents<=0)&&(wt=!1),Xe=9e3+H%1e3}if(wt){Xe=100;var q=_e.retryCnt;_e.sendType===0&&(q<Z?(gt=!0,Or(function(){_e.sendType===0&&Wt--,wr(_e.batches,q+1,_e.isTeardown,k?2:_e.sendType,5)},k,gr(q))):(Pt=!0,k&&(Xe=8001)))}}finally{gt||(Ot.setClockSkew(),jr(_e,Xe,Oe,Pt)),Tr(It,8004,_e.sendType)}}function jr(H,me,_e,Oe){try{Oe&&jt._backOffTransmission(),me===200&&(!Oe&&!H.isSync&&jt._clearBackOff(),Kr(H.batches)),Tr(H.batches,me,H.sendType,!0)}finally{H.sendType===0&&(Wt--,_e!==5&&Fe.sendQueuedRequests(H.sendType,_e))}}function Kr(H){if(C){var me=i.getTime();i.arrForEach(H,function(_e){_e&&_e.count()>0&&Sr(_e.events(),me)})}}function Or(H,me,_e){me?H():ze.set(H,_e)}function Xr(H){var me={};if(i.isString(H)){var _e=i.strTrim(H).split(/[\r\n]+/);i.arrForEach(_e,function(Oe){if(Oe){var Xe=Oe.indexOf(": ");if(Xe!==-1){var It=i.strTrim(Oe.substring(0,Xe)).toLowerCase(),gt=i.strTrim(Oe.substring(Xe+1));me[It]=gt}else me[i.strTrim(Oe)]=1}})}return me}function Gr(H){for(var me=0;me<H.batches.length;me++){var _e=H.batches[me].Msfpc();if(_e)return encodeURIComponent(_e)}return""}function Cr(H){var me=Fe._responseHandlers;try{for(var _e=0;_e<me.length;_e++)try{me[_e](H)}catch(Xe){i._throwInternal(jt.diagLog(),1,519,"Response handler failed: "+Xe)}if(H){var Oe=JSON.parse(H);i.isValueAssigned(Oe.webResult)&&i.isValueAssigned(Oe.webResult[at])&&R.set("MSFPC",Oe.webResult[at],365*86400)}}catch{}}function Tr(H,me,_e,Oe){if(H&&H.length>0&&et){var Xe=et[Qr(me)];if(Xe){var It=_e!==0;i.doPerf(Ct,function(){return"HttpManager:_sendBatchesNotification"},function(){Or(function(){try{Xe.call(et,H,me,It,_e)}catch(gt){i._throwInternal(jt.diagLog(),1,74,"send request notification failed: "+gt)}},Oe||It,0)},function(){return{batches:nr(H),reason:me,isSync:It,sendSync:Oe,sendType:_e}},!It)}}}function Qr(H){var me=or[H];return i.isValueAssigned(me)||(me=g,H>=9e3&&H<=9999?me=m:H>=8e3&&H<=8999?me=c:H>=1e3&&H<=1999&&(me=p)),me}})}return Me}();function Ke(Me,je){for(var Se=[],Z=2;Z<arguments.length;Z++)Se[Z-2]=arguments[Z];return setTimeout(Me,je,Se)}function He(Me){clearTimeout(Me)}function $e(Me,je){return{set:Me||Ke,clear:je||He}}var St=.25,Tt=500,Pe=20,Ye=6,ae=2,we=4,Le=2,he=1,ut="eventsDiscarded",qt="overrideInstrumentationKey",Ze="maxEventRetryAttempts",$t="maxUnloadEventRetryAttempts",pr="addUnloadCb",Er=function(Me){r.__extendsFn(je,Me);function je(){var Se=Me.call(this)||this;Se.identifier="PostChannel",Se.priority=1011,Se.version="3.2.3";var Z,et=!1,ze=[],pe=null,vt=!1,Et=0,Ot=500,Gt=0,Wt=1e4,jt={},nt=o,Ct=null,ct=null,mt=0,d=0,_,S,C={},R,k,L=-1,Q,te=!0,Fe=!1,lt=Ye,qe=ae,it,dt;return a(je,Se,function(bt,Ft){wr(),bt._getDbgPlgTargets=function(){return[S]},bt.initialize=function(q,ce,fe){i.doPerf(ce,function(){return"PostChannel:initialize"},function(){var Ce=ce;Ft.initialize(q,ce,fe);try{var ft=!!ce[pr];it=i.mergeEvtNamespace(i.createUniqueNamespace(bt.identifier),ce.evtNamespace&&ce.evtNamespace());var pt=bt._getTelCtx();q.extensionConfig[bt.identifier]=q.extensionConfig[bt.identifier]||{},Z=pt.getExtCfg(bt.identifier),dt=$e(Z.setTimeoutOverride,Z.clearTimeoutOverride),te=!Z.disableOptimizeObj&&i.isChromium(),kr(Ce),Z.eventsLimitInMem>0&&(Wt=Z.eventsLimitInMem),Z.immediateEventLimit>0&&(Ot=Z.immediateEventLimit),Z.autoFlushEventsLimit>0&&(R=Z.autoFlushEventsLimit),i.isNumber(Z[Ze])&&(lt=Z[Ze]),i.isNumber(Z[$t])&&(qe=Z[$t]),Je(),Z.httpXHROverride&&Z.httpXHROverride.sendPOST&&(_=Z.httpXHROverride),i.isValueAssigned(q.anonCookieName)&&S.addQueryStringParameter("anoncknm",q.anonCookieName),S.sendHook=Z.payloadPreprocessor,S.sendListener=Z.payloadListener;var Kt=Z.overrideEndpointUrl?Z.overrideEndpointUrl:q.endpointUrl;bt._notificationManager=q.extensionConfig.NotificationManager,S.initialize(Kt,bt.core,bt,_,Z);var Zt=q.disablePageUnloadEvents||[];i.addPageUnloadEventListener(cr,Zt,it),i.addPageHideEventListener(cr,Zt,it),i.addPageShowEventListener(hr,q.disablePageShowEvents,it)}catch(vr){throw bt.setInitialized(!1),vr}},function(){return{coreConfig:q,core:ce,extensions:fe}})},bt.processTelemetry=function(q,ce){i.setProcessTelemetryTimings(q,bt.identifier),ce=bt._getTelCtx(ce);var fe=ce.getExtCfg(bt.identifier),Ce=!!Z.disableTelemetry;fe&&(Ce=Ce||!!fe.disableTelemetry);var ft=q;!Ce&&!et&&(Z[qt]&&(ft.iKey=Z[qt]),fe&&fe[qt]&&(ft.iKey=fe[qt]),Hr(ft,!0),Fe?br(2,2):nr()),bt.processNext(ft,ce)},bt._doTeardown=function(q,ce){br(2,2),et=!0,S.teardown(),i.removePageUnloadEventListener(null,it),i.removePageHideEventListener(null,it),i.removePageShowEventListener(null,it),wr()};function kr(q){var ce=q.getWParam;q.getWParam=function(){var fe=0;return Z.ignoreMc1Ms0CookieProcessing&&(fe=fe|2),fe|ce()}}function cr(q){var ce=q||i.getWindow().event;ce.type!=="beforeunload"&&(Fe=!0,S.setUnloading(Fe)),br(2,2)}function hr(q){Fe=!1,S.setUnloading(Fe)}function Hr(q,ce){if(q.sendAttempt||(q.sendAttempt=0),q.latency||(q.latency=1),q.ext&&q.ext.trace&&delete q.ext.trace,q.ext&&q.ext.user&&q.ext.user.id&&delete q.ext.user.id,te&&(q.ext=i.optimizeObject(q.ext),q.baseData&&(q.baseData=i.optimizeObject(q.baseData)),q.data&&(q.data=i.optimizeObject(q.data))),q.sync){if(mt||vt)q.latency=3,q.sync=!1;else if(S){te&&(q=i.optimizeObject(q)),S.sendSynchronousBatch(le.create(q.iKey,[q]),q.sync===!0?1:q.sync,3);return}}var fe=q.latency,Ce=Gt,ft=Wt;fe===4&&(Ce=Et,ft=Ot);var pt=!1;if(Ce<ft)pt=!jr(q,ce);else{var Kt=1,Zt=Pe;fe===4&&(Kt=4,Zt=1),pt=!0,Kr(q.iKey,q.latency,Kt,Zt)&&(pt=!jr(q,ce))}pt&&_e(ut,[q],i.EventsDiscardedReason.QueueFull)}bt.setEventQueueLimits=function(q,ce){Wt=q>0?q:1e4,R=ce>0?ce:0,Je();var fe=Gt>q;if(!fe&&k>0)for(var Ce=1;!fe&&Ce<=3;Ce++){var ft=C[Ce];ft&&ft.batches&&i.arrForEach(ft.batches,function(pt){pt&&pt.count()>=k&&(fe=!0)})}Br(!0,fe)},bt.pause=function(){Ar(),vt=!0,S.pause()},bt.resume=function(){vt=!1,S.resume(),nr()},bt.addResponseHandler=function(q){S._responseHandlers.push(q)},bt._loadTransmitProfiles=function(q){Tr(),i.objForEachKey(q,function(ce,fe){var Ce=fe.length;if(Ce>=2){var ft=Ce>2?fe[2]:0;if(fe.splice(0,Ce-2),fe[1]<0&&(fe[0]=-1),fe[1]>0&&fe[0]>0){var pt=fe[0]/fe[1];fe[0]=Math.ceil(pt)*fe[1]}ft>=0&&fe[1]>=0&&ft>fe[1]&&(ft=fe[1]),fe.push(ft),jt[ce]=fe}})},bt.flush=function(q,ce,fe){if(q===void 0&&(q=!0),!vt)if(fe=fe||1,q)pe==null?(Ar(),Xr(1,0,fe),pe=qr(function(){pe=null,Gr(ce,fe)},0)):ze.push(ce);else{var Ce=Ar();Lr(1,1,fe),ce!=null&&ce(),Ce&&nr()}},bt.setMsaAuthTicket=function(q){S.addHeader(st,q)},bt.hasEvents=$r,bt._setTransmitProfile=function(q){nt!==q&&jt[q]!==void 0&&(Ar(),nt=q,nr())};function Lr(q,ce,fe){var Ce=Xr(q,ce,fe);return S.sendQueuedRequests(ce,fe),Ce}function $r(){return Gt>0}function nr(){if(L>=0&&Xr(L,0,Q)&&S.sendQueuedRequests(0,Q),Et>0&&!ct&&!vt){var q=jt[nt][2];q>=0&&(ct=qr(function(){ct=null,Lr(4,0,1),nr()},q))}var ce=jt[nt][1];!Ct&&!pe&&ce>=0&&!vt&&($r()?Ct=qr(function(){Ct=null,Lr(d===0?3:1,0,1),d++,d%=2,nr()},ce):d=0)}bt._backOffTransmission=function(){mt<we&&(mt++,Ar(),nr())},bt._clearBackOff=function(){mt&&(mt=0,Ar(),nr())};function wr(){Z=null,et=!1,ze=[],pe=null,vt=!1,Et=0,Ot=500,Gt=0,Wt=1e4,jt={},nt=o,Ct=null,ct=null,mt=0,d=0,_=null,C={},R=void 0,k=0,L=-1,Q=null,te=!0,Fe=!1,lt=Ye,qe=ae,it=null,dt=$e(),S=new ht(Tt,Le,he,{requeue:H,send:Xe,sent:It,drop:gt,rspFail:Pt,oth:wt},dt),Qr(),Pr(),Je()}function qr(q,ce){ce===0&&mt&&(ce=1);var fe=1e3;return mt&&(fe=gr(mt-1)),dt.set(q,ce*fe)}function Ar(){return Ct!==null?(dt.clear(Ct),Ct=null,d=0,!0):!1}function br(q,ce){Ar(),pe&&(dt.clear(pe),pe=null),vt||Lr(1,q,ce)}function Pr(){C[4]={batches:[],iKeyMap:{}},C[3]={batches:[],iKeyMap:{}},C[2]={batches:[],iKeyMap:{}},C[1]={batches:[],iKeyMap:{}}}function Sr(q,ce,fe){var Ce=C[ce];Ce||(ce=1,Ce=C[ce]);var ft=Ce.iKeyMap[q];return!ft&&fe&&(ft=le.create(q),Ce.batches.push(ft),Ce.iKeyMap[q]=ft),ft}function Br(q,ce){S.canSendRequest()&&!mt&&(R>0&&Gt>R&&(ce=!0),ce&&pe==null&&bt.flush(q,null,20))}function jr(q,ce){te&&(q=i.optimizeObject(q));var fe=q.latency,Ce=Sr(q.iKey,fe,!0);return Ce.addEvent(q)?(fe!==4?(Gt++,ce&&q.sendAttempt===0&&Br(!q.sync,k>0&&Ce.count()>=k)):Et++,!0):!1}function Kr(q,ce,fe,Ce){for(;fe<=ce;){var ft=Sr(q,ce,!0);if(ft&&ft.count()>0){var pt=ft.split(0,Ce),Kt=pt.count();if(Kt>0)return fe===4?Et-=Kt:Gt-=Kt,Oe(ut,[pt],i.EventsDiscardedReason.QueueFull),!0}fe++}return Or(),!1}function Or(){for(var q=0,ce=0,fe=function(ft){var pt=C[ft];pt&&pt.batches&&i.arrForEach(pt.batches,function(Kt){ft===4?q+=Kt.count():ce+=Kt.count()})},Ce=1;Ce<=4;Ce++)fe(Ce);Gt=ce,Et=q}function Xr(q,ce,fe){var Ce=!1,ft=ce===0;return!ft||S.canSendRequest()?i.doPerf(bt.core,function(){return"PostChannel._queueBatches"},function(){for(var pt=[],Kt=4;Kt>=q;){var Zt=C[Kt];Zt&&Zt.batches&&Zt.batches.length>0&&(i.arrForEach(Zt.batches,function(vr){S.addBatch(vr)?Ce=Ce||vr&&vr.count()>0:pt=pt.concat(vr.events()),Kt===4?Et-=vr.count():Gt-=vr.count()}),Zt.batches=[],Zt.iKeyMap={}),Kt--}pt.length>0&&_e(ut,pt,i.EventsDiscardedReason.KillSwitch),Ce&&L>=q&&(L=-1,Q=0)},function(){return{latency:q,sendType:ce,sendReason:fe}},!ft):(L=L>=0?Math.min(L,q):q,Q=Math.max(Q,fe)),Ce}function Gr(q,ce){Lr(1,0,ce),Or(),Cr(function(){q&&q(),ze.length>0?pe=qr(function(){pe=null,Gr(ze.shift(),ce)},0):(pe=null,nr())})}function Cr(q){S.isCompletelyIdle()?q():pe=qr(function(){pe=null,Cr(q)},St)}function Tr(){Ar(),Qr(),nt=o,nr()}function Qr(){jt={},jt[o]=[2,1,0],jt[n]=[6,3,0],jt[s]=[18,9,0]}function H(q,ce){var fe=[],Ce=lt;Fe&&(Ce=qe),i.arrForEach(q,function(ft){ft&&ft.count()>0&&i.arrForEach(ft.events(),function(pt){pt&&(pt.sync&&(pt.latency=4,pt.sync=!1),pt.sendAttempt<Ce?(i.setProcessTelemetryTimings(pt,bt.identifier),Hr(pt,!1)):fe.push(pt))})}),fe.length>0&&_e(ut,fe,i.EventsDiscardedReason.NonRetryableStatus),Fe&&br(2,2)}function me(q,ce){var fe=bt._notificationManager||{},Ce=fe[q];if(Ce)try{Ce.apply(fe,ce)}catch(ft){i._throwInternal(bt.diagLog(),1,74,q+" notification failed: "+ft)}}function _e(q,ce){for(var fe=[],Ce=2;Ce<arguments.length;Ce++)fe[Ce-2]=arguments[Ce];ce&&ce.length>0&&me(q,[ce].concat(fe))}function Oe(q,ce){for(var fe=[],Ce=2;Ce<arguments.length;Ce++)fe[Ce-2]=arguments[Ce];ce&&ce.length>0&&i.arrForEach(ce,function(ft){ft&&ft.count()>0&&me(q,[ft.events()].concat(fe))})}function Xe(q,ce,fe){q&&q.length>0&&me("eventsSendRequest",[ce>=1e3&&ce<=1999?ce-1e3:0,fe!==!0])}function It(q,ce){Oe("eventsSent",q,ce),nr()}function gt(q,ce){Oe(ut,q,ce>=8e3&&ce<=8999?ce-8e3:i.EventsDiscardedReason.Unknown)}function Pt(q){Oe(ut,q,i.EventsDiscardedReason.NonRetryableStatus),nr()}function wt(q,ce){Oe(ut,q,i.EventsDiscardedReason.Unknown),nr()}function Je(){!Z||!Z.disableAutoBatchFlushLimit?k=Math.max(Tt*(Le+1),Wt/6):k=0}i.objDefineAccessors(bt,"_setTimeoutOverride",function(){return dt.set},function(q){dt=$e(q,dt.clear)}),i.objDefineAccessors(bt,"_clearTimeoutOverride",function(){return dt.clear},function(q){dt=$e(dt.set,q)})}),Se}return je}(i.BaseTelemetryPlugin);e.BE_PROFILE=s,e.NRT_PROFILE=n,e.PostChannel=Er,e.RT_PROFILE=o,function(Me,je,Se){var Z=Object.defineProperty;if(Z)try{return Z(Me,je,Se)}catch{}return Se&&typeof Se.value!==void 0&&(Me[je]=Se.value),Me}(e,"__esModule",{value:!0})})});var ll=Ht((Gg,cl)=>{var Qd=Object.create,si=Object.defineProperty,Yd=Object.defineProperties,Zd=Object.getOwnPropertyDescriptor,Jd=Object.getOwnPropertyDescriptors,ep=Object.getOwnPropertyNames,gc=Object.getOwnPropertySymbols,tp=Object.getPrototypeOf,_c=Object.prototype.hasOwnProperty,rp=Object.prototype.propertyIsEnumerable,yc=(e,r,t)=>r in e?si(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,wn=(e,r)=>{for(var t in r||(r={}))_c.call(r,t)&&yc(e,t,r[t]);if(gc)for(var t of gc(r))rp.call(r,t)&&yc(e,t,r[t]);return e},np=(e,r)=>Yd(e,Jd(r)),N=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),ip=(e,r)=>{for(var t in r)si(e,t,{get:r[t],enumerable:!0})},Ec=(e,r,t,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let u of ep(r))!_c.call(e,u)&&u!==t&&si(e,u,{get:()=>r[u],enumerable:!(i=Zd(r,u))||i.enumerable});return e},Wi=(e,r,t)=>(t=e!=null?Qd(tp(e)):{},Ec(r||!e||!e.__esModule?si(t,"default",{value:e,enumerable:!0}):t,e)),op=e=>Ec(si({},"__esModule",{value:!0}),e),mr=N((e,r)=>{"use strict";var t=function(){function i(){}return i.info=function(u){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];i.enableDebug&&console.info(i.TAG+u,a)},i.warn=function(u){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];i.disableWarnings||console.warn(i.TAG+u,a)},i.enableDebug=!1,i.disableWarnings=!1,i.disableErrors=!1,i.TAG="ApplicationInsights:",i}();r.exports=t}),bc=N(e=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(a){for(var o,n=1,s=arguments.length;n<s;n++){o=arguments[n];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var t=Hn(),i=require("events"),u=function(){function a(){}return a.prototype.active=function(){var o=this,n=t.CorrelationContextManager.getCurrentContext();return r(r({},n),{getValue:function(s){return o._activeSymbol?s===o._activeSymbol?n:!1:(o._activeSymbol=s,n)},setValue:function(){}})},a.prototype.with=function(o,n){var s=o.parentSpanId,l=o.name,f=a._spanToContext(o,s,l);return t.CorrelationContextManager.runWithContext(f,n)()},a.prototype.bind=function(o){return typeof o=="function"?t.CorrelationContextManager.wrapCallback(o):(o instanceof i.EventEmitter&&t.CorrelationContextManager.wrapEmitter(o),o)},a.prototype.enable=function(){return t.CorrelationContextManager.enable(),this},a.prototype.disable=function(){return t.CorrelationContextManager.disable(),this},a._spanToContext=function(o,n,s){var l=n?"|"+o.spanContext().traceId+"."+n+".":o.spanContext().traceId,f=r(r({},o.spanContext()),{traceFlags:o.spanContext().traceFlags}),c=t.CorrelationContextManager.spanToContextObject(f,l,s);return c},a}();e.OpenTelemetryScopeManagerWrapper=u,e.AsyncScopeManager=new u}),ap=N((e,r)=>{e=r.exports=ue;var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var d=Array.prototype.slice.call(arguments,0);d.unshift("SEMVER"),console.log.apply(console,d)}:t=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var i=256,u=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,o=e.re=[],n=e.src=[],s=0,l=s++;n[l]="0|[1-9]\\d*";var f=s++;n[f]="[0-9]+";var c=s++;n[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=s++;n[p]="("+n[l]+")\\.("+n[l]+")\\.("+n[l]+")";var v=s++;n[v]="("+n[f]+")\\.("+n[f]+")\\.("+n[f]+")";var m=s++;n[m]="(?:"+n[l]+"|"+n[c]+")";var g=s++;n[g]="(?:"+n[f]+"|"+n[c]+")";var E=s++;n[E]="(?:-("+n[m]+"(?:\\."+n[m]+")*))";var T=s++;n[T]="(?:-?("+n[g]+"(?:\\."+n[g]+")*))";var P=s++;n[P]="[0-9A-Za-z-]+";var O=s++;n[O]="(?:\\+("+n[P]+"(?:\\."+n[P]+")*))";var A=s++,M="v?"+n[p]+n[E]+"?"+n[O]+"?";n[A]="^"+M+"$";var j="[v=\\s]*"+n[v]+n[T]+"?"+n[O]+"?",G=s++;n[G]="^"+j+"$";var B=s++;n[B]="((?:<|>)?=?)";var Y=s++;n[Y]=n[f]+"|x|X|\\*";var ne=s++;n[ne]=n[l]+"|x|X|\\*";var ye=s++;n[ye]="[v=\\s]*("+n[ne]+")(?:\\.("+n[ne]+")(?:\\.("+n[ne]+")(?:"+n[E]+")?"+n[O]+"?)?)?";var Re=s++;n[Re]="[v=\\s]*("+n[Y]+")(?:\\.("+n[Y]+")(?:\\.("+n[Y]+")(?:"+n[T]+")?"+n[O]+"?)?)?";var st=s++;n[st]="^"+n[B]+"\\s*"+n[ye]+"$";var ot=s++;n[ot]="^"+n[B]+"\\s*"+n[Re]+"$";var Dt=s++;n[Dt]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var at=s++;n[at]="(?:~>?)";var oe=s++;n[oe]="(\\s*)"+n[at]+"\\s+",o[oe]=new RegExp(n[oe],"g");var ge="$1~",le=s++;n[le]="^"+n[at]+n[ye]+"$";var Ue=s++;n[Ue]="^"+n[at]+n[Re]+"$";var X=s++;n[X]="(?:\\^)";var Ee=s++;n[Ee]="(\\s*)"+n[X]+"\\s+",o[Ee]=new RegExp(n[Ee],"g");var se="$1^",We=s++;n[We]="^"+n[X]+n[ye]+"$";var rt=s++;n[rt]="^"+n[X]+n[Re]+"$";var $=s++;n[$]="^"+n[B]+"\\s*("+j+")$|^$";var ee=s++;n[ee]="^"+n[B]+"\\s*("+M+")$|^$";var re=s++;n[re]="(\\s*)"+n[B]+"\\s*("+j+"|"+n[ye]+")",o[re]=new RegExp(n[re],"g");var ve="$1$2$3",Ve=s++;n[Ve]="^\\s*("+n[ye]+")\\s+-\\s+("+n[ye]+")\\s*$";var Ae=s++;n[Ae]="^\\s*("+n[Re]+")\\s+-\\s+("+n[Re]+")\\s*$";var xe=s++;for(n[xe]="(<|>)?=?\\s*\\*",Qe=0;Qe<s;Qe++)t(Qe,n[Qe]),o[Qe]||(o[Qe]=new RegExp(n[Qe]));var Qe;e.parse=At;function At(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof ue)return d;if(typeof d!="string"||d.length>i)return null;var S=_.loose?o[G]:o[A];if(!S.test(d))return null;try{return new ue(d,_)}catch{return null}}e.valid=gr;function gr(d,_){var S=At(d,_);return S?S.version:null}e.clean=dr;function dr(d,_){var S=At(d.trim().replace(/^[=v]+/,""),_);return S?S.version:null}e.SemVer=ue;function ue(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof ue){if(d.loose===_.loose)return d;d=d.version}else if(typeof d!="string")throw new TypeError("Invalid Version: "+d);if(d.length>i)throw new TypeError("version is longer than "+i+" characters");if(!(this instanceof ue))return new ue(d,_);t("SemVer",d,_),this.options=_,this.loose=!!_.loose;var S=d.trim().match(_.loose?o[G]:o[A]);if(!S)throw new TypeError("Invalid Version: "+d);if(this.raw=d,this.major=+S[1],this.minor=+S[2],this.patch=+S[3],this.major>u||this.major<0)throw new TypeError("Invalid major version");if(this.minor>u||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>u||this.patch<0)throw new TypeError("Invalid patch version");S[4]?this.prerelease=S[4].split(".").map(function(C){if(/^[0-9]+$/.test(C)){var R=+C;if(R>=0&&R<u)return R}return C}):this.prerelease=[],this.build=S[5]?S[5].split("."):[],this.format()}ue.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ue.prototype.toString=function(){return this.version},ue.prototype.compare=function(d){return t("SemVer.compare",this.version,this.options,d),d instanceof ue||(d=new ue(d,this.options)),this.compareMain(d)||this.comparePre(d)},ue.prototype.compareMain=function(d){return d instanceof ue||(d=new ue(d,this.options)),Ut(this.major,d.major)||Ut(this.minor,d.minor)||Ut(this.patch,d.patch)},ue.prototype.comparePre=function(d){if(d instanceof ue||(d=new ue(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;var _=0;do{var S=this.prerelease[_],C=d.prerelease[_];if(t("prerelease compare",_,S,C),S===void 0&&C===void 0)return 0;if(C===void 0)return 1;if(S===void 0)return-1;if(S!==C)return Ut(S,C)}while(++_)},ue.prototype.inc=function(d,_){switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var S=this.prerelease.length;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);S===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+d)}return this.format(),this.raw=this.version,this},e.inc=_r;function _r(d,_,S,C){typeof S=="string"&&(C=S,S=void 0);try{return new ue(d,S).inc(_,C).version}catch{return null}}e.diff=tr;function tr(d,_){if(St(d,_))return null;var S=At(d),C=At(_),R="";if(S.prerelease.length||C.prerelease.length){R="pre";var k="prerelease"}for(var L in S)if((L==="major"||L==="minor"||L==="patch")&&S[L]!==C[L])return R+L;return k}e.compareIdentifiers=Ut;var zt=/^[0-9]+$/;function Ut(d,_){var S=zt.test(d),C=zt.test(_);return S&&C&&(d=+d,_=+_),d===_?0:S&&!C?-1:C&&!S?1:d<_?-1:1}e.rcompareIdentifiers=or;function or(d,_){return Ut(_,d)}e.major=rr;function rr(d,_){return new ue(d,_).major}e.minor=yr;function yr(d,_){return new ue(d,_).minor}e.patch=ie;function ie(d,_){return new ue(d,_).patch}e.compare=K;function K(d,_,S){return new ue(d,S).compare(new ue(_,S))}e.compareLoose=Ne;function Ne(d,_){return K(d,_,!0)}e.rcompare=Te;function Te(d,_,S){return K(_,d,S)}e.sort=ht;function ht(d,_){return d.sort(function(S,C){return e.compare(S,C,_)})}e.rsort=Ke;function Ke(d,_){return d.sort(function(S,C){return e.rcompare(S,C,_)})}e.gt=He;function He(d,_,S){return K(d,_,S)>0}e.lt=$e;function $e(d,_,S){return K(d,_,S)<0}e.eq=St;function St(d,_,S){return K(d,_,S)===0}e.neq=Tt;function Tt(d,_,S){return K(d,_,S)!==0}e.gte=Pe;function Pe(d,_,S){return K(d,_,S)>=0}e.lte=Ye;function Ye(d,_,S){return K(d,_,S)<=0}e.cmp=ae;function ae(d,_,S,C){switch(_){case"===":return typeof d=="object"&&(d=d.version),typeof S=="object"&&(S=S.version),d===S;case"!==":return typeof d=="object"&&(d=d.version),typeof S=="object"&&(S=S.version),d!==S;case"":case"=":case"==":return St(d,S,C);case"!=":return Tt(d,S,C);case">":return He(d,S,C);case">=":return Pe(d,S,C);case"<":return $e(d,S,C);case"<=":return Ye(d,S,C);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=we;function we(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof we){if(d.loose===!!_.loose)return d;d=d.value}if(!(this instanceof we))return new we(d,_);t("comparator",d,_),this.options=_,this.loose=!!_.loose,this.parse(d),this.semver===Le?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var Le={};we.prototype.parse=function(d){var _=this.options.loose?o[$]:o[ee],S=d.match(_);if(!S)throw new TypeError("Invalid comparator: "+d);this.operator=S[1],this.operator==="="&&(this.operator=""),S[2]?this.semver=new ue(S[2],this.options.loose):this.semver=Le},we.prototype.toString=function(){return this.value},we.prototype.test=function(d){return t("Comparator.test",d,this.options.loose),this.semver===Le?!0:(typeof d=="string"&&(d=new ue(d,this.options)),ae(d,this.operator,this.semver,this.options))},we.prototype.intersects=function(d,_){if(!(d instanceof we))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var S;if(this.operator==="")return S=new he(d.value,_),pe(this.value,S,_);if(d.operator==="")return S=new he(this.value,_),pe(d.semver,S,_);var C=(this.operator===">="||this.operator===">")&&(d.operator===">="||d.operator===">"),R=(this.operator==="<="||this.operator==="<")&&(d.operator==="<="||d.operator==="<"),k=this.semver.version===d.semver.version,L=(this.operator===">="||this.operator==="<=")&&(d.operator===">="||d.operator==="<="),Q=ae(this.semver,"<",d.semver,_)&&(this.operator===">="||this.operator===">")&&(d.operator==="<="||d.operator==="<"),te=ae(this.semver,">",d.semver,_)&&(this.operator==="<="||this.operator==="<")&&(d.operator===">="||d.operator===">");return C||R||k&&L||Q||te},e.Range=he;function he(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof he)return d.loose===!!_.loose&&d.includePrerelease===!!_.includePrerelease?d:new he(d.raw,_);if(d instanceof we)return new he(d.value,_);if(!(this instanceof he))return new he(d,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=d,this.set=d.split(/\s*\|\|\s*/).map(function(S){return this.parseRange(S.trim())},this).filter(function(S){return S.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+d);this.format()}he.prototype.format=function(){return this.range=this.set.map(function(d){return d.join(" ").trim()}).join("||").trim(),this.range},he.prototype.toString=function(){return this.range},he.prototype.parseRange=function(d){var _=this.options.loose;d=d.trim();var S=_?o[Ae]:o[Ve];d=d.replace(S,et),t("hyphen replace",d),d=d.replace(o[re],ve),t("comparator trim",d,o[re]),d=d.replace(o[oe],ge),d=d.replace(o[Ee],se),d=d.split(/\s+/).join(" ");var C=_?o[$]:o[ee],R=d.split(" ").map(function(k){return qt(k,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(R=R.filter(function(k){return!!k.match(C)})),R=R.map(function(k){return new we(k,this.options)},this),R},he.prototype.intersects=function(d,_){if(!(d instanceof he))throw new TypeError("a Range is required");return this.set.some(function(S){return S.every(function(C){return d.set.some(function(R){return R.every(function(k){return C.intersects(k,_)})})})})},e.toComparators=ut;function ut(d,_){return new he(d,_).set.map(function(S){return S.map(function(C){return C.value}).join(" ").trim().split(" ")})}function qt(d,_){return t("comp",d,_),d=Er(d,_),t("caret",d),d=$t(d,_),t("tildes",d),d=je(d,_),t("xrange",d),d=Z(d,_),t("stars",d),d}function Ze(d){return!d||d.toLowerCase()==="x"||d==="*"}function $t(d,_){return d.trim().split(/\s+/).map(function(S){return pr(S,_)}).join(" ")}function pr(d,_){var S=_.loose?o[Ue]:o[le];return d.replace(S,function(C,R,k,L,Q){t("tilde",d,C,R,k,L,Q);var te;return Ze(R)?te="":Ze(k)?te=">="+R+".0.0 <"+(+R+1)+".0.0":Ze(L)?te=">="+R+"."+k+".0 <"+R+"."+(+k+1)+".0":Q?(t("replaceTilde pr",Q),te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+(+k+1)+".0"):te=">="+R+"."+k+"."+L+" <"+R+"."+(+k+1)+".0",t("tilde return",te),te})}function Er(d,_){return d.trim().split(/\s+/).map(function(S){return Me(S,_)}).join(" ")}function Me(d,_){t("caret",d,_);var S=_.loose?o[rt]:o[We];return d.replace(S,function(C,R,k,L,Q){t("caret",d,C,R,k,L,Q);var te;return Ze(R)?te="":Ze(k)?te=">="+R+".0.0 <"+(+R+1)+".0.0":Ze(L)?R==="0"?te=">="+R+"."+k+".0 <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+".0 <"+(+R+1)+".0.0":Q?(t("replaceCaret pr",Q),R==="0"?k==="0"?te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+k+"."+(+L+1):te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+"."+L+"-"+Q+" <"+(+R+1)+".0.0"):(t("no pr"),R==="0"?k==="0"?te=">="+R+"."+k+"."+L+" <"+R+"."+k+"."+(+L+1):te=">="+R+"."+k+"."+L+" <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+"."+L+" <"+(+R+1)+".0.0"),t("caret return",te),te})}function je(d,_){return t("replaceXRanges",d,_),d.split(/\s+/).map(function(S){return Se(S,_)}).join(" ")}function Se(d,_){d=d.trim();var S=_.loose?o[ot]:o[st];return d.replace(S,function(C,R,k,L,Q,te){t("xRange",d,C,R,k,L,Q,te);var Fe=Ze(k),lt=Fe||Ze(L),qe=lt||Ze(Q),it=qe;return R==="="&&it&&(R=""),Fe?R===">"||R==="<"?C="<0.0.0":C="*":R&&it?(lt&&(L=0),Q=0,R===">"?(R=">=",lt?(k=+k+1,L=0,Q=0):(L=+L+1,Q=0)):R==="<="&&(R="<",lt?k=+k+1:L=+L+1),C=R+k+"."+L+"."+Q):lt?C=">="+k+".0.0 <"+(+k+1)+".0.0":qe&&(C=">="+k+"."+L+".0 <"+k+"."+(+L+1)+".0"),t("xRange return",C),C})}function Z(d,_){return t("replaceStars",d,_),d.trim().replace(o[xe],"")}function et(d,_,S,C,R,k,L,Q,te,Fe,lt,qe,it){return Ze(S)?_="":Ze(C)?_=">="+S+".0.0":Ze(R)?_=">="+S+"."+C+".0":_=">="+_,Ze(te)?Q="":Ze(Fe)?Q="<"+(+te+1)+".0.0":Ze(lt)?Q="<"+te+"."+(+Fe+1)+".0":qe?Q="<="+te+"."+Fe+"."+lt+"-"+qe:Q="<="+Q,(_+" "+Q).trim()}he.prototype.test=function(d){if(!d)return!1;typeof d=="string"&&(d=new ue(d,this.options));for(var _=0;_<this.set.length;_++)if(ze(this.set[_],d,this.options))return!0;return!1};function ze(d,_,S){for(var C=0;C<d.length;C++)if(!d[C].test(_))return!1;if(_.prerelease.length&&!S.includePrerelease){for(C=0;C<d.length;C++)if(t(d[C].semver),d[C].semver!==Le&&d[C].semver.prerelease.length>0){var R=d[C].semver;if(R.major===_.major&&R.minor===_.minor&&R.patch===_.patch)return!0}return!1}return!0}e.satisfies=pe;function pe(d,_,S){try{_=new he(_,S)}catch{return!1}return _.test(d)}e.maxSatisfying=vt;function vt(d,_,S){var C=null,R=null;try{var k=new he(_,S)}catch{return null}return d.forEach(function(L){k.test(L)&&(!C||R.compare(L)===-1)&&(C=L,R=new ue(C,S))}),C}e.minSatisfying=Et;function Et(d,_,S){var C=null,R=null;try{var k=new he(_,S)}catch{return null}return d.forEach(function(L){k.test(L)&&(!C||R.compare(L)===1)&&(C=L,R=new ue(C,S))}),C}e.minVersion=Ot;function Ot(d,_){d=new he(d,_);var S=new ue("0.0.0");if(d.test(S)||(S=new ue("0.0.0-0"),d.test(S)))return S;S=null;for(var C=0;C<d.set.length;++C){var R=d.set[C];R.forEach(function(k){var L=new ue(k.semver.version);switch(k.operator){case">":L.prerelease.length===0?L.patch++:L.prerelease.push(0),L.raw=L.format();case"":case">=":(!S||He(S,L))&&(S=L);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+k.operator)}})}return S&&d.test(S)?S:null}e.validRange=Gt;function Gt(d,_){try{return new he(d,_).range||"*"}catch{return null}}e.ltr=Wt;function Wt(d,_,S){return nt(d,_,"<",S)}e.gtr=jt;function jt(d,_,S){return nt(d,_,">",S)}e.outside=nt;function nt(d,_,S,C){d=new ue(d,C),_=new he(_,C);var R,k,L,Q,te;switch(S){case">":R=He,k=Ye,L=$e,Q=">",te=">=";break;case"<":R=$e,k=Pe,L=He,Q="<",te="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pe(d,_,C))return!1;for(var Fe=0;Fe<_.set.length;++Fe){var lt=_.set[Fe],qe=null,it=null;if(lt.forEach(function(dt){dt.semver===Le&&(dt=new we(">=0.0.0")),qe=qe||dt,it=it||dt,R(dt.semver,qe.semver,C)?qe=dt:L(dt.semver,it.semver,C)&&(it=dt)}),qe.operator===Q||qe.operator===te||(!it.operator||it.operator===Q)&&k(d,it.semver)||it.operator===te&&L(d,it.semver))return!1}return!0}e.prerelease=Ct;function Ct(d,_){var S=At(d,_);return S&&S.prerelease.length?S.prerelease:null}e.intersects=ct;function ct(d,_,S){return d=new he(d,S),_=new he(_,S),d.intersects(_)}e.coerce=mt;function mt(d){if(d instanceof ue)return d;if(typeof d!="string")return null;var _=d.match(o[Dt]);return _==null?null:At(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),Sc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var r=require("path"),t=ap(),i=require("module"),u=Object.keys(process.binding("natives")),a=i.prototype.require;function o(n){var s={};return function(l){var f=a.apply(this,arguments);if(n[l]){var c=i._resolveFilename(l,this);if(s.hasOwnProperty(c))return s[c];var p=void 0;if(u.indexOf(l)<0)try{p=a.call(this,r.join(l,"package.json")).version}catch{return f}else p=process.version.substring(1);var v=p.indexOf("-");v>=0&&(p=p.substring(0,v));for(var m=f,g=0,E=n[l];g<E.length;g++){var T=E[g];t.satisfies(p,T.versionSpecifier)&&(m=T.patch(m,c))}return s[c]=m}return f}}e.makePatchingRequire=o}),sp=N((e,r)=>{r.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),ur=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var r=Sc(),t=Sc();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return t.makePatchingRequire}});var i=function(o){return!0},u=function(){function o(){this.version=sp().version,this.subscribers={},this.contextPreservationFunction=function(n){return n},this.knownPatches={},this.currentlyPublishing=!1}return o.prototype.shouldPublish=function(n){var s=this.subscribers[n];return s?s.some(function(l){var f=l.filter;return!f||f(!1)}):!1},o.prototype.publish=function(n,s){if(!this.currentlyPublishing){var l=this.subscribers[n];if(l){var f={timestamp:Date.now(),data:s};this.currentlyPublishing=!0,l.forEach(function(c){var p=c.listener,v=c.filter;try{v&&v(!0)&&p(f)}catch{}}),this.currentlyPublishing=!1}}},o.prototype.subscribe=function(n,s,l){l===void 0&&(l=i),this.subscribers[n]||(this.subscribers[n]=[]),this.subscribers[n].push({listener:s,filter:l})},o.prototype.unsubscribe=function(n,s,l){l===void 0&&(l=i);var f=this.subscribers[n];if(f){for(var c=0;c<f.length;++c)if(f[c].listener===s&&f[c].filter===l)return f.splice(c,1),!0}return!1},o.prototype.reset=function(){var n=this;this.subscribers={},this.contextPreservationFunction=function(s){return s},Object.getOwnPropertyNames(this.knownPatches).forEach(function(s){return delete n.knownPatches[s]})},o.prototype.bindToContext=function(n){return this.contextPreservationFunction(n)},o.prototype.addContextPreservation=function(n){var s=this.contextPreservationFunction;this.contextPreservationFunction=function(l){return n(s(l))}},o.prototype.registerMonkeyPatch=function(n,s){this.knownPatches[n]||(this.knownPatches[n]=[]),this.knownPatches[n].push(s)},o.prototype.getPatchesObject=function(){return this.knownPatches},o}();global.diagnosticsSource||(global.diagnosticsSource=new u,a=require("module"),a.prototype.require=r.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var a;e.channel=global.diagnosticsSource}),up=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),cp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis=typeof globalThis=="object"?globalThis:global}),lp=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(cp(),e)}),fp=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(lp(),e)}),Tc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.3"}),dp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var r=Tc(),t=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function i(u){var a=new Set([u]),o=new Set,n=u.match(t);if(!n)return function(){return!1};var s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(s.prerelease!=null)return function(c){return c===u};function l(c){return o.add(c),!1}function f(c){return a.add(c),!0}return function(c){if(a.has(c))return!0;if(o.has(c))return!1;var p=c.match(t);if(!p)return l(c);var v={major:+p[1],minor:+p[2],patch:+p[3],prerelease:p[4]};return v.prerelease!=null||s.major!==v.major?l(c):s.major===0?s.minor===v.minor&&s.patch<=v.patch?f(c):l(c):s.minor<=v.minor?f(c):l(c)}}e._makeCompatibilityCheck=i,e.isCompatible=i(r.VERSION)}),ui=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var r=fp(),t=Tc(),i=dp(),u=t.VERSION.split(".")[0],a=Symbol.for("opentelemetry.js.api."+u),o=r._globalThis;function n(f,c,p,v){var m;v===void 0&&(v=!1);var g=o[a]=(m=o[a])!==null&&m!==void 0?m:{version:t.VERSION};if(!v&&g[f]){var E=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+f);return p.error(E.stack||E.message),!1}if(g.version!==t.VERSION){var E=new Error("@opentelemetry/api: All API registration versions must match");return p.error(E.stack||E.message),!1}return g[f]=c,p.debug("@opentelemetry/api: Registered a global for "+f+" v"+t.VERSION+"."),!0}e.registerGlobal=n;function s(f){var c,p,v=(c=o[a])===null||c===void 0?void 0:c.version;if(!(!v||!i.isCompatible(v)))return(p=o[a])===null||p===void 0?void 0:p[f]}e.getGlobal=s;function l(f,c){c.debug("@opentelemetry/api: Unregistering a global for "+f+" v"+t.VERSION+".");var p=o[a];p&&delete p[f]}e.unregisterGlobal=l}),pp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var r=ui(),t=function(){function u(a){this._namespace=a.namespace||"DiagComponentLogger"}return u.prototype.debug=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return i("debug",this._namespace,a)},u.prototype.error=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return i("error",this._namespace,a)},u.prototype.info=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return i("info",this._namespace,a)},u.prototype.warn=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return i("warn",this._namespace,a)},u.prototype.verbose=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return i("verbose",this._namespace,a)},u}();e.DiagComponentLogger=t;function i(u,a,o){var n=r.getGlobal("diag");if(n)return o.unshift(a),n[u].apply(n,o)}}),pa=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0;var r;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(r=e.DiagLogLevel||(e.DiagLogLevel={}))}),hp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var r=pa();function t(i,u){i<r.DiagLogLevel.NONE?i=r.DiagLogLevel.NONE:i>r.DiagLogLevel.ALL&&(i=r.DiagLogLevel.ALL),u=u||{};function a(o,n){var s=u[o];return typeof s=="function"&&i>=n?s.bind(u):function(){}}return{error:a("error",r.DiagLogLevel.ERROR),warn:a("warn",r.DiagLogLevel.WARN),info:a("info",r.DiagLogLevel.INFO),debug:a("debug",r.DiagLogLevel.DEBUG),verbose:a("verbose",r.DiagLogLevel.VERBOSE)}}e.createLogLevelDiagLogger=t}),ci=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var r=pp(),t=hp(),i=pa(),u=ui(),a="diag",o=function(){function n(){function s(f){return function(){var c=u.getGlobal("diag");if(c)return c[f].apply(c,arguments)}}var l=this;l.setLogger=function(f,c){var p,v;if(c===void 0&&(c=i.DiagLogLevel.INFO),f===l){var m=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return l.error((p=m.stack)!==null&&p!==void 0?p:m.message),!1}var g=u.getGlobal("diag"),E=t.createLogLevelDiagLogger(c,f);if(g){var T=(v=new Error().stack)!==null&&v!==void 0?v:"<failed to generate stacktrace>";g.warn("Current logger will be overwritten from "+T),E.warn("Current logger will overwrite one already registered from "+T)}return u.registerGlobal("diag",E,l,!0)},l.disable=function(){u.unregisterGlobal(a,l)},l.createComponentLogger=function(f){return new r.DiagComponentLogger(f)},l.verbose=s("verbose"),l.debug=s("debug"),l.info=s("info"),l.warn=s("warn"),l.error=s("error")}return n.instance=function(){return this._instance||(this._instance=new n),this._instance},n}();e.DiagAPI=o}),vp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var r=function(){function t(i){this._entries=i?new Map(i):new Map}return t.prototype.getEntry=function(i){var u=this._entries.get(i);if(u)return Object.assign({},u)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(i){var u=i[0],a=i[1];return[u,a]})},t.prototype.setEntry=function(i,u){var a=new t(this._entries);return a._entries.set(i,u),a},t.prototype.removeEntry=function(i){var u=new t(this._entries);return u._entries.delete(i),u},t.prototype.removeEntries=function(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];for(var a=new t(this._entries),o=0,n=i;o<n.length;o++){var s=n[o];a._entries.delete(s)}return a},t.prototype.clear=function(){return new t},t}();e.BaggageImpl=r}),mp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),Ic=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var r=ci(),t=vp(),i=mp(),u=r.DiagAPI.instance();function a(n){return n===void 0&&(n={}),new t.BaggageImpl(new Map(Object.entries(n)))}e.createBaggage=a;function o(n){return typeof n!="string"&&(u.error("Cannot create baggage metadata from unknown type: "+typeof n),n=""),{__TYPE__:i.baggageEntryMetadataSymbol,toString:function(){return n}}}e.baggageEntryMetadataFromString=o}),gp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),_p=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),yp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],t=function(){function i(){function u(o){return function(){var n=arguments;if(console){var s=console[o];if(typeof s!="function"&&(s=console.log),typeof s=="function")return s.apply(console,n)}}}for(var a=0;a<r.length;a++)this[r[a].n]=u(r[a].c)}return i}();e.DiagConsoleLogger=t}),Ep=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(yp(),e),t(pa(),e)}),wc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(r,t){if(r!=null)return r[t]},keys:function(r){return r==null?[]:Object.keys(r)}},e.defaultTextMapSetter={set:function(r,t,i){r!=null&&(r[t]=i)}}}),bp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Sp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),$i=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0;function r(i){return Symbol.for(i)}e.createContextKey=r;var t=function(){function i(u){var a=this;a._currentContext=u?new Map(u):new Map,a.getValue=function(o){return a._currentContext.get(o)},a.setValue=function(o,n){var s=new i(a._currentContext);return s._currentContext.set(o,n),s},a.deleteValue=function(o){var n=new i(a._currentContext);return n._currentContext.delete(o),n}}return i}();e.ROOT_CONTEXT=new t}),Tp=N(e=>{"use strict";var r=e&&e.__spreadArray||function(u,a){for(var o=0,n=a.length,s=u.length;o<n;o++,s++)u[s]=a[o];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var t=$i(),i=function(){function u(){}return u.prototype.active=function(){return t.ROOT_CONTEXT},u.prototype.with=function(a,o,n){for(var s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];return o.call.apply(o,r([n],s))},u.prototype.bind=function(a,o){return o},u.prototype.enable=function(){return this},u.prototype.disable=function(){return this},u}();e.NoopContextManager=i}),Ac=N(e=>{"use strict";var r=e&&e.__spreadArray||function(s,l){for(var f=0,c=l.length,p=s.length;f<c;f++,p++)s[p]=l[f];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var t=Tp(),i=ui(),u=ci(),a="context",o=new t.NoopContextManager,n=function(){function s(){}return s.getInstance=function(){return this._instance||(this._instance=new s),this._instance},s.prototype.setGlobalContextManager=function(l){return i.registerGlobal(a,l,u.DiagAPI.instance())},s.prototype.active=function(){return this._getContextManager().active()},s.prototype.with=function(l,f,c){for(var p,v=[],m=3;m<arguments.length;m++)v[m-3]=arguments[m];return(p=this._getContextManager()).with.apply(p,r([l,f,c],v))},s.prototype.bind=function(l,f){return this._getContextManager().bind(l,f)},s.prototype._getContextManager=function(){return i.getGlobal(a)||o},s.prototype.disable=function(){this._getContextManager().disable(),i.unregisterGlobal(a,u.DiagAPI.instance())},s}();e.ContextAPI=n}),Pc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0;var r;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(r=e.TraceFlags||(e.TraceFlags={}))}),ha=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var r=Pc();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:r.TraceFlags.NONE}}),va=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var r=ha(),t=function(){function i(u){u===void 0&&(u=r.INVALID_SPAN_CONTEXT),this._spanContext=u}return i.prototype.spanContext=function(){return this._spanContext},i.prototype.setAttribute=function(u,a){return this},i.prototype.setAttributes=function(u){return this},i.prototype.addEvent=function(u,a){return this},i.prototype.setStatus=function(u){return this},i.prototype.updateName=function(u){return this},i.prototype.end=function(u){},i.prototype.isRecording=function(){return!1},i.prototype.recordException=function(u,a){},i}();e.NonRecordingSpan=t}),Oc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var r=$i(),t=va(),i=r.createContextKey("OpenTelemetry Context Key SPAN");function u(l){return l.getValue(i)||void 0}e.getSpan=u;function a(l,f){return l.setValue(i,f)}e.setSpan=a;function o(l){return l.deleteValue(i)}e.deleteSpan=o;function n(l,f){return a(l,new t.NonRecordingSpan(f))}e.setSpanContext=n;function s(l){var f;return(f=u(l))===null||f===void 0?void 0:f.spanContext()}e.getSpanContext=s}),ma=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;var r=ha(),t=va(),i=/^([0-9a-f]{32})$/i,u=/^[0-9a-f]{16}$/i;function a(l){return i.test(l)&&l!==r.INVALID_TRACEID}e.isValidTraceId=a;function o(l){return u.test(l)&&l!==r.INVALID_SPANID}e.isValidSpanId=o;function n(l){return a(l.traceId)&&o(l.spanId)}e.isSpanContextValid=n;function s(l){return new t.NonRecordingSpan(l)}e.wrapSpanContext=s}),Cc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var r=Ac(),t=Oc(),i=va(),u=ma(),a=r.ContextAPI.getInstance(),o=function(){function s(){}return s.prototype.startSpan=function(l,f,c){var p=Boolean(f==null?void 0:f.root);if(p)return new i.NonRecordingSpan;var v=c&&t.getSpanContext(c);return n(v)&&u.isSpanContextValid(v)?new i.NonRecordingSpan(v):new i.NonRecordingSpan},s.prototype.startActiveSpan=function(l,f,c,p){var v,m,g;if(!(arguments.length<2)){arguments.length===2?g=f:arguments.length===3?(v=f,g=c):(v=f,m=c,g=p);var E=m??a.active(),T=this.startSpan(l,v,E),P=t.setSpan(E,T);return a.with(P,g,void 0,T)}},s}();e.NoopTracer=o;function n(s){return typeof s=="object"&&typeof s.spanId=="string"&&typeof s.traceId=="string"&&typeof s.traceFlags=="number"}}),Rc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var r=Cc(),t=new r.NoopTracer,i=function(){function u(a,o,n){this._provider=a,this.name=o,this.version=n}return u.prototype.startSpan=function(a,o,n){return this._getTracer().startSpan(a,o,n)},u.prototype.startActiveSpan=function(a,o,n,s){var l=this._getTracer();return Reflect.apply(l.startActiveSpan,l,arguments)},u.prototype._getTracer=function(){if(this._delegate)return this._delegate;var a=this._provider.getDelegateTracer(this.name,this.version);return a?(this._delegate=a,this._delegate):t},u}();e.ProxyTracer=i}),Ip=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var r=Cc(),t=function(){function i(){}return i.prototype.getTracer=function(u,a){return new r.NoopTracer},i}();e.NoopTracerProvider=t}),Dc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var r=Rc(),t=Ip(),i=new t.NoopTracerProvider,u=function(){function a(){}return a.prototype.getTracer=function(o,n){var s;return(s=this.getDelegateTracer(o,n))!==null&&s!==void 0?s:new r.ProxyTracer(this,o,n)},a.prototype.getDelegate=function(){var o;return(o=this._delegate)!==null&&o!==void 0?o:i},a.prototype.setDelegate=function(o){this._delegate=o},a.prototype.getDelegateTracer=function(o,n){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(o,n)},a}();e.ProxyTracerProvider=u}),wp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ap=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0;var r;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(r=e.SamplingDecision||(e.SamplingDecision={}))}),Pp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Op=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0;var r;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(r=e.SpanKind||(e.SpanKind={}))}),Cp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Rp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Dp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0;var r;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(r=e.SpanStatusCode||(e.SpanStatusCode={}))}),Np=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),xp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Mp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),kp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Lp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var r=ui(),t=Dc(),i=ma(),u=Oc(),a=ci(),o="trace",n=function(){function s(){this._proxyTracerProvider=new t.ProxyTracerProvider,this.wrapSpanContext=i.wrapSpanContext,this.isSpanContextValid=i.isSpanContextValid,this.deleteSpan=u.deleteSpan,this.getSpan=u.getSpan,this.getSpanContext=u.getSpanContext,this.setSpan=u.setSpan,this.setSpanContext=u.setSpanContext}return s.getInstance=function(){return this._instance||(this._instance=new s),this._instance},s.prototype.setGlobalTracerProvider=function(l){var f=r.registerGlobal(o,this._proxyTracerProvider,a.DiagAPI.instance());return f&&this._proxyTracerProvider.setDelegate(l),f},s.prototype.getTracerProvider=function(){return r.getGlobal(o)||this._proxyTracerProvider},s.prototype.getTracer=function(l,f){return this.getTracerProvider().getTracer(l,f)},s.prototype.disable=function(){r.unregisterGlobal(o,a.DiagAPI.instance()),this._proxyTracerProvider=new t.ProxyTracerProvider},s}();e.TraceAPI=n}),jp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var r=function(){function t(){}return t.prototype.inject=function(i,u){},t.prototype.extract=function(i,u){return i},t.prototype.fields=function(){return[]},t}();e.NoopTextMapPropagator=r}),Fp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var r=$i(),t=r.createContextKey("OpenTelemetry Baggage Key");function i(o){return o.getValue(t)||void 0}e.getBaggage=i;function u(o,n){return o.setValue(t,n)}e.setBaggage=u;function a(o){return o.deleteValue(t)}e.deleteBaggage=a}),Up=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var r=ui(),t=jp(),i=wc(),u=Fp(),a=Ic(),o=ci(),n="propagation",s=new t.NoopTextMapPropagator,l=function(){function f(){this.createBaggage=a.createBaggage,this.getBaggage=u.getBaggage,this.setBaggage=u.setBaggage,this.deleteBaggage=u.deleteBaggage}return f.getInstance=function(){return this._instance||(this._instance=new f),this._instance},f.prototype.setGlobalPropagator=function(c){return r.registerGlobal(n,c,o.DiagAPI.instance())},f.prototype.inject=function(c,p,v){return v===void 0&&(v=i.defaultTextMapSetter),this._getGlobalPropagator().inject(c,p,v)},f.prototype.extract=function(c,p,v){return v===void 0&&(v=i.defaultTextMapGetter),this._getGlobalPropagator().extract(c,p,v)},f.prototype.fields=function(){return this._getGlobalPropagator().fields()},f.prototype.disable=function(){r.unregisterGlobal(n,o.DiagAPI.instance())},f.prototype._getGlobalPropagator=function(){return r.getGlobal(n)||s},f}();e.PropagationAPI=l}),Jt=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(f,c,p,v){v===void 0&&(v=p),Object.defineProperty(f,v,{enumerable:!0,get:function(){return c[p]}})}:function(f,c,p,v){v===void 0&&(v=p),f[v]=c[p]}),t=e&&e.__exportStar||function(f,c){for(var p in f)p!=="default"&&!Object.prototype.hasOwnProperty.call(c,p)&&r(c,f,p)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.baggageEntryMetadataFromString=void 0,t(up(),e);var i=Ic();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return i.baggageEntryMetadataFromString}}),t(gp(),e),t(_p(),e),t(Ep(),e),t(wc(),e),t(bp(),e),t(Sp(),e),t(Rc(),e),t(Dc(),e),t(wp(),e),t(Ap(),e),t(Pp(),e),t(Op(),e),t(Cp(),e),t(Rp(),e),t(Dp(),e),t(Pc(),e),t(Np(),e),t(xp(),e),t(Mp(),e);var u=ma();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return u.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return u.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return u.isValidSpanId}});var a=ha();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return a.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return a.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return a.INVALID_SPAN_CONTEXT}}),t($i(),e),t(kp(),e);var o=Ac();e.context=o.ContextAPI.getInstance();var n=Lp();e.trace=n.TraceAPI.getInstance();var s=Up();e.propagation=s.PropagationAPI.getInstance();var l=ci();e.diag=l.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}}),ga=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var r=Jt(),t=r.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function i(o){return o.setValue(t,!0)}e.suppressTracing=i;function u(o){return o.deleteValue(t)}e.unsuppressTracing=u;function a(o){return o.getValue(t)===!0}e.isTracingSuppressed=a}),Nc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192}),xc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var r=Jt(),t=Nc(),i=n=>n.reduce((s,l)=>{let f=`${s}${s!==""?t.BAGGAGE_ITEMS_SEPARATOR:""}${l}`;return f.length>t.BAGGAGE_MAX_TOTAL_LENGTH?s:f},"");e.serializeKeyPairs=i;var u=n=>n.getAllEntries().map(([s,l])=>`${encodeURIComponent(s)}=${encodeURIComponent(l.value)}`);e.getKeyPairs=u;var a=n=>{let s=n.split(t.BAGGAGE_PROPERTIES_SEPARATOR);if(s.length<=0)return;let l=s.shift();if(!l)return;let f=l.split(t.BAGGAGE_KEY_PAIR_SEPARATOR);if(f.length!==2)return;let c=decodeURIComponent(f[0].trim()),p=decodeURIComponent(f[1].trim()),v;return s.length>0&&(v=r.baggageEntryMetadataFromString(s.join(t.BAGGAGE_PROPERTIES_SEPARATOR))),{key:c,value:p,metadata:v}};e.parsePairKeyValue=a;var o=n=>typeof n!="string"||n.length===0?{}:n.split(t.BAGGAGE_ITEMS_SEPARATOR).map(s=>e.parsePairKeyValue(s)).filter(s=>s!==void 0&&s.value.length>0).reduce((s,l)=>(s[l.key]=l.value,s),{});e.parseKeyPairsIntoRecord=o}),Hp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var r=Jt(),t=ga(),i=Nc(),u=xc(),a=class{inject(o,n,s){let l=r.propagation.getBaggage(o);if(!l||t.isTracingSuppressed(o))return;let f=u.getKeyPairs(l).filter(p=>p.length<=i.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,i.BAGGAGE_MAX_NAME_VALUE_PAIRS),c=u.serializeKeyPairs(f);c.length>0&&s.set(n,i.BAGGAGE_HEADER,c)}extract(o,n,s){let l=s.get(n,i.BAGGAGE_HEADER);if(!l)return o;let f={};return l.length===0||(l.split(i.BAGGAGE_ITEMS_SEPARATOR).forEach(c=>{let p=u.parsePairKeyValue(c);if(p){let v={value:p.value};p.metadata&&(v.metadata=p.metadata),f[p.key]=v}}),Object.entries(f).length===0)?o:r.propagation.setBaggage(o,r.propagation.createBaggage(f))}fields(){return[i.BAGGAGE_HEADER]}};e.HttpBaggagePropagator=a}),qp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0;function r(a){let o={};if(a==null||typeof a!="object")return o;for(let[n,s]of Object.entries(a))t(s)&&(Array.isArray(s)?o[n]=s.slice():o[n]=s);return o}e.sanitizeAttributes=r;function t(a){return a==null?!0:Array.isArray(a)?i(a):u(a)}e.isAttributeValue=t;function i(a){let o;for(let n of a)if(n!=null){if(!o){if(u(n)){o=typeof n;continue}return!1}if(typeof n!==o)return!1}return!0}function u(a){switch(typeof a){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),Mc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var r=Jt();function t(){return a=>{r.diag.error(i(a))}}e.loggingErrorHandler=t;function i(a){return typeof a=="string"?a:JSON.stringify(u(a))}function u(a){let o={},n=a;for(;n!==null;)Object.getOwnPropertyNames(n).forEach(s=>{if(o[s])return;let l=n[s];l&&(o[s]=String(l))}),n=Object.getPrototypeOf(n);return o}}),kc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var r=Mc(),t=r.loggingErrorHandler();function i(a){t=a}e.setGlobalErrorHandler=i;var u=a=>{try{t(a)}catch{}};e.globalErrorHandler=u}),Lc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0;var r;(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(r=e.TracesSamplerValues||(e.TracesSamplerValues={}))}),jc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var r=Jt(),t=Lc(),i=",",u=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function a(v){return u.indexOf(v)>-1}var o=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function n(v){return o.indexOf(v)>-1}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:r.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:t.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function s(v,m,g,E=-1/0,T=1/0){if(typeof g[v]<"u"){let P=Number(g[v]);isNaN(P)||(P<E?m[v]=E:P>T?m[v]=T:m[v]=P)}}function l(v,m,g,E=i){let T=g[v];typeof T=="string"&&(m[v]=T.split(E).map(P=>P.trim()))}var f={ALL:r.DiagLogLevel.ALL,VERBOSE:r.DiagLogLevel.VERBOSE,DEBUG:r.DiagLogLevel.DEBUG,INFO:r.DiagLogLevel.INFO,WARN:r.DiagLogLevel.WARN,ERROR:r.DiagLogLevel.ERROR,NONE:r.DiagLogLevel.NONE};function c(v,m,g){let E=g[v];if(typeof E=="string"){let T=f[E.toUpperCase()];T!=null&&(m[v]=T)}}function p(v){let m={};for(let g in e.DEFAULT_ENVIRONMENT){let E=g;switch(E){case"OTEL_LOG_LEVEL":c(E,m,v);break;default:if(a(E))s(E,m,v);else if(n(E))l(E,m,v);else{let T=v[E];typeof T<"u"&&T!==null&&(m[E]=String(T))}}}return m}e.parseEnvironment=p}),Bp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var r=require("os"),t=jc();function i(){let u=t.parseEnvironment(process.env);return Object.assign({HOSTNAME:r.hostname()},t.DEFAULT_ENVIRONMENT,u)}e.getEnv=i}),Gp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0;function r(t){let i=t.length,u="";for(let a=0;a<i;a+=2){let o=t.substring(a,a+2),n=parseInt(o,16);u+=String.fromCharCode(n)}return Buffer.from(u,"ascii").toString("base64")}e.hexToBase64=r}),Vp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0;var r=8,t=16,i=class{constructor(){this.generateTraceId=a(t),this.generateSpanId=a(r)}};e.RandomIdGenerator=i;var u=Buffer.allocUnsafe(t);function a(o){return function(){for(let n=0;n<o/4;n++)u.writeUInt32BE(Math.random()*2**32>>>0,n*4);for(let n=0;n<o&&!(u[n]>0);n++)n===o-1&&(u[o-1]=1);return u.toString("hex",0,o)}}}),zp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var r=require("perf_hooks");e.otperformance=r.performance}),_a=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"}),Wp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var r;(function(c){c.OTHER_SQL="other_sql",c.MSSQL="mssql",c.MYSQL="mysql",c.ORACLE="oracle",c.DB2="db2",c.POSTGRESQL="postgresql",c.REDSHIFT="redshift",c.HIVE="hive",c.CLOUDSCAPE="cloudscape",c.HSQLDB="hsqldb",c.PROGRESS="progress",c.MAXDB="maxdb",c.HANADB="hanadb",c.INGRES="ingres",c.FIRSTSQL="firstsql",c.EDB="edb",c.CACHE="cache",c.ADABAS="adabas",c.FIREBIRD="firebird",c.DERBY="derby",c.FILEMAKER="filemaker",c.INFORMIX="informix",c.INSTANTDB="instantdb",c.INTERBASE="interbase",c.MARIADB="mariadb",c.NETEZZA="netezza",c.PERVASIVE="pervasive",c.POINTBASE="pointbase",c.SQLITE="sqlite",c.SYBASE="sybase",c.TERADATA="teradata",c.VERTICA="vertica",c.H2="h2",c.COLDFUSION="coldfusion",c.CASSANDRA="cassandra",c.HBASE="hbase",c.MONGODB="mongodb",c.REDIS="redis",c.COUCHBASE="couchbase",c.COUCHDB="couchdb",c.COSMOSDB="cosmosdb",c.DYNAMODB="dynamodb",c.NEO4J="neo4j",c.GEODE="geode",c.ELASTICSEARCH="elasticsearch",c.MEMCACHED="memcached",c.COCKROACHDB="cockroachdb"})(r=e.DbSystemValues||(e.DbSystemValues={}));var t;(function(c){c.ALL="all",c.EACH_QUORUM="each_quorum",c.QUORUM="quorum",c.LOCAL_QUORUM="local_quorum",c.ONE="one",c.TWO="two",c.THREE="three",c.LOCAL_ONE="local_one",c.ANY="any",c.SERIAL="serial",c.LOCAL_SERIAL="local_serial"})(t=e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={}));var i;(function(c){c.DATASOURCE="datasource",c.HTTP="http",c.PUBSUB="pubsub",c.TIMER="timer",c.OTHER="other"})(i=e.FaasTriggerValues||(e.FaasTriggerValues={}));var u;(function(c){c.INSERT="insert",c.EDIT="edit",c.DELETE="delete"})(u=e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={}));var a;(function(c){c.AWS="aws",c.AZURE="azure",c.GCP="gcp"})(a=e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={}));var o;(function(c){c.IP_TCP="ip_tcp",c.IP_UDP="ip_udp",c.IP="ip",c.UNIX="unix",c.PIPE="pipe",c.INPROC="inproc",c.OTHER="other"})(o=e.NetTransportValues||(e.NetTransportValues={}));var n;(function(c){c.HTTP_1_0="1.0",c.HTTP_1_1="1.1",c.HTTP_2_0="2.0",c.SPDY="SPDY",c.QUIC="QUIC"})(n=e.HttpFlavorValues||(e.HttpFlavorValues={}));var s;(function(c){c.QUEUE="queue",c.TOPIC="topic"})(s=e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={}));var l;(function(c){c.RECEIVE="receive",c.PROCESS="process"})(l=e.MessagingOperationValues||(e.MessagingOperationValues={}));var f;(function(c){c[c.OK=0]="OK",c[c.CANCELLED=1]="CANCELLED",c[c.UNKNOWN=2]="UNKNOWN",c[c.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",c[c.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",c[c.NOT_FOUND=5]="NOT_FOUND",c[c.ALREADY_EXISTS=6]="ALREADY_EXISTS",c[c.PERMISSION_DENIED=7]="PERMISSION_DENIED",c[c.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",c[c.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",c[c.ABORTED=10]="ABORTED",c[c.OUT_OF_RANGE=11]="OUT_OF_RANGE",c[c.UNIMPLEMENTED=12]="UNIMPLEMENTED",c[c.INTERNAL=13]="INTERNAL",c[c.UNAVAILABLE=14]="UNAVAILABLE",c[c.DATA_LOSS=15]="DATA_LOSS",c[c.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(f=e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))}),$p=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Wp(),e)}),Kp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var r;(function(n){n.AWS="aws",n.AZURE="azure",n.GCP="gcp"})(r=e.CloudProviderValues||(e.CloudProviderValues={}));var t;(function(n){n.AWS_EC2="aws_ec2",n.AWS_ECS="aws_ecs",n.AWS_EKS="aws_eks",n.AWS_LAMBDA="aws_lambda",n.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",n.AZURE_VM="azure_vm",n.AZURE_CONTAINER_INSTANCES="azure_container_instances",n.AZURE_AKS="azure_aks",n.AZURE_FUNCTIONS="azure_functions",n.AZURE_APP_SERVICE="azure_app_service",n.GCP_COMPUTE_ENGINE="gcp_compute_engine",n.GCP_CLOUD_RUN="gcp_cloud_run",n.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",n.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",n.GCP_APP_ENGINE="gcp_app_engine"})(t=e.CloudPlatformValues||(e.CloudPlatformValues={}));var i;(function(n){n.EC2="ec2",n.FARGATE="fargate"})(i=e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={}));var u;(function(n){n.AMD64="amd64",n.ARM32="arm32",n.ARM64="arm64",n.IA64="ia64",n.PPC32="ppc32",n.PPC64="ppc64",n.X86="x86"})(u=e.HostArchValues||(e.HostArchValues={}));var a;(function(n){n.WINDOWS="windows",n.LINUX="linux",n.DARWIN="darwin",n.FREEBSD="freebsd",n.NETBSD="netbsd",n.OPENBSD="openbsd",n.DRAGONFLYBSD="dragonflybsd",n.HPUX="hpux",n.AIX="aix",n.SOLARIS="solaris",n.Z_OS="z_os"})(a=e.OsTypeValues||(e.OsTypeValues={}));var o;(function(n){n.CPP="cpp",n.DOTNET="dotnet",n.ERLANG="erlang",n.GO="go",n.JAVA="java",n.NODEJS="nodejs",n.PHP="php",n.PYTHON="python",n.RUBY="ruby",n.WEBJS="webjs"})(o=e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))}),Xp=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Kp(),e)}),li=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t($p(),e),t(Xp(),e)}),Qp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var r=_a(),t=li();e.SDK_INFO={[t.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[t.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:t.TelemetrySdkLanguageValues.NODEJS,[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.VERSION}}),Yp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0;function r(t){t.unref()}e.unrefTimer=r}),Zp=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Bp(),e),t(Gp(),e),t(Vp(),e),t(zp(),e),t(Qp(),e),t(Yp(),e)}),Fc=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Zp(),e)}),Jp=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var r=Fc(),t=9,i=Math.pow(10,t);function u(g){let E=g/1e3,T=Math.trunc(E),P=Number((E-T).toFixed(t))*i;return[T,P]}function a(){let g=r.otperformance.timeOrigin;if(typeof g!="number"){let E=r.otperformance;g=E.timing&&E.timing.fetchStart}return g}function o(g){let E=u(a()),T=u(typeof g=="number"?g:r.otperformance.now()),P=E[0]+T[0],O=E[1]+T[1];return O>i&&(O-=i,P+=1),[P,O]}e.hrTime=o;function n(g){if(v(g))return g;if(typeof g=="number")return g<a()?o(g):u(g);if(g instanceof Date)return u(g.getTime());throw TypeError("Invalid input type")}e.timeInputToHrTime=n;function s(g,E){let T=E[0]-g[0],P=E[1]-g[1];return P<0&&(T-=1,P+=i),[T,P]}e.hrTimeDuration=s;function l(g){let E=t,T=`${"0".repeat(E)}${g[1]}Z`,P=T.substr(T.length-E-1);return new Date(g[0]*1e3).toISOString().replace("000Z",P)}e.hrTimeToTimeStamp=l;function f(g){return g[0]*i+g[1]}e.hrTimeToNanoseconds=f;function c(g){return Math.round(g[0]*1e3+g[1]/1e6)}e.hrTimeToMilliseconds=c;function p(g){return Math.round(g[0]*1e6+g[1]/1e3)}e.hrTimeToMicroseconds=p;function v(g){return Array.isArray(g)&&g.length===2&&typeof g[0]=="number"&&typeof g[1]=="number"}e.isTimeInputHrTime=v;function m(g){return v(g)||typeof g=="number"||g instanceof Date}e.isTimeInput=m}),eh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),th=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0;var r;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(r=e.ExportResultCode||(e.ExportResultCode={}))}),rh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var r=Jt(),t=class{constructor(i={}){var u;this._propagators=(u=i.propagators)!==null&&u!==void 0?u:[],this._fields=Array.from(new Set(this._propagators.map(a=>typeof a.fields=="function"?a.fields():[]).reduce((a,o)=>a.concat(o),[])))}inject(i,u,a){for(let o of this._propagators)try{o.inject(i,u,a)}catch(n){r.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${n.message}`)}}extract(i,u,a){return this._propagators.reduce((o,n)=>{try{return n.extract(o,u,a)}catch(s){r.diag.warn(`Failed to inject with ${n.constructor.name}. Err: ${s.message}`)}return o},i)}fields(){return this._fields.slice()}};e.CompositePropagator=t}),nh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var r="[_0-9a-z-*/]",t=`[a-z]${r}{0,255}`,i=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,u=new RegExp(`^(?:${t}|${i})$`),a=/^[ -~]{0,255}[!-~]$/,o=/,|=/;function n(l){return u.test(l)}e.validateKey=n;function s(l){return a.test(l)&&!o.test(l)}e.validateValue=s}),Uc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var r=nh(),t=32,i=512,u=",",a="=",o=class{constructor(n){this._internalState=new Map,n&&this._parse(n)}set(n,s){let l=this._clone();return l._internalState.has(n)&&l._internalState.delete(n),l._internalState.set(n,s),l}unset(n){let s=this._clone();return s._internalState.delete(n),s}get(n){return this._internalState.get(n)}serialize(){return this._keys().reduce((n,s)=>(n.push(s+a+this.get(s)),n),[]).join(u)}_parse(n){n.length>i||(this._internalState=n.split(u).reverse().reduce((s,l)=>{let f=l.trim(),c=f.indexOf(a);if(c!==-1){let p=f.slice(0,c),v=f.slice(c+1,l.length);r.validateKey(p)&&r.validateValue(v)&&s.set(p,v)}return s},new Map),this._internalState.size>t&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,t))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let n=new o;return n._internalState=new Map(this._internalState),n}};e.TraceState=o}),ih=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var r=Jt(),t=ga(),i=Uc();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var u="00",a="(?!ff)[\\da-f]{2}",o="(?![0]{32})[\\da-f]{32}",n="(?![0]{16})[\\da-f]{16}",s="[\\da-f]{2}",l=new RegExp(`^\\s?(${a})-(${o})-(${n})-(${s})(-.*)?\\s?$`);function f(p){let v=l.exec(p);return!v||v[1]==="00"&&v[5]?null:{traceId:v[2],spanId:v[3],traceFlags:parseInt(v[4],16)}}e.parseTraceParent=f;var c=class{inject(p,v,m){let g=r.trace.getSpanContext(p);if(!g||t.isTracingSuppressed(p)||!r.isSpanContextValid(g))return;let E=`${u}-${g.traceId}-${g.spanId}-0${Number(g.traceFlags||r.TraceFlags.NONE).toString(16)}`;m.set(v,e.TRACE_PARENT_HEADER,E),g.traceState&&m.set(v,e.TRACE_STATE_HEADER,g.traceState.serialize())}extract(p,v,m){let g=m.get(v,e.TRACE_PARENT_HEADER);if(!g)return p;let E=Array.isArray(g)?g[0]:g;if(typeof E!="string")return p;let T=f(E);if(!T)return p;T.isRemote=!0;let P=m.get(v,e.TRACE_STATE_HEADER);if(P){let O=Array.isArray(P)?P.join(","):P;T.traceState=new i.TraceState(typeof O=="string"?O:void 0)}return r.trace.setSpanContext(p,T)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}};e.HttpTraceContextPropagator=c}),oh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),ah=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var r=Jt(),t=r.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),i;(function(n){n.HTTP="http"})(i=e.RPCType||(e.RPCType={}));function u(n,s){return n.setValue(t,s)}e.setRPCMetadata=u;function a(n){return n.deleteValue(t)}e.deleteRPCMetadata=a;function o(n){return n.getValue(t)}e.getRPCMetadata=o}),Hc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var r=Jt(),t=class{shouldSample(){return{decision:r.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};e.AlwaysOffSampler=t}),qc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var r=Jt(),t=class{shouldSample(){return{decision:r.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};e.AlwaysOnSampler=t}),sh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var r=Jt(),t=kc(),i=Hc(),u=qc(),a=class{constructor(o){var n,s,l,f;this._root=o.root,this._root||(t.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new u.AlwaysOnSampler),this._remoteParentSampled=(n=o.remoteParentSampled)!==null&&n!==void 0?n:new u.AlwaysOnSampler,this._remoteParentNotSampled=(s=o.remoteParentNotSampled)!==null&&s!==void 0?s:new i.AlwaysOffSampler,this._localParentSampled=(l=o.localParentSampled)!==null&&l!==void 0?l:new u.AlwaysOnSampler,this._localParentNotSampled=(f=o.localParentNotSampled)!==null&&f!==void 0?f:new i.AlwaysOffSampler}shouldSample(o,n,s,l,f,c){let p=r.trace.getSpanContext(o);return!p||!r.isSpanContextValid(p)?this._root.shouldSample(o,n,s,l,f,c):p.isRemote?p.traceFlags&r.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(o,n,s,l,f,c):this._remoteParentNotSampled.shouldSample(o,n,s,l,f,c):p.traceFlags&r.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(o,n,s,l,f,c):this._localParentNotSampled.shouldSample(o,n,s,l,f,c)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};e.ParentBasedSampler=a}),uh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var r=Jt(),t=class{constructor(i=0){this._ratio=i,this._ratio=this._normalize(i),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(i,u){return{decision:r.isValidTraceId(u)&&this._accumulate(u)<this._upperBound?r.SamplingDecision.RECORD_AND_SAMPLED:r.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(i){return typeof i!="number"||isNaN(i)?0:i>=1?1:i<=0?0:i}_accumulate(i){let u=0;for(let a=0;a<i.length/8;a++){let o=a*8,n=parseInt(i.slice(o,o+8),16);u=(u^n)>>>0}return u}};e.TraceIdRatioBasedSampler=t}),ch=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0;function r(i,u){return typeof u=="string"?i===u:u.test(i)}e.urlMatches=r;function t(i,u){if(!u)return!1;for(let a of u)if(r(i,a))return!0;return!1}e.isUrlIgnored=t}),lh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0;function r(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}e.isWrapped=r}),Vr=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,t(Hp(),e),t(qp(),e),t(kc(),e),t(Mc(),e),t(Jp(),e),t(eh(),e),t(th(),e),t(_a(),e),e.baggageUtils=xc(),t(Fc(),e),t(rh(),e),t(ih(),e),t(oh(),e),t(ah(),e),t(Hc(),e),t(qc(),e),t(sh(),e),t(uh(),e),t(ga(),e),t(Uc(),e),t(jc(),e),t(Lc(),e),t(ch(),e),t(lh(),e),t(_a(),e)}),fh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"}),Bc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var r=Jt(),t=Vr(),i=li(),u=fh(),a=class{constructor(o,n,s,l,f,c,p=[],v=t.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:r.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=s,this._spanContext=l,this.parentSpanId=c,this.kind=f,this.links=p,this.startTime=t.timeInputToHrTime(v),this.resource=o.resource,this.instrumentationLibrary=o.instrumentationLibrary,this._spanLimits=o.getSpanLimits(),this._spanProcessor=o.getActiveSpanProcessor(),this._spanProcessor.onStart(this,n)}spanContext(){return this._spanContext}setAttribute(o,n){return n==null||this._isSpanEnded()?this:o.length===0?(r.diag.warn(`Invalid attribute key: ${o}`),this):t.isAttributeValue(n)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,o)?this:(this.attributes[o]=n,this):(r.diag.warn(`Invalid attribute value set for key: ${o}`),this)}setAttributes(o){for(let[n,s]of Object.entries(o))this.setAttribute(n,s);return this}addEvent(o,n,s){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(r.diag.warn("Dropping extra events."),this.events.shift()),t.isTimeInput(n)&&(typeof s>"u"&&(s=n),n=void 0),typeof s>"u"&&(s=t.hrTime()),this.events.push({name:o,attributes:n,time:t.timeInputToHrTime(s)}),this)}setStatus(o){return this._isSpanEnded()?this:(this.status=o,this)}updateName(o){return this._isSpanEnded()?this:(this.name=o,this)}end(o=t.hrTime()){if(this._isSpanEnded()){r.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=t.timeInputToHrTime(o),this._duration=t.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&r.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(o,n=t.hrTime()){let s={};typeof o=="string"?s[i.SemanticAttributes.EXCEPTION_MESSAGE]=o:o&&(o.code?s[i.SemanticAttributes.EXCEPTION_TYPE]=o.code.toString():o.name&&(s[i.SemanticAttributes.EXCEPTION_TYPE]=o.name),o.message&&(s[i.SemanticAttributes.EXCEPTION_MESSAGE]=o.message),o.stack&&(s[i.SemanticAttributes.EXCEPTION_STACKTRACE]=o.stack)),s[i.SemanticAttributes.EXCEPTION_TYPE]||s[i.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(u.ExceptionEventName,s,n):r.diag.warn(`Failed to record an exception ${o}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&r.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};e.Span=a}),Gc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var r=Jt(),t=Vr(),i=t.getEnv(),u=t.TracesSamplerValues.AlwaysOn;e.DEFAULT_CONFIG={sampler:a(i),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:t.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:t.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:t.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function a(s=t.getEnv()){switch(s.OTEL_TRACES_SAMPLER){case t.TracesSamplerValues.AlwaysOn:return new t.AlwaysOnSampler;case t.TracesSamplerValues.AlwaysOff:return new t.AlwaysOffSampler;case t.TracesSamplerValues.ParentBasedAlwaysOn:return new t.ParentBasedSampler({root:new t.AlwaysOnSampler});case t.TracesSamplerValues.ParentBasedAlwaysOff:return new t.ParentBasedSampler({root:new t.AlwaysOffSampler});case t.TracesSamplerValues.TraceIdRatio:return new t.TraceIdRatioBasedSampler(n(s));case t.TracesSamplerValues.ParentBasedTraceIdRatio:return new t.ParentBasedSampler({root:new t.TraceIdRatioBasedSampler(n(s))});default:return r.diag.error(`OTEL_TRACES_SAMPLER value "${s.OTEL_TRACES_SAMPLER} invalid, defaulting to ${u}".`),new t.AlwaysOnSampler}}e.buildSamplerFromEnv=a;var o=1;function n(s){if(s.OTEL_TRACES_SAMPLER_ARG===void 0||s.OTEL_TRACES_SAMPLER_ARG==="")return r.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${o}.`),o;let l=Number(s.OTEL_TRACES_SAMPLER_ARG);return isNaN(l)?(r.diag.error(`OTEL_TRACES_SAMPLER_ARG=${s.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${o}.`),o):l<0||l>1?(r.diag.error(`OTEL_TRACES_SAMPLER_ARG=${s.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${o}.`),o):l}}),dh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var r=Gc();function t(i){let u={sampler:r.buildSamplerFromEnv()},a=Object.assign({},r.DEFAULT_CONFIG,u,i);return a.spanLimits=Object.assign({},r.DEFAULT_CONFIG.spanLimits,i.spanLimits||{}),a}e.mergeConfig=t}),ph=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var r=Jt(),t=Vr(),i=Bc(),u=dh(),a=class{constructor(n,s,l){this._tracerProvider=l;let f=u.mergeConfig(s);this._sampler=f.sampler,this._spanLimits=f.spanLimits,this._idGenerator=s.idGenerator||new t.RandomIdGenerator,this.resource=l.resource,this.instrumentationLibrary=n}startSpan(n,s={},l=r.context.active()){var f,c;if(t.isTracingSuppressed(l))return r.diag.debug("Instrumentation suppressed, returning Noop Span"),r.trace.wrapSpanContext(r.INVALID_SPAN_CONTEXT);let p=o(s,l),v=this._idGenerator.generateSpanId(),m,g,E;!p||!r.trace.isSpanContextValid(p)?m=this._idGenerator.generateTraceId():(m=p.traceId,g=p.traceState,E=p.spanId);let T=(f=s.kind)!==null&&f!==void 0?f:r.SpanKind.INTERNAL,P=(c=s.links)!==null&&c!==void 0?c:[],O=t.sanitizeAttributes(s.attributes),A=this._sampler.shouldSample(s.root?r.trace.setSpanContext(l,r.INVALID_SPAN_CONTEXT):l,m,n,T,O,P),M=A.decision===r.SamplingDecision.RECORD_AND_SAMPLED?r.TraceFlags.SAMPLED:r.TraceFlags.NONE,j={traceId:m,spanId:v,traceFlags:M,traceState:g};if(A.decision===r.SamplingDecision.NOT_RECORD)return r.diag.debug("Recording is off, propagating context in a non-recording span"),r.trace.wrapSpanContext(j);let G=new i.Span(this,l,n,j,T,E,P,s.startTime);return G.setAttributes(Object.assign(O,A.attributes)),G}startActiveSpan(n,s,l,f){let c,p,v;if(arguments.length<2)return;arguments.length===2?v=s:arguments.length===3?(c=s,v=l):(c=s,p=l,v=f);let m=p??r.context.active(),g=this.startSpan(n,c,m),E=r.trace.setSpan(m,g);return r.context.with(E,v,void 0,g)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};e.Tracer=a;function o(n,s){if(!n.root)return r.trace.getSpanContext(s)}}),hh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0;function r(){return`unknown_service:${process.argv0}`}e.defaultServiceName=r}),vh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var r=zc(),t=Jt(),i=require("util"),u=async(o={})=>{let n=Object.assign(o),s=await Promise.all((n.detectors||[]).map(async l=>{try{let f=await l.detect(n);return t.diag.debug(`${l.constructor.name} found resource.`,f),f}catch(f){return t.diag.debug(`${l.constructor.name} failed: ${f.message}`),r.Resource.empty()}}));return a(s),s.reduce((l,f)=>l.merge(f),r.Resource.empty())};e.detectResources=u;var a=o=>{o.forEach(n=>{if(Object.keys(n.attributes).length>0){let s=i.inspect(n.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});t.diag.verbose(s)}})}}),mh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var r=Jt(),t=Vr(),i=li(),u=ya(),a=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(o){let n={},s=t.getEnv(),l=s.OTEL_RESOURCE_ATTRIBUTES,f=s.OTEL_SERVICE_NAME;if(l)try{let c=this._parseResourceAttributes(l);Object.assign(n,c)}catch(c){r.diag.debug(`EnvDetector failed: ${c.message}`)}return f&&(n[i.ResourceAttributes.SERVICE_NAME]=f),new u.Resource(n)}_parseResourceAttributes(o){if(!o)return{};let n={},s=o.split(this._COMMA_SEPARATOR,-1);for(let l of s){let f=l.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(f.length!==2)continue;let[c,p]=f;if(c=c.trim(),p=p.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(c))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(p))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);n[c]=p}return n}_isValid(o){return o.length<=this._MAX_LENGTH&&this._isPrintableString(o)}_isPrintableString(o){for(let n=0;n<o.length;n++){let s=o.charAt(n);if(s<=" "||s>="~")return!1}return!0}_isValidAndNotEmpty(o){return o.length>0&&this._isValid(o)}};e.envDetector=new a}),gh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var r=Jt(),t=li(),i=ya(),u=class{async detect(a){let o={[t.ResourceAttributes.PROCESS_PID]:process.pid,[t.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[t.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[t.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(o,a)}_getResourceAttributes(a,o){return a[t.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||a[t.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||a[t.ResourceAttributes.PROCESS_COMMAND]===""||a[t.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(r.diag.debug("ProcessDetector failed: Unable to find required process resources. "),i.Resource.empty()):new i.Resource(Object.assign({},a))}};e.processDetector=new u}),_h=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(mh(),e),t(gh(),e)}),yh=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(hh(),e),t(vh(),e),t(_h(),e)}),Vc=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(yh(),e)}),zc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var r=li(),t=Vr(),i=Vc(),u=class{constructor(a){this.attributes=a}static empty(){return u.EMPTY}static default(){return new u({[r.ResourceAttributes.SERVICE_NAME]:i.defaultServiceName(),[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:t.SDK_INFO[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[r.ResourceAttributes.TELEMETRY_SDK_NAME]:t.SDK_INFO[r.ResourceAttributes.TELEMETRY_SDK_NAME],[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.SDK_INFO[r.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(a){if(!a||!Object.keys(a.attributes).length)return this;let o=Object.assign({},this.attributes,a.attributes);return new u(o)}};e.Resource=u,u.EMPTY=new u({})}),Eh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),bh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),ya=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(zc(),e),t(Vc(),e),t(Eh(),e),t(bh(),e)}),Sh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var r=Vr(),t=class{constructor(i){this._spanProcessors=i}forceFlush(){let i=[];for(let u of this._spanProcessors)i.push(u.forceFlush());return new Promise(u=>{Promise.all(i).then(()=>{u()}).catch(a=>{r.globalErrorHandler(a||new Error("MultiSpanProcessor: forceFlush failed")),u()})})}onStart(i,u){for(let a of this._spanProcessors)a.onStart(i,u)}onEnd(i){for(let u of this._spanProcessors)u.onEnd(i)}shutdown(){let i=[];for(let u of this._spanProcessors)i.push(u.shutdown());return new Promise((u,a)=>{Promise.all(i).then(()=>{u()},a)})}};e.MultiSpanProcessor=t}),Wc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0;var r=class{onStart(t,i){}onEnd(t){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};e.NoopSpanProcessor=r}),Th=N((e,r)=>{var t=200,i="__lodash_hash_undefined__",u=800,a=16,o=9007199254740991,n="[object Arguments]",s="[object Array]",l="[object AsyncFunction]",f="[object Boolean]",c="[object Date]",p="[object Error]",v="[object Function]",m="[object GeneratorFunction]",g="[object Map]",E="[object Number]",T="[object Null]",P="[object Object]",O="[object Proxy]",A="[object RegExp]",M="[object Set]",j="[object String]",G="[object Undefined]",B="[object WeakMap]",Y="[object ArrayBuffer]",ne="[object DataView]",ye="[object Float32Array]",Re="[object Float64Array]",st="[object Int8Array]",ot="[object Int16Array]",Dt="[object Int32Array]",at="[object Uint8Array]",oe="[object Uint8ClampedArray]",ge="[object Uint16Array]",le="[object Uint32Array]",Ue=/[\\^$.*+?()[\]{}|]/g,X=/^\[object .+?Constructor\]$/,Ee=/^(?:0|[1-9]\d*)$/,se={};se[ye]=se[Re]=se[st]=se[ot]=se[Dt]=se[at]=se[oe]=se[ge]=se[le]=!0,se[n]=se[s]=se[Y]=se[f]=se[ne]=se[c]=se[p]=se[v]=se[g]=se[E]=se[P]=se[A]=se[M]=se[j]=se[B]=!1;var We=typeof global=="object"&&global&&global.Object===Object&&global,rt=typeof self=="object"&&self&&self.Object===Object&&self,$=We||rt||Function("return this")(),ee=typeof e=="object"&&e&&!e.nodeType&&e,re=ee&&typeof r=="object"&&r&&!r.nodeType&&r,ve=re&&re.exports===ee,Ve=ve&&We.process,Ae=function(){try{var D=re&&re.require&&re.require("util").types;return D||Ve&&Ve.binding&&Ve.binding("util")}catch{}}(),xe=Ae&&Ae.isTypedArray;function Qe(D,F,z){switch(z.length){case 0:return D.call(F);case 1:return D.call(F,z[0]);case 2:return D.call(F,z[0],z[1]);case 3:return D.call(F,z[0],z[1],z[2])}return D.apply(F,z)}function At(D,F){for(var z=-1,tt=Array(D);++z<D;)tt[z]=F(z);return tt}function gr(D){return function(F){return D(F)}}function dr(D,F){return D==null?void 0:D[F]}function ue(D,F){return function(z){return D(F(z))}}var _r=Array.prototype,tr=Function.prototype,zt=Object.prototype,Ut=$["__core-js_shared__"],or=tr.toString,rr=zt.hasOwnProperty,yr=function(){var D=/[^.]+$/.exec(Ut&&Ut.keys&&Ut.keys.IE_PROTO||"");return D?"Symbol(src)_1."+D:""}(),ie=zt.toString,K=or.call(Object),Ne=RegExp("^"+or.call(rr).replace(Ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Te=ve?$.Buffer:void 0,ht=$.Symbol,Ke=$.Uint8Array,He=Te?Te.allocUnsafe:void 0,$e=ue(Object.getPrototypeOf,Object),St=Object.create,Tt=zt.propertyIsEnumerable,Pe=_r.splice,Ye=ht?ht.toStringTag:void 0,ae=function(){try{var D=Pr(Object,"defineProperty");return D({},"",{}),D}catch{}}(),we=Te?Te.isBuffer:void 0,Le=Math.max,he=Date.now,ut=Pr($,"Map"),qt=Pr(Object,"create"),Ze=function(){function D(){}return function(F){if(!fe(F))return{};if(St)return St(F);D.prototype=F;var z=new D;return D.prototype=void 0,z}}();function $t(D){var F=-1,z=D==null?0:D.length;for(this.clear();++F<z;){var tt=D[F];this.set(tt[0],tt[1])}}function pr(){this.__data__=qt?qt(null):{},this.size=0}function Er(D){var F=this.has(D)&&delete this.__data__[D];return this.size-=F?1:0,F}function Me(D){var F=this.__data__;if(qt){var z=F[D];return z===i?void 0:z}return rr.call(F,D)?F[D]:void 0}function je(D){var F=this.__data__;return qt?F[D]!==void 0:rr.call(F,D)}function Se(D,F){var z=this.__data__;return this.size+=this.has(D)?0:1,z[D]=qt&&F===void 0?i:F,this}$t.prototype.clear=pr,$t.prototype.delete=Er,$t.prototype.get=Me,$t.prototype.has=je,$t.prototype.set=Se;function Z(D){var F=-1,z=D==null?0:D.length;for(this.clear();++F<z;){var tt=D[F];this.set(tt[0],tt[1])}}function et(){this.__data__=[],this.size=0}function ze(D){var F=this.__data__,z=Q(F,D);if(z<0)return!1;var tt=F.length-1;return z==tt?F.pop():Pe.call(F,z,1),--this.size,!0}function pe(D){var F=this.__data__,z=Q(F,D);return z<0?void 0:F[z][1]}function vt(D){return Q(this.__data__,D)>-1}function Et(D,F){var z=this.__data__,tt=Q(z,D);return tt<0?(++this.size,z.push([D,F])):z[tt][1]=F,this}Z.prototype.clear=et,Z.prototype.delete=ze,Z.prototype.get=pe,Z.prototype.has=vt,Z.prototype.set=Et;function Ot(D){var F=-1,z=D==null?0:D.length;for(this.clear();++F<z;){var tt=D[F];this.set(tt[0],tt[1])}}function Gt(){this.size=0,this.__data__={hash:new $t,map:new(ut||Z),string:new $t}}function Wt(D){var F=br(this,D).delete(D);return this.size-=F?1:0,F}function jt(D){return br(this,D).get(D)}function nt(D){return br(this,D).has(D)}function Ct(D,F){var z=br(this,D),tt=z.size;return z.set(D,F),this.size+=z.size==tt?0:1,this}Ot.prototype.clear=Gt,Ot.prototype.delete=Wt,Ot.prototype.get=jt,Ot.prototype.has=nt,Ot.prototype.set=Ct;function ct(D){var F=this.__data__=new Z(D);this.size=F.size}function mt(){this.__data__=new Z,this.size=0}function d(D){var F=this.__data__,z=F.delete(D);return this.size=F.size,z}function _(D){return this.__data__.get(D)}function S(D){return this.__data__.has(D)}function C(D,F){var z=this.__data__;if(z instanceof Z){var tt=z.__data__;if(!ut||tt.length<t-1)return tt.push([D,F]),this.size=++z.size,this;z=this.__data__=new Ot(tt)}return z.set(D,F),this.size=z.size,this}ct.prototype.clear=mt,ct.prototype.delete=d,ct.prototype.get=_,ct.prototype.has=S,ct.prototype.set=C;function R(D,F){var z=gt(D),tt=!z&&It(D),kt=!z&&!tt&&Je(D),Vt=!z&&!tt&&!kt&&pt(D),Xt=z||tt||kt||Vt,Lt=Xt?At(D.length,String):[],Qt=Lt.length;for(var Dr in D)(F||rr.call(D,Dr))&&!(Xt&&(Dr=="length"||kt&&(Dr=="offset"||Dr=="parent")||Vt&&(Dr=="buffer"||Dr=="byteLength"||Dr=="byteOffset")||jr(Dr,Qt)))&&Lt.push(Dr);return Lt}function k(D,F,z){(z!==void 0&&!Xe(D[F],z)||z===void 0&&!(F in D))&&te(D,F,z)}function L(D,F,z){var tt=D[F];(!(rr.call(D,F)&&Xe(tt,z))||z===void 0&&!(F in D))&&te(D,F,z)}function Q(D,F){for(var z=D.length;z--;)if(Xe(D[z][0],F))return z;return-1}function te(D,F,z){F=="__proto__"&&ae?ae(D,F,{configurable:!0,enumerable:!0,value:z,writable:!0}):D[F]=z}var Fe=Ar();function lt(D){return D==null?D===void 0?G:T:Ye&&Ye in Object(D)?Sr(D):Tr(D)}function qe(D){return Ce(D)&&lt(D)==n}function it(D){if(!fe(D)||Xr(D))return!1;var F=q(D)?Ne:X;return F.test(Oe(D))}function dt(D){return Ce(D)&&ce(D.length)&&!!se[lt(D)]}function bt(D){if(!fe(D))return Cr(D);var F=Gr(D),z=[];for(var tt in D)tt=="constructor"&&(F||!rr.call(D,tt))||z.push(tt);return z}function Ft(D,F,z,tt,kt){D!==F&&Fe(F,function(Vt,Xt){if(kt||(kt=new ct),fe(Vt))kr(D,F,Xt,z,Ft,tt,kt);else{var Lt=tt?tt(H(D,Xt),Vt,Xt+"",D,F,kt):void 0;Lt===void 0&&(Lt=Vt),k(D,Xt,Lt)}},Zt)}function kr(D,F,z,tt,kt,Vt,Xt){var Lt=H(D,z),Qt=H(F,z),Dr=Xt.get(Qt);if(Dr){k(D,z,Dr);return}var Ir=Vt?Vt(Lt,Qt,z+"",D,F,Xt):void 0,En=Ir===void 0;if(En){var Cn=gt(Qt),Wn=!Cn&&Je(Qt),bi=!Cn&&!Wn&&pt(Qt);Ir=Qt,Cn||Wn||bi?gt(Lt)?Ir=Lt:wt(Lt)?Ir=nr(Lt):Wn?(En=!1,Ir=Hr(Qt,!0)):bi?(En=!1,Ir=$r(Qt,!0)):Ir=[]:ft(Qt)||It(Qt)?(Ir=Lt,It(Lt)?Ir=Kt(Lt):(!fe(Lt)||q(Lt))&&(Ir=Br(Qt))):En=!1}En&&(Xt.set(Qt,Ir),kt(Ir,Qt,tt,Vt,Xt),Xt.delete(Qt)),k(D,z,Ir)}function cr(D,F){return me(Qr(D,F,nn),D+"")}var hr=ae?function(D,F){return ae(D,"toString",{configurable:!0,enumerable:!1,value:Rr(F),writable:!0})}:nn;function Hr(D,F){if(F)return D.slice();var z=D.length,tt=He?He(z):new D.constructor(z);return D.copy(tt),tt}function Lr(D){var F=new D.constructor(D.byteLength);return new Ke(F).set(new Ke(D)),F}function $r(D,F){var z=F?Lr(D.buffer):D.buffer;return new D.constructor(z,D.byteOffset,D.length)}function nr(D,F){var z=-1,tt=D.length;for(F||(F=Array(tt));++z<tt;)F[z]=D[z];return F}function wr(D,F,z,tt){var kt=!z;z||(z={});for(var Vt=-1,Xt=F.length;++Vt<Xt;){var Lt=F[Vt],Qt=tt?tt(z[Lt],D[Lt],Lt,z,D):void 0;Qt===void 0&&(Qt=D[Lt]),kt?te(z,Lt,Qt):L(z,Lt,Qt)}return z}function qr(D){return cr(function(F,z){var tt=-1,kt=z.length,Vt=kt>1?z[kt-1]:void 0,Xt=kt>2?z[2]:void 0;for(Vt=D.length>3&&typeof Vt=="function"?(kt--,Vt):void 0,Xt&&Kr(z[0],z[1],Xt)&&(Vt=kt<3?void 0:Vt,kt=1),F=Object(F);++tt<kt;){var Lt=z[tt];Lt&&D(F,Lt,tt,Vt)}return F})}function Ar(D){return function(F,z,tt){for(var kt=-1,Vt=Object(F),Xt=tt(F),Lt=Xt.length;Lt--;){var Qt=Xt[D?Lt:++kt];if(z(Vt[Qt],Qt,Vt)===!1)break}return F}}function br(D,F){var z=D.__data__;return Or(F)?z[typeof F=="string"?"string":"hash"]:z.map}function Pr(D,F){var z=dr(D,F);return it(z)?z:void 0}function Sr(D){var F=rr.call(D,Ye),z=D[Ye];try{D[Ye]=void 0;var tt=!0}catch{}var kt=ie.call(D);return tt&&(F?D[Ye]=z:delete D[Ye]),kt}function Br(D){return typeof D.constructor=="function"&&!Gr(D)?Ze($e(D)):{}}function jr(D,F){var z=typeof D;return F=F??o,!!F&&(z=="number"||z!="symbol"&&Ee.test(D))&&D>-1&&D%1==0&&D<F}function Kr(D,F,z){if(!fe(z))return!1;var tt=typeof F;return(tt=="number"?Pt(z)&&jr(F,z.length):tt=="string"&&F in z)?Xe(z[F],D):!1}function Or(D){var F=typeof D;return F=="string"||F=="number"||F=="symbol"||F=="boolean"?D!=="__proto__":D===null}function Xr(D){return!!yr&&yr in D}function Gr(D){var F=D&&D.constructor,z=typeof F=="function"&&F.prototype||zt;return D===z}function Cr(D){var F=[];if(D!=null)for(var z in Object(D))F.push(z);return F}function Tr(D){return ie.call(D)}function Qr(D,F,z){return F=Le(F===void 0?D.length-1:F,0),function(){for(var tt=arguments,kt=-1,Vt=Le(tt.length-F,0),Xt=Array(Vt);++kt<Vt;)Xt[kt]=tt[F+kt];kt=-1;for(var Lt=Array(F+1);++kt<F;)Lt[kt]=tt[kt];return Lt[F]=z(Xt),Qe(D,this,Lt)}}function H(D,F){if(!(F==="constructor"&&typeof D[F]=="function")&&F!="__proto__")return D[F]}var me=_e(hr);function _e(D){var F=0,z=0;return function(){var tt=he(),kt=a-(tt-z);if(z=tt,kt>0){if(++F>=u)return arguments[0]}else F=0;return D.apply(void 0,arguments)}}function Oe(D){if(D!=null){try{return or.call(D)}catch{}try{return D+""}catch{}}return""}function Xe(D,F){return D===F||D!==D&&F!==F}var It=qe(function(){return arguments}())?qe:function(D){return Ce(D)&&rr.call(D,"callee")&&!Tt.call(D,"callee")},gt=Array.isArray;function Pt(D){return D!=null&&ce(D.length)&&!q(D)}function wt(D){return Ce(D)&&Pt(D)}var Je=we||zn;function q(D){if(!fe(D))return!1;var F=lt(D);return F==v||F==m||F==l||F==O}function ce(D){return typeof D=="number"&&D>-1&&D%1==0&&D<=o}function fe(D){var F=typeof D;return D!=null&&(F=="object"||F=="function")}function Ce(D){return D!=null&&typeof D=="object"}function ft(D){if(!Ce(D)||lt(D)!=P)return!1;var F=$e(D);if(F===null)return!0;var z=rr.call(F,"constructor")&&F.constructor;return typeof z=="function"&&z instanceof z&&or.call(z)==K}var pt=xe?gr(xe):dt;function Kt(D){return wr(D,Zt(D))}function Zt(D){return Pt(D)?R(D,!0):bt(D)}var vr=qr(function(D,F,z){Ft(D,F,z)});function Rr(D){return function(){return D}}function nn(D){return D}function zn(){return!1}r.exports=vr}),Ih=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var r=Jt(),t=Vr(),i=class{constructor(u,a){this._exporter=u,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let o=t.getEnv();this._maxExportBatchSize=typeof(a==null?void 0:a.maxExportBatchSize)=="number"?a.maxExportBatchSize:o.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(a==null?void 0:a.maxQueueSize)=="number"?a.maxQueueSize:o.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(a==null?void 0:a.scheduledDelayMillis)=="number"?a.scheduledDelayMillis:o.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(a==null?void 0:a.exportTimeoutMillis)=="number"?a.exportTimeoutMillis:o.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(u){}onEnd(u){this._isShutdown||this._addToBuffer(u)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((u,a)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(u).catch(o=>{a(o)})}),this._shuttingDownPromise)}_addToBuffer(u){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(u),this._maybeStartTimer())}_flushAll(){return new Promise((u,a)=>{let o=[],n=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let s=0,l=n;s<l;s++)o.push(this._flushOneBatch());Promise.all(o).then(()=>{u()}).catch(a)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((u,a)=>{let o=setTimeout(()=>{a(new Error("Timeout"))},this._exportTimeoutMillis);r.context.with(t.suppressTracing(r.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),n=>{var s;clearTimeout(o),n.code===t.ExportResultCode.SUCCESS?u():a((s=n.error)!==null&&s!==void 0?s:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(u=>{t.globalErrorHandler(u)})},this._scheduledDelayMillis),t.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};e.BatchSpanProcessorBase=i}),wh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var r=Ih(),t=class extends r.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=t}),Ah=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(wh(),e)}),$c=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Ah(),e)}),Ph=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var r=Jt(),t=Vr(),i=ya(),u=Kc(),a=Gc(),o=Sh(),n=Wc(),s=Th(),l=$c(),f;(function(p){p[p.resolved=0]="resolved",p[p.timeout=1]="timeout",p[p.error=2]="error",p[p.unresolved=3]="unresolved"})(f=e.ForceFlushState||(e.ForceFlushState={}));var c=class{constructor(p={}){var v;this._registeredSpanProcessors=[],this._tracers=new Map;let m=s({},a.DEFAULT_CONFIG,p);this.resource=(v=m.resource)!==null&&v!==void 0?v:i.Resource.empty(),this.resource=i.Resource.default().merge(this.resource),this._config=Object.assign({},m,{resource:this.resource});let g=this._buildExporterFromEnv();if(g!==void 0){let E=new l.BatchSpanProcessor(g);this.activeSpanProcessor=E}else this.activeSpanProcessor=new n.NoopSpanProcessor}getTracer(p,v){let m=`${p}@${v||""}`;return this._tracers.has(m)||this._tracers.set(m,new u.Tracer({name:p,version:v},this._config,this)),this._tracers.get(m)}addSpanProcessor(p){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(v=>r.diag.error("Error while trying to shutdown current span processor",v)),this._registeredSpanProcessors.push(p),this.activeSpanProcessor=new o.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(p={}){r.trace.setGlobalTracerProvider(this),p.propagator===void 0&&(p.propagator=this._buildPropagatorFromEnv()),p.contextManager&&r.context.setGlobalContextManager(p.contextManager),p.propagator&&r.propagation.setGlobalPropagator(p.propagator)}forceFlush(){let p=this._config.forceFlushTimeoutMillis,v=this._registeredSpanProcessors.map(m=>new Promise(g=>{let E,T=setTimeout(()=>{g(new Error(`Span processor did not completed within timeout period of ${p} ms`)),E=f.timeout},p);m.forceFlush().then(()=>{clearTimeout(T),E!==f.timeout&&(E=f.resolved,g(E))}).catch(P=>{clearTimeout(T),E=f.error,g(P)})}));return new Promise((m,g)=>{Promise.all(v).then(E=>{let T=E.filter(P=>P!==f.resolved);T.length>0?g(T):m()}).catch(E=>g([E]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(p){var v;return(v=c._registeredPropagators.get(p))===null||v===void 0?void 0:v()}_getSpanExporter(p){var v;return(v=c._registeredExporters.get(p))===null||v===void 0?void 0:v()}_buildPropagatorFromEnv(){let p=Array.from(new Set(t.getEnv().OTEL_PROPAGATORS)),v=p.map(m=>{let g=this._getPropagator(m);return g||r.diag.warn(`Propagator "${m}" requested through environment variable is unavailable.`),g}).reduce((m,g)=>(g&&m.push(g),m),[]);if(v.length!==0)return p.length===1?v[0]:new t.CompositePropagator({propagators:v})}_buildExporterFromEnv(){let p=t.getEnv().OTEL_TRACES_EXPORTER;if(p==="none")return;let v=this._getSpanExporter(p);return v||r.diag.error(`Exporter "${p}" requested through environment variable is unavailable.`),v}};e.BasicTracerProvider=c,c._registeredPropagators=new Map([["tracecontext",()=>new t.HttpTraceContextPropagator],["baggage",()=>new t.HttpBaggagePropagator]]),c._registeredExporters=new Map}),Oh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var r=Vr(),t=class{export(i,u){return this._sendSpans(i,u)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(i){return{traceId:i.spanContext().traceId,parentId:i.parentSpanId,name:i.name,id:i.spanContext().spanId,kind:i.kind,timestamp:r.hrTimeToMicroseconds(i.startTime),duration:r.hrTimeToMicroseconds(i.duration),attributes:i.attributes,status:i.status,events:i.events}}_sendSpans(i,u){for(let a of i)console.log(this._exportInfo(a));if(u)return u({code:r.ExportResultCode.SUCCESS})}};e.ConsoleSpanExporter=t}),Ch=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var r=Vr(),t=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(i,u){if(this._stopped)return u({code:r.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...i),setTimeout(()=>u({code:r.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};e.InMemorySpanExporter=t}),Rh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Dh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var r=Jt(),t=Vr(),i=class{constructor(u){this._exporter=u,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(u){}onEnd(u){this._isShutdown||r.context.with(t.suppressTracing(r.context.active()),()=>{this._exporter.export([u],a=>{var o;a.code!==t.ExportResultCode.SUCCESS&&t.globalErrorHandler((o=a.error)!==null&&o!==void 0?o:new Error(`SimpleSpanProcessor: span export failed (status ${a})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((u,a)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(u).catch(o=>{a(o)})}),this._shuttingDownPromise)}};e.SimpleSpanProcessor=i}),Nh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),xh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Mh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),kh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Kc=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(ph(),e),t(Ph(),e),t($c(),e),t(Oh(),e),t(Ch(),e),t(Rh(),e),t(Dh(),e),t(Nh(),e),t(Wc(),e),t(Bc(),e),t(xh(),e),t(Mh(),e),t(kh(),e)}),Lh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var r=ur();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var t=!1,i=function(a){if(t)return a;try{var o=Kc(),n=Jt(),s=new o.BasicTracerProvider,l=s.getTracer("applicationinsights tracer"),f=a.setTracer;a.setTracer=function(c){var p=c.startSpan;c.startSpan=function(v,m,g){var E=p.call(this,v,m,g),T=E.end;return E.end=function(){var P=T.apply(this,arguments);return r.channel.publish("azure-coretracing",E),P},E},c[e.AzureMonitorSymbol]=!0,f.call(this,c)},n.trace.getSpan(n.context.active()),a.setTracer(l),t=!0}catch{}return a};e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:i};function u(){r.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}e.enable=u}),jh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var r=ur(),t=function(u){var a=u.prototype._emit;return u.prototype._emit=function(o,n){var s=a.apply(this,arguments);if(!n){var l=s;l||(l=a.call(this,o,!0)),r.channel.publish("bunyan",{level:o.level,result:l})}return s},u};e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:t};function i(){r.channel.registerMonkeyPatch("bunyan",e.bunyan)}e.enable=i}),Fh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var r=ur(),t=require("stream"),i=function(a){var o=new t.Writable,n=new t.Writable;o.write=function(m){if(!m)return!0;var g=m.toString();return r.channel.publish("console",{message:g}),!0},n.write=function(m){if(!m)return!0;var g=m.toString();return r.channel.publish("console",{message:g,stderr:!0}),!0};for(var s=new a.Console(o,n),l=["log","info","warn","error","dir","time","timeEnd","trace","assert"],f=function(m){var g=a[m];g&&(a[m]=function(){if(s[m])try{s[m].apply(s,arguments)}catch{}return g.apply(a,arguments)})},c=0,p=l;c<p.length;c++){var v=p[c];f(v)}return a};e.console={versionSpecifier:">= 4.0.0",patch:i};function u(){r.channel.registerMonkeyPatch("console",e.console),require("console")}e.enable=u}),Uh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var r=ur(),t=function(u){var a=u.Server.prototype.connect;return u.Server.prototype.connect=function(){var o=a.apply(this,arguments),n=this.s.pool.write;this.s.pool.write=function(){var l=typeof arguments[1]=="function"?1:2;return typeof arguments[l]=="function"&&(arguments[l]=r.channel.bindToContext(arguments[l])),n.apply(this,arguments)};var s=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=r.channel.bindToContext(arguments[1])),s.apply(this,arguments)},o},u};e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:t};function i(){r.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}e.enable=i}),Hh=N(e=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(s){for(var l,f=1,c=arguments.length;f<c;f++){l=arguments[f];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(s[p]=l[p])}return s},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var t=ur(),i=function(s){var l=s.instrument({operationIdGenerator:{next:function(){return t.channel.bindToContext(function(c){return c()})}}}),f={};return l.on("started",function(c){f[c.requestId]||(f[c.requestId]=r(r({},c),{time:new Date}))}),l.on("succeeded",function(c){var p=f[c.requestId];p&&delete f[c.requestId],typeof c.operationId=="function"?c.operationId(function(){return t.channel.publish("mongodb",{startedData:p,event:c,succeeded:!0})}):t.channel.publish("mongodb",{startedData:p,event:c,succeeded:!0})}),l.on("failed",function(c){var p=f[c.requestId];p&&delete f[c.requestId],typeof c.operationId=="function"?c.operationId(function(){return t.channel.publish("mongodb",{startedData:p,event:c,succeeded:!1})}):t.channel.publish("mongodb",{startedData:p,event:c,succeeded:!1})}),s},u=function(s){var l=s.instrument(),f={},c={};return l.on("started",function(p){f[p.requestId]||(c[p.requestId]=t.channel.bindToContext(function(v){return v()}),f[p.requestId]=r(r({},p),{time:new Date}))}),l.on("succeeded",function(p){var v=f[p.requestId];v&&delete f[p.requestId],typeof p=="object"&&typeof c[p.requestId]=="function"&&(c[p.requestId](function(){return t.channel.publish("mongodb",{startedData:v,event:p,succeeded:!0})}),delete c[p.requestId])}),l.on("failed",function(p){var v=f[p.requestId];v&&delete f[p.requestId],typeof p=="object"&&typeof c[p.requestId]=="function"&&(c[p.requestId](function(){return t.channel.publish("mongodb",{startedData:v,event:p,succeeded:!1})}),delete c[p.requestId])}),s},a=function(s){var l=s.Server.prototype.connect;return s.Server.prototype.connect=function(){var f=l.apply(this,arguments),c=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var v=typeof arguments[1]=="function"?1:2;return typeof arguments[v]=="function"&&(arguments[v]=t.channel.bindToContext(arguments[v])),c.apply(this,arguments)};var p=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=t.channel.bindToContext(arguments[1])),p.apply(this,arguments)},f},s},o=function(s){a(s);var l=s.instrument(),f={},c={};return l.on("started",function(p){f[p.requestId]||(c[p.requestId]=t.channel.bindToContext(function(v){return v()}),f[p.requestId]=p)}),l.on("succeeded",function(p){var v=f[p.requestId];v&&delete f[p.requestId],typeof p=="object"&&typeof c[p.requestId]=="function"&&(c[p.requestId](function(){return t.channel.publish("mongodb",{startedData:v,event:p,succeeded:!0})}),delete c[p.requestId])}),l.on("failed",function(p){var v=f[p.requestId];v&&delete f[p.requestId],typeof p=="object"&&typeof c[p.requestId]=="function"&&(c[p.requestId](function(){return t.channel.publish("mongodb",{startedData:v,event:p,succeeded:!1})}),delete c[p.requestId])}),s};e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:i},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:u},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:o};function n(){t.channel.registerMonkeyPatch("mongodb",e.mongo2),t.channel.registerMonkeyPatch("mongodb",e.mongo3),t.channel.registerMonkeyPatch("mongodb",e.mongo330)}e.enable=n}),qh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var r=ur(),t=require("path"),i=function(a,o){var n=function(v,m){return function(g,E){var T=v[g];T&&(v[g]=function(){for(var P=arguments.length-1,O=arguments.length-1;O>=0;--O)if(typeof arguments[O]=="function"){P=O;break}else if(typeof arguments[O]<"u")break;var A=arguments[P],M={result:null,startTime:null,startDate:null};typeof A=="function"&&(E?(M.startTime=process.hrtime(),M.startDate=new Date,arguments[P]=r.channel.bindToContext(E(M,A))):arguments[P]=r.channel.bindToContext(A));var j=T.apply(this,arguments);return M.result=j,j})}},s=function(v,m){return n(v.prototype,m+".prototype")},l=["connect","changeUser","ping","statistics","end"],f=require(t.dirname(o)+"/lib/Connection");l.forEach(function(v){return s(f,"Connection")(v)}),n(f,"Connection")("createQuery",function(v,m){return function(g){var E=process.hrtime(v.startTime),T=E[0]*1e3+E[1]/1e6|0;r.channel.publish("mysql",{query:v.result,callbackArgs:arguments,err:g,duration:T,time:v.startDate}),m.apply(this,arguments)}});var c=["_enqueueCallback"],p=require(t.dirname(o)+"/lib/Pool");return c.forEach(function(v){return s(p,"Pool")(v)}),a};e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:i};function u(){r.channel.registerMonkeyPatch("mysql",e.mysql)}e.enable=u}),Bh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var r=ur();function t(u){var a=u.prototype.connect;return u.prototype.connect=function(o){return o&&(arguments[0]=r.channel.bindToContext(o)),a.apply(this,arguments)},u}e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:t};function i(){r.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}e.enable=i}),Gh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var r=ur(),t=require("events");function i(o,n){var s=o.Client.prototype.query,l="__diagnosticOriginalFunc";return o.Client.prototype.query=function(f,c,p){var v={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},m=process.hrtime(),g;function E(T){T&&T[l]&&(T=T[l]);var P=r.channel.bindToContext(function(O,A){var M=process.hrtime(m);if(v.result=A&&{rowCount:A.rowCount,command:A.command},v.error=O,v.duration=Math.ceil(M[0]*1e3+M[1]/1e6),r.channel.publish("postgres",v),O){if(T)return T.apply(this,arguments);g&&g instanceof t.EventEmitter&&g.emit("error",O)}else T&&T.apply(this,arguments)});try{return Object.defineProperty(P,l,{value:T}),P}catch{return T}}try{typeof f=="string"?c instanceof Array?(v.query.preparable={text:f,args:c},p=E(p)):(v.query.text=f,p?p=E(p):c=E(c)):(typeof f.name=="string"?v.query.plan=f.name:f.values instanceof Array?v.query.preparable={text:f.text,args:f.values}:v.query.text=f.text,p?p=E(p):c?c=E(c):f.callback=E(f.callback))}catch{return s.apply(this,arguments)}return arguments[0]=f,arguments[1]=c,arguments[2]=p,arguments.length=arguments.length>3?arguments.length:3,g=s.apply(this,arguments),g},o}function u(o,n){var s=o.Client.prototype.query,l="__diagnosticOriginalFunc";return o.Client.prototype.query=function(f,c,p){var v=this,m=!!p,g={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},E=process.hrtime(),T;function P(O){O&&O[l]&&(O=O[l]);var A=r.channel.bindToContext(function(M,j){var G=process.hrtime(E);if(g.result=j&&{rowCount:j.rowCount,command:j.command},g.error=M,g.duration=Math.ceil(G[0]*1e3+G[1]/1e6),r.channel.publish("postgres",g),M){if(O)return O.apply(this,arguments);T&&T instanceof t.EventEmitter&&T.emit("error",M)}else O&&O.apply(this,arguments)});try{return Object.defineProperty(A,l,{value:O}),A}catch{return O}}try{typeof f=="string"?c instanceof Array?(g.query.preparable={text:f,args:c},m=typeof p=="function",p=m?P(p):p):(g.query.text=f,p?(m=typeof p=="function",p=m?P(p):p):(m=typeof c=="function",c=m?P(c):c)):(typeof f.name=="string"?g.query.plan=f.name:f.values instanceof Array?g.query.preparable={text:f.text,args:f.values}:g.query.text=f.text,p?(m=typeof p=="function",p=P(p)):c?(m=typeof c=="function",c=m?P(c):c):(m=typeof f.callback=="function",f.callback=m?P(f.callback):f.callback))}catch{return s.apply(this,arguments)}return arguments[0]=f,arguments[1]=c,arguments[2]=p,arguments.length=arguments.length>3?arguments.length:3,T=s.apply(this,arguments),m?T:T.then(function(O){return P()(void 0,O),new v._Promise(function(A,M){A(O)})}).catch(function(O){return P()(O,void 0),new v._Promise(function(A,M){M(O)})})},o}e.postgres6={versionSpecifier:"6.*",patch:i},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:u};function a(){r.channel.registerMonkeyPatch("pg",e.postgres6),r.channel.registerMonkeyPatch("pg",e.postgres7)}e.enable=a}),Vh=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var r=ur(),t=function(u){var a=u.RedisClient.prototype.internal_send_command;return u.RedisClient.prototype.internal_send_command=function(o){if(o){var n=o.callback;if(!n||!n.pubsubBound){var s=this.address,l=process.hrtime(),f=new Date;o.callback=r.channel.bindToContext(function(c,p){var v=process.hrtime(l),m=v[0]*1e3+v[1]/1e6|0;r.channel.publish("redis",{duration:m,address:s,commandObj:o,err:c,result:p,time:f}),typeof n=="function"&&n.apply(this,arguments)}),o.callback.pubsubBound=!0}}return a.call(this,o)},u};e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:t};function i(){r.channel.registerMonkeyPatch("redis",e.redis)}e.enable=i}),zh=N(e=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(a){for(var o,n=1,s=arguments.length;n<s;n++){o=arguments[n];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var t=ur(),i=function(a){var o=a.Connection.prototype.makeRequest;return a.Connection.prototype.makeRequest=function(){function n(l){var f=process.hrtime(),c={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return t.channel.bindToContext(function(p,v,m){var g=process.hrtime(f);c=r(r({},c),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!p&&{rowCount:v,rows:m},query:{text:this.parametersByName.statement.value},error:p,duration:Math.ceil(g[0]*1e3+g[1]/1e6)}),t.channel.publish("tedious",c),l.call(this,p,v,m)})}var s=arguments[0];arguments[0].callback=n(s.callback),o.apply(this,arguments)},a};e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:i};function u(){t.channel.registerMonkeyPatch("tedious",e.tedious)}e.enable=u}),Wh=N(e=>{"use strict";var r=e&&e.__extends||function(){var n=function(s,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(f[p]=c[p])},n(s,l)};return function(s,l){n(s,l);function f(){this.constructor=s}s.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}}(),t=e&&e.__rest||function(n,s){var l={};for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&s.indexOf(f)<0&&(l[f]=n[f]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,f=Object.getOwnPropertySymbols(n);c<f.length;c++)s.indexOf(f[c])<0&&Object.prototype.propertyIsEnumerable.call(n,f[c])&&(l[f[c]]=n[f[c]]);return l};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var i=ur(),u=function(n){var s=n.Logger.prototype.log,l,f=function(c,p,v){var m;return l===n.config.npm.levels?m="npm":l===n.config.syslog.levels?m="syslog":m="unknown",i.channel.publish("winston",{level:c,message:p,meta:v,levelKind:m}),p};return n.Logger.prototype.log=function(){return l=this.levels,!this.filters||this.filters.length===0?this.filters=[f]:this.filters[this.filters.length-1]!==f&&(this.filters=this.filters.filter(function(c){return c!==f}),this.filters.push(f)),s.apply(this,arguments)},n},a=function(n){var s=function(v,m){var g;return v.config.npm.levels[m]!=null?g="npm":v.config.syslog.levels[m]!=null?g="syslog":g="unknown",g},l=function(v){r(m,v);function m(g,E){var T=v.call(this,E)||this;return T.winston=g,T}return m.prototype.log=function(g,E){var T=g.message,P=g.level,O=g.meta,A=t(g,["message","level","meta"]);P=typeof Symbol.for=="function"?g[Symbol.for("level")]:P,T=g instanceof Error?g:T;var M=s(this.winston,P);O=O||{};for(var j in A)A.hasOwnProperty(j)&&(O[j]=A[j]);i.channel.publish("winston",{message:T,level:P,levelKind:M,meta:O}),E()},m}(n.Transport);function f(){var v=arguments[0].levels||n.config.npm.levels,m;for(var g in v)v.hasOwnProperty(g)&&(m=m===void 0||v[g]>v[m]?g:m);this.add(new l(n,{level:m}))}var c=n.createLogger;n.createLogger=function(){var v=arguments[0].levels||n.config.npm.levels,m;for(var g in v)v.hasOwnProperty(g)&&(m=m===void 0||v[g]>v[m]?g:m);var E=c.apply(this,arguments);E.add(new l(n,{level:m}));var T=E.configure;return E.configure=function(){T.apply(this,arguments),f.apply(this,arguments)},E};var p=n.configure;return n.configure=function(){p.apply(this,arguments),f.apply(this,arguments)},n.add(new l(n)),n};e.winston3={versionSpecifier:"3.x",patch:a},e.winston2={versionSpecifier:"2.x",patch:u};function o(){i.channel.registerMonkeyPatch("winston",e.winston2),i.channel.registerMonkeyPatch("winston",e.winston3)}e.enable=o}),$h=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var r=Lh();e.azuresdk=r;var t=jh();e.bunyan=t;var i=Fh();e.console=i;var u=Uh();e.mongodbCore=u;var a=Hh();e.mongodb=a;var o=qh();e.mysql=o;var n=Bh();e.pgPool=n;var s=Gh();e.pg=s;var l=Vh();e.redis=l;var f=zh();e.tedious=f;var c=Wh();e.winston=c;function p(){t.enable(),i.enable(),u.enable(),a.enable(),o.enable(),s.enable(),n.enable(),l.enable(),c.enable(),r.enable(),f.enable()}e.enable=p}),Ea=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var r=bc(),t=mr();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var i="DiagnosticChannel";if(e.IsInitialized){u=$h(),a=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",o=a.split(","),n={bunyan:u.bunyan,console:u.console,mongodb:u.mongodb,mongodbCore:u.mongodbCore,mysql:u.mysql,redis:u.redis,pg:u.pg,pgPool:u.pgPool,winston:u.winston,azuresdk:u.azuresdk};for(s in n)o.indexOf(s)===-1&&(n[s].enable(),t.info(i,"Subscribed to "+s+" events"));o.length>0&&t.info(i,"Some modules will not be patched",o)}else t.info(i,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var u,a,o,n,s;function l(f){if(e.IsInitialized){var c=ur();c.channel.addContextPreservation(f),c.channel.spanContextPropagator=r.AsyncScopeManager}}e.registerContextPreservation=l}),fi=N((e,r)=>{"use strict";r.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),Ur=N((e,r)=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(f){for(var c,p=1,v=arguments.length;p<v;p++){c=arguments[p];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(f[m]=c[m])}return f},t.apply(this,arguments)},i=require("http"),u=require("https"),a=require("url"),o=require("constants"),n=mr(),s=fi(),l=function(){function f(){}return f.getCookie=function(c,p){var v="";if(c&&c.length&&typeof p=="string")for(var m=c+"=",g=p.split(";"),E=0;E<g.length;E++){var p=g[E];if(p=f.trim(p),p&&p.indexOf(m)===0){v=p.substring(m.length,g[E].length);break}}return v},f.trim=function(c){return typeof c=="string"?c.replace(/^\s+|\s+$/g,""):""},f.int32ArrayToBase64=function(c){var p=function(T,P){return String.fromCharCode(T>>P&255)},v=function(T){return p(T,24)+p(T,16)+p(T,8)+p(T,0)},m=c.map(v).join(""),g=Buffer.from?Buffer.from(m,"binary"):new Buffer(m,"binary"),E=g.toString("base64");return E.substr(0,E.indexOf("="))},f.random32=function(){return 4294967296*Math.random()|0},f.randomu32=function(){return f.random32()+2147483648},f.w3cTraceId=function(){for(var c=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p="",v,m=0;m<4;m++)v=f.random32(),p+=c[v&15]+c[v>>4&15]+c[v>>8&15]+c[v>>12&15]+c[v>>16&15]+c[v>>20&15]+c[v>>24&15]+c[v>>28&15];var g=c[8+Math.random()*4|0];return p.substr(0,8)+p.substr(9,4)+"4"+p.substr(13,3)+g+p.substr(16,3)+p.substr(19,12)},f.w3cSpanId=function(){return f.w3cTraceId().substring(16)},f.isValidW3CId=function(c){return c.length===32&&c!=="00000000000000000000000000000000"},f.isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"},f.isError=function(c){return c instanceof Error},f.isPrimitive=function(c){var p=typeof c;return p==="string"||p==="number"||p==="boolean"},f.isDate=function(c){return Object.prototype.toString.call(c)==="[object Date]"},f.msToTimeSpan=function(c){(isNaN(c)||c<0)&&(c=0);var p=(c/1e3%60).toFixed(7).replace(/0{0,4}$/,""),v=""+Math.floor(c/(1e3*60))%60,m=""+Math.floor(c/(1e3*60*60))%24,g=Math.floor(c/(1e3*60*60*24));p=p.indexOf(".")<2?"0"+p:p,v=v.length<2?"0"+v:v,m=m.length<2?"0"+m:m;var E=g>0?g+".":"";return E+m+":"+v+":"+p},f.extractError=function(c){var p=c;return{message:c.message,code:p.code||p.id||""}},f.extractObject=function(c){return c instanceof Error?f.extractError(c):typeof c.toJSON=="function"?c.toJSON():c},f.validateStringMap=function(c){if(typeof c!="object"){n.info("Invalid properties dropped from payload");return}var p={};for(var v in c){var m="",g=c[v],E=typeof g;if(f.isPrimitive(g))m=g.toString();else if(g===null||E==="undefined")m="";else if(E==="function"){n.info("key: "+v+" was function; will not serialize");continue}else{var T=f.isArray(g)?g:f.extractObject(g);try{f.isPrimitive(T)?m=T:m=JSON.stringify(T)}catch(P){m=g.constructor.name.toString()+" (Error: "+P.message+")",n.info("key: "+v+", could not be serialized")}}p[v]=m.substring(0,f.MAX_PROPERTY_LENGTH)}return p},f.canIncludeCorrelationHeader=function(c,p){var v=c&&c.config&&c.config.correlationHeaderExcludedDomains;if(!v||v.length==0||!p)return!0;for(var m=0;m<v.length;m++){var g=new RegExp(v[m].replace(/\./g,".").replace(/\*/g,".*"));if(g.test(a.parse(p).hostname))return!1}return!0},f.getCorrelationContextTarget=function(c,p){var v=c.headers&&c.headers[s.requestContextHeader];if(v)for(var m=v.split(","),g=0;g<m.length;++g){var E=m[g].split("=");if(E.length==2&&E[0]==p)return E[1]}},f.makeRequest=function(c,p,v,m){p&&p.indexOf("//")===0&&(p="https:"+p);var g=a.parse(p),E=t(t({},v),{host:g.hostname,port:g.port,path:g.pathname}),T=void 0;if(g.protocol==="https:"&&(T=c.proxyHttpsUrl||void 0),g.protocol==="http:"&&(T=c.proxyHttpUrl||void 0),T){T.indexOf("//")===0&&(T="http:"+T);var P=a.parse(T);P.protocol==="https:"?(n.info("Proxies that use HTTPS are not supported"),T=void 0):E=t(t({},E),{host:P.hostname,port:P.port||"80",path:p,headers:t(t({},E.headers),{Host:g.hostname})})}var O=g.protocol==="https:"&&!T;return O&&c.httpsAgent!==void 0?E.agent=c.httpsAgent:!O&&c.httpAgent!==void 0?E.agent=c.httpAgent:O&&(E.agent=f.tlsRestrictedAgent),O?u.request(E,m):i.request(E,m)},f.safeIncludeCorrelationHeader=function(c,p,v){var m;if(typeof v=="string")m=v;else if(v instanceof Array)m=v.join(",");else if(v&&typeof v.toString=="function")try{m=v.toString()}catch(g){n.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",g,v)}m?f.addCorrelationIdHeaderFromString(c,p,m):p.setHeader(s.requestContextHeader,s.requestContextSourceKey+"="+c.config.correlationId)},f.dumpObj=function(c){var p=Object.prototype.toString.call(c),v="";return p==="[object Error]"?v="{ stack: '"+c.stack+"', message: '"+c.message+"', name: '"+c.name+"'":v=JSON.stringify(c),p+v},f.addCorrelationIdHeaderFromString=function(c,p,v){var m=v.split(","),g=s.requestContextSourceKey+"=",E=m.some(function(T){return T.substring(0,g.length)===g});E||p.setHeader(s.requestContextHeader,v+","+s.requestContextSourceKey+"="+c.config.correlationId)},f.MAX_PROPERTY_LENGTH=8192,f.tlsRestrictedAgent=new u.Agent({keepAlive:!0,maxSockets:25,secureOptions:o.SSL_OP_NO_SSLv2|o.SSL_OP_NO_SSLv3|o.SSL_OP_NO_TLSv1|o.SSL_OP_NO_TLSv1_1}),f}();r.exports=l}),Un=N((e,r)=>{"use strict";var t=Ur(),i=mr(),u=function(){function a(){}return a.queryCorrelationId=function(o,n){var s=o.profileQueryEndpoint+"/api/profiles/"+o.instrumentationKey+"/appId";if(a.completedLookups.hasOwnProperty(s)){n(a.completedLookups[s]);return}else if(a.pendingLookups[s]){a.pendingLookups[s].push(n);return}a.pendingLookups[s]=[n];var l=function(){if(a.pendingLookups[s]){var f={method:"GET",disableAppInsightsAutoCollection:!0};i.info(a.TAG,f);var c=t.makeRequest(o,s,f,function(p){if(p.statusCode===200){var v="";p.setEncoding("utf-8"),p.on("data",function(m){v+=m}),p.on("end",function(){i.info(a.TAG,v);var m=a.correlationIdPrefix+v;a.completedLookups[s]=m,a.pendingLookups[s]&&a.pendingLookups[s].forEach(function(g){return g(m)}),delete a.pendingLookups[s]})}else p.statusCode>=400&&p.statusCode<500?(a.completedLookups[s]=void 0,delete a.pendingLookups[s]):setTimeout(l,o.correlationIdRetryIntervalMs)});c&&(c.on("error",function(p){i.warn(a.TAG,p)}),c.end())}};setTimeout(l,0)},a.cancelCorrelationIdQuery=function(o,n){var s=o.profileQueryEndpoint+"/api/profiles/"+o.instrumentationKey+"/appId",l=a.pendingLookups[s];l&&(a.pendingLookups[s]=l.filter(function(f){return f!=n}),a.pendingLookups[s].length==0&&delete a.pendingLookups[s])},a.generateRequestId=function(o){if(o){o=o[0]=="|"?o:"|"+o,o[o.length-1]!=="."&&(o+=".");var n=(a.currentRootId++).toString(16);return a.appendSuffix(o,n,"_")}else return a.generateRootId()},a.getRootId=function(o){var n=o.indexOf(".");n<0&&(n=o.length);var s=o[0]==="|"?1:0;return o.substring(s,n)},a.generateRootId=function(){return"|"+t.w3cTraceId()+"."},a.appendSuffix=function(o,n,s){if(o.length+n.length<a.requestIdMaxLength)return o+n+s;var l=a.requestIdMaxLength-9;if(o.length>l)for(;l>1;--l){var f=o[l-1];if(f==="."||f==="_")break}if(l<=1)return a.generateRootId();for(n=t.randomu32().toString(16);n.length<8;)n="0"+n;return o.substring(0,l)+n+"#"},a.TAG="CorrelationIdManager",a.correlationIdPrefix="cid-v1:",a.w3cEnabled=!0,a.pendingLookups={},a.completedLookups={},a.requestIdMaxLength=1024,a.currentRootId=t.randomu32(),a}();r.exports=u}),Ki=N((e,r)=>{"use strict";var t=Ur(),i=Un(),u=function(){function a(o,n){if(this.traceFlag=a.DEFAULT_TRACE_FLAG,this.version=a.DEFAULT_VERSION,o&&typeof o=="string")if(o.split(",").length>1)this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16);else{var s=o.trim().split("-"),l=s.length;l>=4?(this.version=s[0],this.traceId=s[1],this.spanId=s[2],this.traceFlag=s[3]):(this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=a.DEFAULT_VERSION,this.traceId=t.w3cTraceId()),this.version==="00"&&l!==4&&(this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=a.DEFAULT_VERSION,this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=a.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=a.DEFAULT_TRACE_FLAG,this.traceId=t.w3cTraceId()),a.isValidTraceId(this.traceId)||(this.traceId=t.w3cTraceId()),a.isValidSpanId(this.spanId)||(this.spanId=t.w3cTraceId().substr(0,16),this.traceId=t.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(n){this.parentId=n.slice();var f=i.getRootId(n);a.isValidTraceId(f)||(this.legacyRootId=f,f=t.w3cTraceId()),n.indexOf("|")!==-1&&(n=n.substring(1+n.substring(0,n.length-1).lastIndexOf("."),n.length-1)),this.traceId=f,this.spanId=n}else this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)}return a.isValidTraceId=function(o){return o.match(/^[0-9a-f]{32}$/)&&o!=="00000000000000000000000000000000"},a.isValidSpanId=function(o){return o.match(/^[0-9a-f]{16}$/)&&o!=="0000000000000000"},a.formatOpenTelemetryTraceFlags=function(o){var n="0"+o.toString(16);return n.substring(n.length-2)},a.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},a.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},a.prototype.updateSpanId=function(){this.spanId=t.w3cTraceId().substr(0,16)},a.DEFAULT_TRACE_FLAG="01",a.DEFAULT_VERSION="00",a}();r.exports=u}),Xc=N((e,r)=>{"use strict";var t=function(){function i(u){this.fieldmap=[],u&&(this.fieldmap=this.parseHeader(u))}return i.prototype.toString=function(){var u=this.fieldmap;return!u||u.length==0?null:u.join(", ")},i.validateKeyChars=function(u){var a=u.split("@");if(a.length==2){var o=a[0].trim(),n=a[1].trim(),s=Boolean(o.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),l=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return s&&l}else if(a.length==1)return Boolean(u.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},i.prototype.parseHeader=function(u){var a=[],o={},n=u.split(",");if(n.length>32)return null;for(var s=0,l=n;s<l.length;s++){var f=l[s],c=f.trim();if(c.length!==0){var p=c.split("=");if(p.length!==2||!i.validateKeyChars(p[0])||o[p[0]])return null;o[p[0]]=!0,a.push(c)}}return a},i.strict=!0,i}();r.exports=t}),dn=N((e,r)=>{"use strict";var t=function(){function i(){}return i}();r.exports=t}),Kh=N((e,r)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,n)};return function(o,n){a(o,n);function s(){this.constructor=o}o.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),i=dn(),u=function(a){t(o,a);function o(){var n=a.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return o}(i);r.exports=u}),Qc=N((e,r)=>{"use strict";var t=function(){function i(){}return i}();r.exports=t}),Xh=N((e,r)=>{"use strict";var t=function(){function i(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return i}();r.exports=t}),Qh=N((e,r)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,n)};return function(o,n){a(o,n);function s(){this.constructor=o}o.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),i=Qc(),u=function(a){t(o,a);function o(){return a.call(this)||this}return o}(i);r.exports=u}),Yc=N((e,r)=>{"use strict";var t;(function(i){i[i.Measurement=0]="Measurement",i[i.Aggregation=1]="Aggregation"})(t||(t={})),r.exports=t}),Yh=N((e,r)=>{"use strict";var t=Yc(),i=function(){function u(){this.kind=t.Measurement}return u}();r.exports=i}),Zh=N((e,r)=>{"use strict";var t=function(){function i(){this.ver=1,this.sampleRate=100,this.tags={}}return i}();r.exports=t}),Zc=N((e,r)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,n)};return function(o,n){a(o,n);function s(){this.constructor=o}o.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),i=dn(),u=function(a){t(o,a);function o(){var n=a.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return o}(i);r.exports=u}),Jh=N((e,r)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,n)};return function(o,n){a(o,n);function s(){this.constructor=o}o.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),i=dn(),u=function(a){t(o,a);function o(){var n=a.call(this)||this;return n.ver=2,n.exceptions=[],n.properties={},n.measurements={},n}return o}(i);r.exports=u}),ev=N((e,r)=>{"use strict";var t=function(){function i(){this.hasFullStack=!0,this.parsedStack=[]}return i}();r.exports=t}),tv=N((e,r)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,n)};return function(o,n){a(o,n);function s(){this.constructor=o}o.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),i=dn(),u=function(a){t(o,a);function o(){var n=a.call(this)||this;return n.ver=2,n.properties={},n}return o}(i);r.exports=u}),rv=N((e,r)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,n)};return function(o,n){a(o,n);function s(){this.constructor=o}o.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),i=dn(),u=function(a){t(o,a);function o(){var n=a.call(this)||this;return n.ver=2,n.metrics=[],n.properties={},n}return o}(i);r.exports=u}),nv=N((e,r)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,n)};return function(o,n){a(o,n);function s(){this.constructor=o}o.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),i=Zc(),u=function(a){t(o,a);function o(){var n=a.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return o}(i);r.exports=u}),iv=N((e,r)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,n)};return function(o,n){a(o,n);function s(){this.constructor=o}o.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),i=dn(),u=function(a){t(o,a);function o(){var n=a.call(this)||this;return n.ver=2,n.success=!0,n.properties={},n.measurements={},n}return o}(i);r.exports=u}),ov=N((e,r)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,n)};return function(o,n){a(o,n);function s(){this.constructor=o}o.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),i=dn(),u=function(a){t(o,a);function o(){var n=a.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return o}(i);r.exports=u}),av=N((e,r)=>{"use strict";var t;(function(i){i[i.Verbose=0]="Verbose",i[i.Information=1]="Information",i[i.Warning=2]="Warning",i[i.Error=3]="Error",i[i.Critical=4]="Critical"})(t||(t={})),r.exports=t}),sv=N((e,r)=>{"use strict";var t=function(){function i(){}return i}();r.exports=t}),Jc=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=Kh(),e.Base=Qc(),e.ContextTagKeys=Xh(),e.Data=Qh(),e.DataPoint=Yh(),e.DataPointType=Yc(),e.Domain=dn(),e.Envelope=Zh(),e.EventData=Zc(),e.ExceptionData=Jh(),e.ExceptionDetails=ev(),e.MessageData=tv(),e.MetricData=rv(),e.PageViewData=nv(),e.RemoteDependencyData=iv(),e.RequestData=ov(),e.SeverityLevel=av(),e.StackFrame=sv()}),uv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var r=Jc(),t=function(){function u(){}return u.TYPE_HTTP="Http",u.TYPE_AI="Http (tracked component)",u}();e.RemoteDependencyDataConstants=t;function i(u){return"properties"in u||u instanceof r.EventData||u instanceof r.ExceptionData||u instanceof r.MessageData||u instanceof r.MetricData||u instanceof r.PageViewData||u instanceof r.RemoteDependencyData||u instanceof r.RequestData}e.domainSupportsProperties=i}),cv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),lv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),fv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),dv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),pv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),hv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),vv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),mv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),gv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),_v=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),yv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ev=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),bv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0;function r(u){switch(u){case i.Event:return"EventData";case i.Exception:return"ExceptionData";case i.Trace:return"MessageData";case i.Metric:return"MetricData";case i.Request:return"RequestData";case i.Dependency:return"RemoteDependencyData";case i.Availability:return"AvailabilityData";case i.PageView:return"PageViewData"}}e.telemetryTypeToBaseType=r;function t(u){switch(u){case"EventData":return i.Event;case"ExceptionData":return i.Exception;case"MessageData":return i.Trace;case"MetricData":return i.Metric;case"RequestData":return i.Request;case"RemoteDependencyData":return i.Dependency;case"AvailabilityData":return i.Availability;case"PageViewData":return i.PageView}}e.baseTypeToTelemetryType=t,e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var i;(function(u){u[u.Event=0]="Event",u[u.Exception=1]="Exception",u[u.Trace=2]="Trace",u[u.Metric=3]="Metric",u[u.Request=4]="Request",u[u.Dependency=5]="Dependency",u[u.Availability=6]="Availability",u[u.PageView=7]="PageView"})(i=e.TelemetryType||(e.TelemetryType={}))}),Sv=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(cv(),e),t(lv(),e),t(fv(),e),t(dv(),e),t(pv(),e),t(hv(),e),t(vv(),e),t(mv(),e),t(gv(),e),t(_v(),e),t(yv(),e),t(Ev(),e),t(bv(),e)}),Tv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Iv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),wv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Av=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Pv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ov=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Cv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Rv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Dv=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Tv(),e),t(Iv(),e),t(wv(),e),t(Av(),e),t(Pv(),e),t(Ov(),e),t(Cv(),e),t(Rv(),e)}),xr=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(uv(),e),t(Jc(),e),t(Sv(),e),t(Dv(),e)}),el=N((e,r)=>{"use strict";var t=function(){function i(){}return i.prototype.getUrl=function(){return this.url},i.prototype.RequestParser=function(){this.startTime=+new Date},i.prototype._setStatus=function(u,a){var o=+new Date;this.duration=o-this.startTime,this.statusCode=u;var n=this.properties||{};if(a){if(typeof a=="string")n.error=a;else if(a instanceof Error)n.error=a.message;else if(typeof a=="object")for(var s in a)n[s]=a[s]&&a[s].toString&&a[s].toString()}this.properties=n},i.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},i}();r.exports=t}),tl=N((e,r)=>{"use strict";var t=e&&e.__extends||function(){var p=function(v,m){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,E){g.__proto__=E}||function(g,E){for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&(g[T]=E[T])},p(v,m)};return function(v,m){p(v,m);function g(){this.constructor=v}v.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}(),i=require("url"),u=xr(),a=Ur(),o=fi(),n=el(),s=Un(),l=Xc(),f=Ki(),c=function(p){t(v,p);function v(m,g){var E=p.call(this)||this;return m&&(E.method=m.method,E.url=E._getAbsoluteUrl(m),E.startTime=+new Date,E.socketRemoteAddress=m.socket&&m.socket.remoteAddress,E.parseHeaders(m,g),m.connection&&(E.connectionRemoteAddress=m.connection.remoteAddress,E.legacySocketRemoteAddress=m.connection.socket&&m.connection.socket.remoteAddress)),E}return v.prototype.onError=function(m,g){this._setStatus(void 0,m),g&&(this.duration=g)},v.prototype.onResponse=function(m,g){this._setStatus(m.statusCode,void 0),g&&(this.duration=g)},v.prototype.getRequestTelemetry=function(m){var g={id:this.requestId,name:this.method+" "+i.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(m&&m.time?g.time=m.time:this.startTime&&(g.time=new Date(this.startTime)),m){for(var E in m)g[E]||(g[E]=m[E]);if(m.properties)for(var E in m.properties)g.properties[E]=m.properties[E]}return g},v.prototype.getRequestTags=function(m){var g={};for(var E in m)g[E]=m[E];return g[v.keys.locationIp]=m[v.keys.locationIp]||this._getIp(),g[v.keys.sessionId]=m[v.keys.sessionId]||this._getId("ai_session"),g[v.keys.userId]=m[v.keys.userId]||this._getId("ai_user"),g[v.keys.userAuthUserId]=m[v.keys.userAuthUserId]||this._getId("ai_authUser"),g[v.keys.operationName]=this.getOperationName(m),g[v.keys.operationParentId]=this.getOperationParentId(m),g[v.keys.operationId]=this.getOperationId(m),g},v.prototype.getOperationId=function(m){return m[v.keys.operationId]||this.operationId},v.prototype.getOperationParentId=function(m){return m[v.keys.operationParentId]||this.parentId||this.getOperationId(m)},v.prototype.getOperationName=function(m){return m[v.keys.operationName]||this.method+" "+i.parse(this.url).pathname},v.prototype.getRequestId=function(){return this.requestId},v.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},v.prototype.getTraceparent=function(){return this.traceparent},v.prototype.getTracestate=function(){return this.tracestate},v.prototype.getLegacyRootId=function(){return this.legacyRootId},v.prototype._getAbsoluteUrl=function(m){if(!m.headers)return m.url;var g=m.connection?m.connection.encrypted:null,E=i.parse(m.url),T=E.pathname,P=E.search,O=g||m.headers["x-forwarded-proto"]=="https"?"https":"http",A=i.format({protocol:O,host:m.headers.host,pathname:T,search:P});return A},v.prototype._getIp=function(){var m=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,g=function(T){var P=m.exec(T);if(P)return P[0]},E=g(this.rawHeaders["x-forwarded-for"])||g(this.rawHeaders["x-client-ip"])||g(this.rawHeaders["x-real-ip"])||g(this.connectionRemoteAddress)||g(this.socketRemoteAddress)||g(this.legacySocketRemoteAddress);return!E&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(E="127.0.0.1"),E},v.prototype._getId=function(m){var g=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",E=v.parseId(a.getCookie(m,g));return E},v.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},v.prototype.parseHeaders=function(m,g){if(this.rawHeaders=m.headers||m.rawHeaders,this.userAgent=m.headers&&m.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(m,o.requestContextSourceKey),m.headers){var E=m.headers[o.traceStateHeader]?m.headers[o.traceStateHeader].toString():null,T=m.headers[o.traceparentHeader]?m.headers[o.traceparentHeader].toString():null,P=m.headers[o.requestIdHeader]?m.headers[o.requestIdHeader].toString():null,O=m.headers[o.parentIdHeader]?m.headers[o.parentIdHeader].toString():null,A=m.headers[o.rootIdHeader]?m.headers[o.rootIdHeader].toString():null;this.correlationContextHeader=m.headers[o.correlationContextHeader]?m.headers[o.correlationContextHeader].toString():null,s.w3cEnabled&&(T||E)?(this.traceparent=new f(T?T.toString():null),this.tracestate=T&&E&&new l(E?E.toString():null),this.setBackCompatFromThisTraceContext()):P?s.w3cEnabled?(this.traceparent=new f(null,P),this.setBackCompatFromThisTraceContext()):(this.parentId=P,this.requestId=s.generateRequestId(this.parentId),this.operationId=s.getRootId(this.requestId)):s.w3cEnabled?(this.traceparent=new f,this.traceparent.parentId=O,this.traceparent.legacyRootId=A||O,this.setBackCompatFromThisTraceContext()):(this.parentId=O,this.requestId=s.generateRequestId(A||this.parentId),this.correlationContextHeader=null,this.operationId=s.getRootId(this.requestId)),g&&(this.requestId=g,this.operationId=s.getRootId(this.requestId))}},v.parseId=function(m){var g=m.split("|");return g.length>0?g[0]:""},v.keys=new u.ContextTagKeys,v}(n);r.exports=c}),Nv=N((e,r)=>{e=r.exports=ue;var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var d=Array.prototype.slice.call(arguments,0);d.unshift("SEMVER"),console.log.apply(console,d)}:t=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var i=256,u=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,o=e.re=[],n=e.src=[],s=0,l=s++;n[l]="0|[1-9]\\d*";var f=s++;n[f]="[0-9]+";var c=s++;n[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=s++;n[p]="("+n[l]+")\\.("+n[l]+")\\.("+n[l]+")";var v=s++;n[v]="("+n[f]+")\\.("+n[f]+")\\.("+n[f]+")";var m=s++;n[m]="(?:"+n[l]+"|"+n[c]+")";var g=s++;n[g]="(?:"+n[f]+"|"+n[c]+")";var E=s++;n[E]="(?:-("+n[m]+"(?:\\."+n[m]+")*))";var T=s++;n[T]="(?:-?("+n[g]+"(?:\\."+n[g]+")*))";var P=s++;n[P]="[0-9A-Za-z-]+";var O=s++;n[O]="(?:\\+("+n[P]+"(?:\\."+n[P]+")*))";var A=s++,M="v?"+n[p]+n[E]+"?"+n[O]+"?";n[A]="^"+M+"$";var j="[v=\\s]*"+n[v]+n[T]+"?"+n[O]+"?",G=s++;n[G]="^"+j+"$";var B=s++;n[B]="((?:<|>)?=?)";var Y=s++;n[Y]=n[f]+"|x|X|\\*";var ne=s++;n[ne]=n[l]+"|x|X|\\*";var ye=s++;n[ye]="[v=\\s]*("+n[ne]+")(?:\\.("+n[ne]+")(?:\\.("+n[ne]+")(?:"+n[E]+")?"+n[O]+"?)?)?";var Re=s++;n[Re]="[v=\\s]*("+n[Y]+")(?:\\.("+n[Y]+")(?:\\.("+n[Y]+")(?:"+n[T]+")?"+n[O]+"?)?)?";var st=s++;n[st]="^"+n[B]+"\\s*"+n[ye]+"$";var ot=s++;n[ot]="^"+n[B]+"\\s*"+n[Re]+"$";var Dt=s++;n[Dt]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var at=s++;n[at]="(?:~>?)";var oe=s++;n[oe]="(\\s*)"+n[at]+"\\s+",o[oe]=new RegExp(n[oe],"g");var ge="$1~",le=s++;n[le]="^"+n[at]+n[ye]+"$";var Ue=s++;n[Ue]="^"+n[at]+n[Re]+"$";var X=s++;n[X]="(?:\\^)";var Ee=s++;n[Ee]="(\\s*)"+n[X]+"\\s+",o[Ee]=new RegExp(n[Ee],"g");var se="$1^",We=s++;n[We]="^"+n[X]+n[ye]+"$";var rt=s++;n[rt]="^"+n[X]+n[Re]+"$";var $=s++;n[$]="^"+n[B]+"\\s*("+j+")$|^$";var ee=s++;n[ee]="^"+n[B]+"\\s*("+M+")$|^$";var re=s++;n[re]="(\\s*)"+n[B]+"\\s*("+j+"|"+n[ye]+")",o[re]=new RegExp(n[re],"g");var ve="$1$2$3",Ve=s++;n[Ve]="^\\s*("+n[ye]+")\\s+-\\s+("+n[ye]+")\\s*$";var Ae=s++;n[Ae]="^\\s*("+n[Re]+")\\s+-\\s+("+n[Re]+")\\s*$";var xe=s++;for(n[xe]="(<|>)?=?\\s*\\*",Qe=0;Qe<s;Qe++)t(Qe,n[Qe]),o[Qe]||(o[Qe]=new RegExp(n[Qe]));var Qe;e.parse=At;function At(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof ue)return d;if(typeof d!="string"||d.length>i)return null;var S=_.loose?o[G]:o[A];if(!S.test(d))return null;try{return new ue(d,_)}catch{return null}}e.valid=gr;function gr(d,_){var S=At(d,_);return S?S.version:null}e.clean=dr;function dr(d,_){var S=At(d.trim().replace(/^[=v]+/,""),_);return S?S.version:null}e.SemVer=ue;function ue(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof ue){if(d.loose===_.loose)return d;d=d.version}else if(typeof d!="string")throw new TypeError("Invalid Version: "+d);if(d.length>i)throw new TypeError("version is longer than "+i+" characters");if(!(this instanceof ue))return new ue(d,_);t("SemVer",d,_),this.options=_,this.loose=!!_.loose;var S=d.trim().match(_.loose?o[G]:o[A]);if(!S)throw new TypeError("Invalid Version: "+d);if(this.raw=d,this.major=+S[1],this.minor=+S[2],this.patch=+S[3],this.major>u||this.major<0)throw new TypeError("Invalid major version");if(this.minor>u||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>u||this.patch<0)throw new TypeError("Invalid patch version");S[4]?this.prerelease=S[4].split(".").map(function(C){if(/^[0-9]+$/.test(C)){var R=+C;if(R>=0&&R<u)return R}return C}):this.prerelease=[],this.build=S[5]?S[5].split("."):[],this.format()}ue.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ue.prototype.toString=function(){return this.version},ue.prototype.compare=function(d){return t("SemVer.compare",this.version,this.options,d),d instanceof ue||(d=new ue(d,this.options)),this.compareMain(d)||this.comparePre(d)},ue.prototype.compareMain=function(d){return d instanceof ue||(d=new ue(d,this.options)),Ut(this.major,d.major)||Ut(this.minor,d.minor)||Ut(this.patch,d.patch)},ue.prototype.comparePre=function(d){if(d instanceof ue||(d=new ue(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;var _=0;do{var S=this.prerelease[_],C=d.prerelease[_];if(t("prerelease compare",_,S,C),S===void 0&&C===void 0)return 0;if(C===void 0)return 1;if(S===void 0)return-1;if(S!==C)return Ut(S,C)}while(++_)},ue.prototype.inc=function(d,_){switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var S=this.prerelease.length;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);S===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+d)}return this.format(),this.raw=this.version,this},e.inc=_r;function _r(d,_,S,C){typeof S=="string"&&(C=S,S=void 0);try{return new ue(d,S).inc(_,C).version}catch{return null}}e.diff=tr;function tr(d,_){if(St(d,_))return null;var S=At(d),C=At(_),R="";if(S.prerelease.length||C.prerelease.length){R="pre";var k="prerelease"}for(var L in S)if((L==="major"||L==="minor"||L==="patch")&&S[L]!==C[L])return R+L;return k}e.compareIdentifiers=Ut;var zt=/^[0-9]+$/;function Ut(d,_){var S=zt.test(d),C=zt.test(_);return S&&C&&(d=+d,_=+_),d===_?0:S&&!C?-1:C&&!S?1:d<_?-1:1}e.rcompareIdentifiers=or;function or(d,_){return Ut(_,d)}e.major=rr;function rr(d,_){return new ue(d,_).major}e.minor=yr;function yr(d,_){return new ue(d,_).minor}e.patch=ie;function ie(d,_){return new ue(d,_).patch}e.compare=K;function K(d,_,S){return new ue(d,S).compare(new ue(_,S))}e.compareLoose=Ne;function Ne(d,_){return K(d,_,!0)}e.rcompare=Te;function Te(d,_,S){return K(_,d,S)}e.sort=ht;function ht(d,_){return d.sort(function(S,C){return e.compare(S,C,_)})}e.rsort=Ke;function Ke(d,_){return d.sort(function(S,C){return e.rcompare(S,C,_)})}e.gt=He;function He(d,_,S){return K(d,_,S)>0}e.lt=$e;function $e(d,_,S){return K(d,_,S)<0}e.eq=St;function St(d,_,S){return K(d,_,S)===0}e.neq=Tt;function Tt(d,_,S){return K(d,_,S)!==0}e.gte=Pe;function Pe(d,_,S){return K(d,_,S)>=0}e.lte=Ye;function Ye(d,_,S){return K(d,_,S)<=0}e.cmp=ae;function ae(d,_,S,C){switch(_){case"===":return typeof d=="object"&&(d=d.version),typeof S=="object"&&(S=S.version),d===S;case"!==":return typeof d=="object"&&(d=d.version),typeof S=="object"&&(S=S.version),d!==S;case"":case"=":case"==":return St(d,S,C);case"!=":return Tt(d,S,C);case">":return He(d,S,C);case">=":return Pe(d,S,C);case"<":return $e(d,S,C);case"<=":return Ye(d,S,C);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=we;function we(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof we){if(d.loose===!!_.loose)return d;d=d.value}if(!(this instanceof we))return new we(d,_);t("comparator",d,_),this.options=_,this.loose=!!_.loose,this.parse(d),this.semver===Le?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var Le={};we.prototype.parse=function(d){var _=this.options.loose?o[$]:o[ee],S=d.match(_);if(!S)throw new TypeError("Invalid comparator: "+d);this.operator=S[1],this.operator==="="&&(this.operator=""),S[2]?this.semver=new ue(S[2],this.options.loose):this.semver=Le},we.prototype.toString=function(){return this.value},we.prototype.test=function(d){return t("Comparator.test",d,this.options.loose),this.semver===Le?!0:(typeof d=="string"&&(d=new ue(d,this.options)),ae(d,this.operator,this.semver,this.options))},we.prototype.intersects=function(d,_){if(!(d instanceof we))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var S;if(this.operator==="")return S=new he(d.value,_),pe(this.value,S,_);if(d.operator==="")return S=new he(this.value,_),pe(d.semver,S,_);var C=(this.operator===">="||this.operator===">")&&(d.operator===">="||d.operator===">"),R=(this.operator==="<="||this.operator==="<")&&(d.operator==="<="||d.operator==="<"),k=this.semver.version===d.semver.version,L=(this.operator===">="||this.operator==="<=")&&(d.operator===">="||d.operator==="<="),Q=ae(this.semver,"<",d.semver,_)&&(this.operator===">="||this.operator===">")&&(d.operator==="<="||d.operator==="<"),te=ae(this.semver,">",d.semver,_)&&(this.operator==="<="||this.operator==="<")&&(d.operator===">="||d.operator===">");return C||R||k&&L||Q||te},e.Range=he;function he(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof he)return d.loose===!!_.loose&&d.includePrerelease===!!_.includePrerelease?d:new he(d.raw,_);if(d instanceof we)return new he(d.value,_);if(!(this instanceof he))return new he(d,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=d,this.set=d.split(/\s*\|\|\s*/).map(function(S){return this.parseRange(S.trim())},this).filter(function(S){return S.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+d);this.format()}he.prototype.format=function(){return this.range=this.set.map(function(d){return d.join(" ").trim()}).join("||").trim(),this.range},he.prototype.toString=function(){return this.range},he.prototype.parseRange=function(d){var _=this.options.loose;d=d.trim();var S=_?o[Ae]:o[Ve];d=d.replace(S,et),t("hyphen replace",d),d=d.replace(o[re],ve),t("comparator trim",d,o[re]),d=d.replace(o[oe],ge),d=d.replace(o[Ee],se),d=d.split(/\s+/).join(" ");var C=_?o[$]:o[ee],R=d.split(" ").map(function(k){return qt(k,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(R=R.filter(function(k){return!!k.match(C)})),R=R.map(function(k){return new we(k,this.options)},this),R},he.prototype.intersects=function(d,_){if(!(d instanceof he))throw new TypeError("a Range is required");return this.set.some(function(S){return S.every(function(C){return d.set.some(function(R){return R.every(function(k){return C.intersects(k,_)})})})})},e.toComparators=ut;function ut(d,_){return new he(d,_).set.map(function(S){return S.map(function(C){return C.value}).join(" ").trim().split(" ")})}function qt(d,_){return t("comp",d,_),d=Er(d,_),t("caret",d),d=$t(d,_),t("tildes",d),d=je(d,_),t("xrange",d),d=Z(d,_),t("stars",d),d}function Ze(d){return!d||d.toLowerCase()==="x"||d==="*"}function $t(d,_){return d.trim().split(/\s+/).map(function(S){return pr(S,_)}).join(" ")}function pr(d,_){var S=_.loose?o[Ue]:o[le];return d.replace(S,function(C,R,k,L,Q){t("tilde",d,C,R,k,L,Q);var te;return Ze(R)?te="":Ze(k)?te=">="+R+".0.0 <"+(+R+1)+".0.0":Ze(L)?te=">="+R+"."+k+".0 <"+R+"."+(+k+1)+".0":Q?(t("replaceTilde pr",Q),te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+(+k+1)+".0"):te=">="+R+"."+k+"."+L+" <"+R+"."+(+k+1)+".0",t("tilde return",te),te})}function Er(d,_){return d.trim().split(/\s+/).map(function(S){return Me(S,_)}).join(" ")}function Me(d,_){t("caret",d,_);var S=_.loose?o[rt]:o[We];return d.replace(S,function(C,R,k,L,Q){t("caret",d,C,R,k,L,Q);var te;return Ze(R)?te="":Ze(k)?te=">="+R+".0.0 <"+(+R+1)+".0.0":Ze(L)?R==="0"?te=">="+R+"."+k+".0 <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+".0 <"+(+R+1)+".0.0":Q?(t("replaceCaret pr",Q),R==="0"?k==="0"?te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+k+"."+(+L+1):te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+"."+L+"-"+Q+" <"+(+R+1)+".0.0"):(t("no pr"),R==="0"?k==="0"?te=">="+R+"."+k+"."+L+" <"+R+"."+k+"."+(+L+1):te=">="+R+"."+k+"."+L+" <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+"."+L+" <"+(+R+1)+".0.0"),t("caret return",te),te})}function je(d,_){return t("replaceXRanges",d,_),d.split(/\s+/).map(function(S){return Se(S,_)}).join(" ")}function Se(d,_){d=d.trim();var S=_.loose?o[ot]:o[st];return d.replace(S,function(C,R,k,L,Q,te){t("xRange",d,C,R,k,L,Q,te);var Fe=Ze(k),lt=Fe||Ze(L),qe=lt||Ze(Q),it=qe;return R==="="&&it&&(R=""),Fe?R===">"||R==="<"?C="<0.0.0":C="*":R&&it?(lt&&(L=0),Q=0,R===">"?(R=">=",lt?(k=+k+1,L=0,Q=0):(L=+L+1,Q=0)):R==="<="&&(R="<",lt?k=+k+1:L=+L+1),C=R+k+"."+L+"."+Q):lt?C=">="+k+".0.0 <"+(+k+1)+".0.0":qe&&(C=">="+k+"."+L+".0 <"+k+"."+(+L+1)+".0"),t("xRange return",C),C})}function Z(d,_){return t("replaceStars",d,_),d.trim().replace(o[xe],"")}function et(d,_,S,C,R,k,L,Q,te,Fe,lt,qe,it){return Ze(S)?_="":Ze(C)?_=">="+S+".0.0":Ze(R)?_=">="+S+"."+C+".0":_=">="+_,Ze(te)?Q="":Ze(Fe)?Q="<"+(+te+1)+".0.0":Ze(lt)?Q="<"+te+"."+(+Fe+1)+".0":qe?Q="<="+te+"."+Fe+"."+lt+"-"+qe:Q="<="+Q,(_+" "+Q).trim()}he.prototype.test=function(d){if(!d)return!1;typeof d=="string"&&(d=new ue(d,this.options));for(var _=0;_<this.set.length;_++)if(ze(this.set[_],d,this.options))return!0;return!1};function ze(d,_,S){for(var C=0;C<d.length;C++)if(!d[C].test(_))return!1;if(_.prerelease.length&&!S.includePrerelease){for(C=0;C<d.length;C++)if(t(d[C].semver),d[C].semver!==Le&&d[C].semver.prerelease.length>0){var R=d[C].semver;if(R.major===_.major&&R.minor===_.minor&&R.patch===_.patch)return!0}return!1}return!0}e.satisfies=pe;function pe(d,_,S){try{_=new he(_,S)}catch{return!1}return _.test(d)}e.maxSatisfying=vt;function vt(d,_,S){var C=null,R=null;try{var k=new he(_,S)}catch{return null}return d.forEach(function(L){k.test(L)&&(!C||R.compare(L)===-1)&&(C=L,R=new ue(C,S))}),C}e.minSatisfying=Et;function Et(d,_,S){var C=null,R=null;try{var k=new he(_,S)}catch{return null}return d.forEach(function(L){k.test(L)&&(!C||R.compare(L)===1)&&(C=L,R=new ue(C,S))}),C}e.minVersion=Ot;function Ot(d,_){d=new he(d,_);var S=new ue("0.0.0");if(d.test(S)||(S=new ue("0.0.0-0"),d.test(S)))return S;S=null;for(var C=0;C<d.set.length;++C){var R=d.set[C];R.forEach(function(k){var L=new ue(k.semver.version);switch(k.operator){case">":L.prerelease.length===0?L.patch++:L.prerelease.push(0),L.raw=L.format();case"":case">=":(!S||He(S,L))&&(S=L);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+k.operator)}})}return S&&d.test(S)?S:null}e.validRange=Gt;function Gt(d,_){try{return new he(d,_).range||"*"}catch{return null}}e.ltr=Wt;function Wt(d,_,S){return nt(d,_,"<",S)}e.gtr=jt;function jt(d,_,S){return nt(d,_,">",S)}e.outside=nt;function nt(d,_,S,C){d=new ue(d,C),_=new he(_,C);var R,k,L,Q,te;switch(S){case">":R=He,k=Ye,L=$e,Q=">",te=">=";break;case"<":R=$e,k=Pe,L=He,Q="<",te="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pe(d,_,C))return!1;for(var Fe=0;Fe<_.set.length;++Fe){var lt=_.set[Fe],qe=null,it=null;if(lt.forEach(function(dt){dt.semver===Le&&(dt=new we(">=0.0.0")),qe=qe||dt,it=it||dt,R(dt.semver,qe.semver,C)?qe=dt:L(dt.semver,it.semver,C)&&(it=dt)}),qe.operator===Q||qe.operator===te||(!it.operator||it.operator===Q)&&k(d,it.semver)||it.operator===te&&L(d,it.semver))return!1}return!0}e.prerelease=Ct;function Ct(d,_){var S=At(d,_);return S&&S.prerelease.length?S.prerelease:null}e.intersects=ct;function ct(d,_,S){return d=new he(d,S),_=new he(_,S),d.intersects(_)}e.coerce=mt;function mt(d){if(d instanceof ue)return d;if(typeof d!="string")return null;var _=d.match(o[Dt]);return _==null?null:At(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),ba=N((e,r)=>{"use strict";function t(f){return typeof f=="function"}var i=console.error.bind(console);function u(f,c,p){var v=!!f[c]&&f.propertyIsEnumerable(c);Object.defineProperty(f,c,{configurable:!0,enumerable:v,writable:!0,value:p})}function a(f){f&&f.logger&&(t(f.logger)?i=f.logger:i("new logger isn't a function, not replacing"))}function o(f,c,p){if(!f||!f[c]){i("no original function "+c+" to wrap");return}if(!p){i("no wrapper function"),i(new Error().stack);return}if(!t(f[c])||!t(p)){i("original object and wrapper must be functions");return}var v=f[c],m=p(v,c);return u(m,"__original",v),u(m,"__unwrap",function(){f[c]===m&&u(f,c,v)}),u(m,"__wrapped",!0),u(f,c,m),m}function n(f,c,p){if(f)Array.isArray(f)||(f=[f]);else{i("must provide one or more modules to patch"),i(new Error().stack);return}if(!(c&&Array.isArray(c))){i("must provide one or more functions to wrap on modules");return}f.forEach(function(v){c.forEach(function(m){o(v,m,p)})})}function s(f,c){if(!f||!f[c]){i("no function to unwrap."),i(new Error().stack);return}if(!f[c].__unwrap)i("no original to unwrap to -- has "+c+" already been unwrapped?");else return f[c].__unwrap()}function l(f,c){if(f)Array.isArray(f)||(f=[f]);else{i("must provide one or more modules to patch"),i(new Error().stack);return}if(!(c&&Array.isArray(c))){i("must provide one or more functions to unwrap on modules");return}f.forEach(function(p){c.forEach(function(v){s(p,v)})})}a.wrap=o,a.massWrap=n,a.unwrap=s,a.massUnwrap=l,r.exports=a}),Sa=N((e,r)=>{"use strict";var t=ba(),i=t.wrap,u=t.unwrap,a="wrap@before";function o(c,p,v){var m=!!c[p]&&c.propertyIsEnumerable(p);Object.defineProperty(c,p,{configurable:!0,enumerable:m,writable:!0,value:v})}function n(c,p){for(var v=p.length,m=0;m<v;m++){var g=p[m],E=c[a];if(typeof E=="function")E(g);else if(Array.isArray(E))for(var T=E.length,P=0;P<T;P++)E[P](g)}}function s(c,p){var v;return v=c._events&&c._events[p],Array.isArray(v)||(v?v=[v]:v=[]),v}function l(c,p,v){var m=s(c,p),g=m.filter(function(E){return v.indexOf(E)===-1});g.length>0&&n(c,g)}function f(c,p){if(c){var v=c;if(typeof c=="function")v=p(c);else if(Array.isArray(c)){v=[];for(var m=0;m<c.length;m++)v[m]=p(c[m])}return v}}r.exports=function(c,p,v){if(!c||!c.on||!c.addListener||!c.removeListener||!c.emit)throw new Error("can only wrap real EEs");if(!p)throw new Error("must have function to run on listener addition");if(!v)throw new Error("must have function to wrap listeners when emitting");function m(E){return function(T,P){var O=s(this,T).slice();try{var A=E.call(this,T,P);return l(this,T,O),A}finally{this.on.__wrapped||i(this,"on",m),this.addListener.__wrapped||i(this,"addListener",m)}}}function g(E){return function(T){if(!this._events||!this._events[T])return E.apply(this,arguments);var P=this._events[T];function O(A){return function(){this._events[T]=P;try{return A.apply(this,arguments)}finally{P=this._events[T],this._events[T]=f(P,v)}}}i(this,"removeListener",O);try{return this._events[T]=f(P,v),E.apply(this,arguments)}finally{u(this,"removeListener"),this._events[T]=P}}}c[a]?typeof c[a]=="function"?o(c,a,[c[a],p]):Array.isArray(c[a])&&c[a].push(p):o(c,a,p),c.__wrapped||(i(c,"addListener",m),i(c,"on",m),i(c,"emit",g),o(c,"__unwrap",function(){u(c,"addListener"),u(c,"on"),u(c,"emit"),delete c[a],delete c.__wrapped}),o(c,"__wrapped",!0))}}),xv=N((e,r)=>{"use strict";var t=require("util"),i=require("assert"),u=Sa(),a=require("async_hooks"),o="cls@contexts",n="error@context",s=process.env.DEBUG_CLS_HOOKED,l=-1;r.exports={getNamespace:c,createNamespace:p,destroyNamespace:v,reset:m,ERROR_SYMBOL:n};function f(E){this.name=E,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}f.prototype.set=function(E,T){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[E]=T,s){let P=" ".repeat(this._indent<0?0:this._indent);g(P+"CONTEXT-SET KEY:"+E+"="+T+" in ns:"+this.name+" currentUid:"+l+" active:"+t.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return T},f.prototype.get=function(E){if(!this.active){if(s){let T=a.currentId(),P=a.triggerAsyncId(),O=" ".repeat(this._indent<0?0:this._indent);g(`${O}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${E}=undefined currentUid:${l} asyncHooksCurrentId:${T} triggerId:${P} len:${this._set.length}`)}return}if(s){let T=a.executionAsyncId(),P=a.triggerAsyncId(),O=" ".repeat(this._indent<0?0:this._indent);g(O+"CONTEXT-GETTING KEY:"+E+"="+this.active[E]+" ("+this.name+") currentUid:"+l+" active:"+t.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),g(`${O}CONTEXT-GETTING KEY: (${this.name}) ${E}=${this.active[E]} currentUid:${l} asyncHooksCurrentId:${T} triggerId:${P} len:${this._set.length} active:${t.inspect(this.active)}`)}return this.active[E]},f.prototype.createContext=function(){let E=Object.create(this.active?this.active:Object.prototype);if(E._ns_name=this.name,E.id=l,s){let T=a.executionAsyncId(),P=a.triggerAsyncId(),O=" ".repeat(this._indent<0?0:this._indent);g(`${O}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${T} triggerId:${P} len:${this._set.length} context:${t.inspect(E,{showHidden:!0,depth:2,colors:!0})}`)}return E},f.prototype.run=function(E){let T=this.createContext();this.enter(T);try{if(s){let P=a.triggerAsyncId(),O=a.executionAsyncId(),A=" ".repeat(this._indent<0?0:this._indent);g(`${A}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${P} asyncHooksCurrentId:${O} len:${this._set.length} context:${t.inspect(T)}`)}return E(T),T}catch(P){throw P&&(P[n]=T),P}finally{if(s){let P=a.triggerAsyncId(),O=a.executionAsyncId(),A=" ".repeat(this._indent<0?0:this._indent);g(`${A}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${P} asyncHooksCurrentId:${O} len:${this._set.length} ${t.inspect(T)}`)}this.exit(T)}},f.prototype.runAndReturn=function(E){let T;return this.run(function(P){T=E(P)}),T},f.prototype.runPromise=function(E){let T=this.createContext();this.enter(T);let P=E(T);if(!P||!P.then||!P.catch)throw new Error("fn must return a promise.");return s&&g("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+t.inspect(T)),P.then(O=>(s&&g("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+t.inspect(T)),this.exit(T),O)).catch(O=>{throw O[n]=T,s&&g("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+t.inspect(T)),this.exit(T),O})},f.prototype.bind=function(E,T){T||(this.active?T=this.active:T=this.createContext());let P=this;return function(){P.enter(T);try{return E.apply(this,arguments)}catch(O){throw O&&(O[n]=T),O}finally{P.exit(T)}}},f.prototype.enter=function(E){if(i.ok(E,"context must be provided for entering"),s){let T=a.executionAsyncId(),P=a.triggerAsyncId(),O=" ".repeat(this._indent<0?0:this._indent);g(`${O}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${P} asyncHooksCurrentId:${T} len:${this._set.length} ${t.inspect(E)}`)}this._set.push(this.active),this.active=E},f.prototype.exit=function(E){if(i.ok(E,"context must be provided for exiting"),s){let P=a.executionAsyncId(),O=a.triggerAsyncId(),A=" ".repeat(this._indent<0?0:this._indent);g(`${A}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${O} asyncHooksCurrentId:${P} len:${this._set.length} ${t.inspect(E)}`)}if(this.active===E){i.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let T=this._set.lastIndexOf(E);T<0?(s&&g("??ERROR?? context exiting but not entered - ignoring: "+t.inspect(E)),i.ok(T>=0,`context not currently entered; can't exit. 
`+t.inspect(this)+`
`+t.inspect(E))):(i.ok(T,"can't remove top context"),this._set.splice(T,1))},f.prototype.bindEmitter=function(E){i.ok(E.on&&E.addListener&&E.emit,"can only bind real EEs");let T=this,P="context@"+this.name;function O(M){!M||(M[o]||(M[o]=Object.create(null)),M[o][P]={namespace:T,context:T.active})}function A(M){if(!(M&&M[o]))return M;let j=M,G=M[o];return Object.keys(G).forEach(function(B){let Y=G[B];j=Y.namespace.bind(j,Y.context)}),j}u(E,O,A)},f.prototype.fromException=function(E){return E[n]};function c(E){return process.namespaces[E]}function p(E){i.ok(E,"namespace must be given a name."),s&&g(`NS-CREATING NAMESPACE (${E})`);let T=new f(E);return T.id=l,a.createHook({init(P,O,A,M){if(l=a.executionAsyncId(),T.active){if(T._contexts.set(P,T.active),s){let j=" ".repeat(T._indent<0?0:T._indent);g(`${j}INIT [${O}] (${E}) asyncId:${P} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} resource:${M}`)}}else if(l===0){let j=a.triggerAsyncId(),G=T._contexts.get(j);if(G){if(T._contexts.set(P,G),s){let B=" ".repeat(T._indent<0?0:T._indent);g(`${B}INIT USING CONTEXT FROM TRIGGERID [${O}] (${E}) asyncId:${P} currentUid:${l} triggerId:${j} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} resource:${M}`)}}else if(s){let B=" ".repeat(T._indent<0?0:T._indent);g(`${B}INIT MISSING CONTEXT [${O}] (${E}) asyncId:${P} currentUid:${l} triggerId:${j} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} resource:${M}`)}}if(s&&O==="PROMISE"){g(t.inspect(M,{showHidden:!0}));let j=M.parentId,G=" ".repeat(T._indent<0?0:T._indent);g(`${G}INIT RESOURCE-PROMISE [${O}] (${E}) parentId:${j} asyncId:${P} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} resource:${M}`)}},before(P){l=a.executionAsyncId();let O;if(O=T._contexts.get(P)||T._contexts.get(l),O){if(s){let A=a.triggerAsyncId(),M=" ".repeat(T._indent<0?0:T._indent);g(`${M}BEFORE (${E}) asyncId:${P} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(O)}`),T._indent+=2}T.enter(O)}else if(s){let A=a.triggerAsyncId(),M=" ".repeat(T._indent<0?0:T._indent);g(`${M}BEFORE MISSING CONTEXT (${E}) asyncId:${P} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${t.inspect(T._contexts,{showHidden:!0,depth:2,colors:!0})}`),T._indent+=2}},after(P){l=a.executionAsyncId();let O;if(O=T._contexts.get(P)||T._contexts.get(l),O){if(s){let A=a.triggerAsyncId();T._indent-=2;let M=" ".repeat(T._indent<0?0:T._indent);g(`${M}AFTER (${E}) asyncId:${P} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(O)}`)}T.exit(O)}else if(s){let A=a.triggerAsyncId();T._indent-=2;let M=" ".repeat(T._indent<0?0:T._indent);g(`${M}AFTER MISSING CONTEXT (${E}) asyncId:${P} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(O)}`)}},destroy(P){if(l=a.executionAsyncId(),s){let O=a.triggerAsyncId(),A=" ".repeat(T._indent<0?0:T._indent);g(`${A}DESTROY (${E}) currentUid:${l} asyncId:${P} triggerId:${O} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(T._contexts.get(l))}`)}T._contexts.delete(P)}}).enable(),process.namespaces[E]=T,T}function v(E){let T=c(E);i.ok(T,`can't delete nonexistent namespace! "`+E+'"'),i.ok(T.id,"don't assign to process.namespaces directly! "+t.inspect(T)),process.namespaces[E]=null}function m(){process.namespaces&&Object.keys(process.namespaces).forEach(function(E){v(E)}),process.namespaces=Object.create(null)}process.namespaces={};function g(...E){s&&process._rawDebug(`${t.format(...E)}`)}}),Mv=N((e,r)=>{"use strict";function t(){}r.exports=function(){let i=this._hooks,u=this._state,a=process.nextTick;process.nextTick=function(){if(!u.enabled)return a.apply(process,arguments);let o=new Array(arguments.length);for(let f=0;f<arguments.length;f++)o[f]=arguments[f];let n=o[0];if(typeof n!="function")throw new TypeError("callback is not a function");let s=new t,l=--u.counter;return i.init.call(s,l,0,null,null),o[0]=function(){i.pre.call(s,l);let f=!0;try{n.apply(this,arguments),f=!1}finally{f&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){i.post.call(s,l,!0),i.destroy.call(null,l)})}i.post.call(s,l,!1),i.destroy.call(null,l)},a.apply(process,o)}}}),kv=N((e,r)=>{"use strict";function t(){}r.exports=function(){let i=this._hooks,u=this._state,a=global.Promise,o=a.prototype.then;a.prototype.then=f;function n(c,p,v,m){return typeof c!="function"?m?s(v):l(v):function(){i.pre.call(p,v);try{return c.apply(this,arguments)}finally{i.post.call(p,v,!1),i.destroy.call(null,v)}}}function s(c){return function(p){return i.destroy.call(null,c),p}}function l(c){return function(p){throw i.destroy.call(null,c),p}}function f(c,p){if(!u.enabled)return o.call(this,c,p);let v=new t,m=--u.counter;return i.init.call(v,m,0,null,null),o.call(this,n(c,v,m,!0),n(p,v,m,!1))}}}),Lv=N((e,r)=>{"use strict";var t=require("timers");function i(){}function u(){}function a(){}var o=new Map,n=new Map,s=new Map,l=null,f=!1;r.exports=function(){c(this._hooks,this._state,"setTimeout","clearTimeout",i,o,!0),c(this._hooks,this._state,"setInterval","clearInterval",u,n,!1),c(this._hooks,this._state,"setImmediate","clearImmediate",a,s,!0),global.setTimeout=t.setTimeout,global.setInterval=t.setInterval,global.setImmediate=t.setImmediate,global.clearTimeout=t.clearTimeout,global.clearInterval=t.clearInterval,global.clearImmediate=t.clearImmediate};function c(p,v,m,g,E,T,P){let O=t[m],A=t[g];t[m]=function(){if(!v.enabled)return O.apply(t,arguments);let M=new Array(arguments.length);for(let ne=0;ne<arguments.length;ne++)M[ne]=arguments[ne];let j=M[0];if(typeof j!="function")throw new TypeError('"callback" argument must be a function');let G=new E,B=--v.counter,Y;return p.init.call(G,B,0,null,null),M[0]=function(){l=Y,p.pre.call(G,B);let ne=!0;try{j.apply(this,arguments),ne=!1}finally{ne&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){p.post.call(G,B,!0),T.delete(Y),p.destroy.call(null,B)})}p.post.call(G,B,!1),l=null,(P||f)&&(f=!1,T.delete(Y),p.destroy.call(null,B))},Y=O.apply(t,M),T.set(Y,B),Y},t[g]=function(M){if(l===M&&M!==null)f=!0;else if(T.has(M)){let j=T.get(M);T.delete(M),p.destroy.call(null,j)}A.apply(t,arguments)}}}),rl=N((e,r)=>{r.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),jv=N((e,r)=>{"use strict";var t=process.binding("async_wrap"),i=t.Providers.TIMERWRAP,u={nextTick:Mv(),promise:kv(),timers:Lv()},a=new Set;function o(){this.enabled=!1,this.counter=0}function n(){let f=this.initFns=[],c=this.preFns=[],p=this.postFns=[],v=this.destroyFns=[];this.init=function(m,g,E,T){if(g===i){a.add(m);return}for(let P of f)P(m,this,g,E,T)},this.pre=function(m){if(!a.has(m))for(let g of c)g(m,this)},this.post=function(m,g){if(!a.has(m))for(let E of p)E(m,this,g)},this.destroy=function(m){if(a.has(m)){a.delete(m);return}for(let g of v)g(m)}}n.prototype.add=function(f){f.init&&this.initFns.push(f.init),f.pre&&this.preFns.push(f.pre),f.post&&this.postFns.push(f.post),f.destroy&&this.destroyFns.push(f.destroy)};function s(f,c){let p=f.indexOf(c);p!==-1&&f.splice(p,1)}n.prototype.remove=function(f){f.init&&s(this.initFns,f.init),f.pre&&s(this.preFns,f.pre),f.post&&s(this.postFns,f.post),f.destroy&&s(this.destroyFns,f.destroy)};function l(){this._state=new o,this._hooks=new n,this.version=rl().version,this.providers=t.Providers;for(let f of Object.keys(u))u[f].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),t.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}r.exports=l,l.prototype.addHooks=function(f){this._hooks.add(f)},l.prototype.removeHooks=function(f){this._hooks.remove(f)},l.prototype.enable=function(){this._state.enabled=!0,t.enable()},l.prototype.disable=function(){this._state.enabled=!1,t.disable()}}),nl=N((e,r)=>{r.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),Fv=N((e,r)=>{function t(i){try{return Error.prototype.toString.call(i)}catch(u){try{return"<error: "+u+">"}catch{return"<error>"}}}r.exports=function(i,u){var a=[];a.push(t(i));for(var o=0;o<u.length;o++){var n=u[o],s;try{s=n.toString()}catch(l){try{s="<error: "+l+">"}catch{s="<error>"}}a.push("    at "+s)}return a.join(`
`)}}),Uv=N((e,r)=>{var t=Fv();function i(){this.extend=new o,this.filter=new o,this.format=new n,this.version=nl().version}var u=!1;i.prototype.callSite=function c(p){p||(p={}),u=!0;var v={};Error.captureStackTrace(v,c);var m=v.stack;return u=!1,m=m.slice(p.slice||0),p.extend&&(m=this.extend._modify(v,m)),p.filter&&(m=this.filter._modify(v,m)),m};var a=new i;function o(){this._modifiers=[]}o.prototype._modify=function(c,p){for(var v=0,m=this._modifiers.length;v<m;v++)p=this._modifiers[v](c,p);return p},o.prototype.attach=function(c){this._modifiers.push(c)},o.prototype.deattach=function(c){var p=this._modifiers.indexOf(c);return p===-1?!1:(this._modifiers.splice(p,1),!0)};function n(){this._formater=t,this._previous=void 0}n.prototype.replace=function(c){c?this._formater=c:this.restore()},n.prototype.restore=function(){this._formater=t,this._previous=void 0},n.prototype._backup=function(){this._previous=this._formater},n.prototype._roolback=function(){this._previous===t?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&a.format.replace(Error.prepareStackTrace);var s=!1;function l(c,p){if(u)return p;if(s)return t(c,p);var v=p.concat();v=a.extend._modify(c,v),v=a.filter._modify(c,v),v=v.slice(0,Error.stackTraceLimit),Object.isExtensible(c)&&Object.getOwnPropertyDescriptor(c,"callSite")===void 0&&(c.callSite={original:p,mutated:v}),s=!0;var m=a.format._formater(c,v);return s=!1,m}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return l},set:function(c){c===l?a.format._roolback():(a.format._backup(),a.format.replace(c))}});function f(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:f,set:function(c){Object.defineProperty(this,"callSite",{value:c,writable:!0,configurable:!0})},configurable:!0}),r.exports=a}),il=N((e,r)=>{if(global._stackChain)if(global._stackChain.version===nl().version)r.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else r.exports=global._stackChain=Uv()}),Hv=N((e,r)=>{"use strict";var t=jv();if(global._asyncHook)if(global._asyncHook.version===rl().version)r.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else il().filter.attach(function(i,u){return u.filter(function(a){let o=a.getFileName();return!(o&&o.slice(0,__dirname.length)===__dirname)})}),r.exports=global._asyncHook=new t}),qv=N((e,r)=>{"use strict";var t=require("util"),i=require("assert"),u=Sa(),a=Hv(),o="cls@contexts",n="error@context",s=[];for(let A in a.providers)s[a.providers[A]]=A;var l=process.env.DEBUG_CLS_HOOKED,f=-1;r.exports={getNamespace:p,createNamespace:v,destroyNamespace:m,reset:g,ERROR_SYMBOL:n};function c(A){this.name=A,this.active=null,this._set=[],this.id=null,this._contexts=new Map}c.prototype.set=function(A,M){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return l&&E("    SETTING KEY:"+A+"="+M+" in ns:"+this.name+" uid:"+f+" active:"+t.inspect(this.active,!0)),this.active[A]=M,M},c.prototype.get=function(A){if(!this.active){l&&E("    GETTING KEY:"+A+"=undefined "+this.name+" uid:"+f+" active:"+t.inspect(this.active,!0));return}return l&&E("    GETTING KEY:"+A+"="+this.active[A]+" "+this.name+" uid:"+f+" active:"+t.inspect(this.active,!0)),this.active[A]},c.prototype.createContext=function(){l&&E("   CREATING Context: "+this.name+" uid:"+f+" len:"+this._set.length+"  active:"+t.inspect(this.active,!0,2,!0));let A=Object.create(this.active?this.active:Object.prototype);return A._ns_name=this.name,A.id=f,l&&E("   CREATED Context: "+this.name+" uid:"+f+" len:"+this._set.length+"  context:"+t.inspect(A,!0,2,!0)),A},c.prototype.run=function(A){let M=this.createContext();this.enter(M);try{return l&&E(" BEFORE RUN: "+this.name+" uid:"+f+" len:"+this._set.length+" "+t.inspect(M)),A(M),M}catch(j){throw j&&(j[n]=M),j}finally{l&&E(" AFTER RUN: "+this.name+" uid:"+f+" len:"+this._set.length+" "+t.inspect(M)),this.exit(M)}},c.prototype.runAndReturn=function(A){var M;return this.run(function(j){M=A(j)}),M},c.prototype.runPromise=function(A){let M=this.createContext();this.enter(M);let j=A(M);if(!j||!j.then||!j.catch)throw new Error("fn must return a promise.");return l&&E(" BEFORE runPromise: "+this.name+" uid:"+f+" len:"+this._set.length+" "+t.inspect(M)),j.then(G=>(l&&E(" AFTER runPromise: "+this.name+" uid:"+f+" len:"+this._set.length+" "+t.inspect(M)),this.exit(M),G)).catch(G=>{throw G[n]=M,l&&E(" AFTER runPromise: "+this.name+" uid:"+f+" len:"+this._set.length+" "+t.inspect(M)),this.exit(M),G})},c.prototype.bind=function(A,M){M||(this.active?M=this.active:M=this.createContext());let j=this;return function(){j.enter(M);try{return A.apply(this,arguments)}catch(G){throw G&&(G[n]=M),G}finally{j.exit(M)}}},c.prototype.enter=function(A){i.ok(A,"context must be provided for entering"),l&&E("  ENTER "+this.name+" uid:"+f+" len:"+this._set.length+" context: "+t.inspect(A)),this._set.push(this.active),this.active=A},c.prototype.exit=function(A){if(i.ok(A,"context must be provided for exiting"),l&&E("  EXIT "+this.name+" uid:"+f+" len:"+this._set.length+" context: "+t.inspect(A)),this.active===A){i.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let M=this._set.lastIndexOf(A);M<0?(l&&E("??ERROR?? context exiting but not entered - ignoring: "+t.inspect(A)),i.ok(M>=0,`context not currently entered; can't exit. 
`+t.inspect(this)+`
`+t.inspect(A))):(i.ok(M,"can't remove top context"),this._set.splice(M,1))},c.prototype.bindEmitter=function(A){i.ok(A.on&&A.addListener&&A.emit,"can only bind real EEs");let M=this,j="context@"+this.name;function G(Y){!Y||(Y[o]||(Y[o]=Object.create(null)),Y[o][j]={namespace:M,context:M.active})}function B(Y){if(!(Y&&Y[o]))return Y;let ne=Y,ye=Y[o];return Object.keys(ye).forEach(function(Re){let st=ye[Re];ne=st.namespace.bind(ne,st.context)}),ne}u(A,G,B)},c.prototype.fromException=function(A){return A[n]};function p(A){return process.namespaces[A]}function v(A){i.ok(A,"namespace must be given a name."),l&&E("CREATING NAMESPACE "+A);let M=new c(A);return M.id=f,a.addHooks({init(j,G,B,Y,ne){f=j,Y?(M._contexts.set(j,M._contexts.get(Y)),l&&E("PARENTID: "+A+" uid:"+j+" parent:"+Y+" provider:"+B)):M._contexts.set(f,M.active),l&&E("INIT "+A+" uid:"+j+" parent:"+Y+" provider:"+s[B]+" active:"+t.inspect(M.active,!0))},pre(j,G){f=j;let B=M._contexts.get(j);B?(l&&E(" PRE "+A+" uid:"+j+" handle:"+T(G)+" context:"+t.inspect(B)),M.enter(B)):l&&E(" PRE MISSING CONTEXT "+A+" uid:"+j+" handle:"+T(G))},post(j,G){f=j;let B=M._contexts.get(j);B?(l&&E(" POST "+A+" uid:"+j+" handle:"+T(G)+" context:"+t.inspect(B)),M.exit(B)):l&&E(" POST MISSING CONTEXT "+A+" uid:"+j+" handle:"+T(G))},destroy(j){f=j,l&&E("DESTROY "+A+" uid:"+j+" context:"+t.inspect(M._contexts.get(f))+" active:"+t.inspect(M.active,!0)),M._contexts.delete(j)}}),process.namespaces[A]=M,M}function m(A){let M=p(A);i.ok(M,`can't delete nonexistent namespace! "`+A+'"'),i.ok(M.id,"don't assign to process.namespaces directly! "+t.inspect(M)),process.namespaces[A]=null}function g(){process.namespaces&&Object.keys(process.namespaces).forEach(function(A){m(A)}),process.namespaces=Object.create(null)}process.namespaces={},a._state&&!a._state.enabled&&a.enable();function E(A){process.env.DEBUG&&process._rawDebug(A)}function T(A){if(!A)return A;if(typeof A=="function")return A.name?A.name:(A.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(A.constructor&&A.constructor.name)return A.constructor.name}if(l){P=il();for(O in P.filter._modifiers)P.filter.deattach(O)}var P,O}),Bv=N((e,r)=>{"use strict";var t=Nv();process&&t.gte(process.versions.node,"8.0.0")?r.exports=xv():r.exports=qv()}),Gv=N((e,r)=>{e=r.exports=ue;var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var d=Array.prototype.slice.call(arguments,0);d.unshift("SEMVER"),console.log.apply(console,d)}:t=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var i=256,u=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,o=e.re=[],n=e.src=[],s=0,l=s++;n[l]="0|[1-9]\\d*";var f=s++;n[f]="[0-9]+";var c=s++;n[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=s++;n[p]="("+n[l]+")\\.("+n[l]+")\\.("+n[l]+")";var v=s++;n[v]="("+n[f]+")\\.("+n[f]+")\\.("+n[f]+")";var m=s++;n[m]="(?:"+n[l]+"|"+n[c]+")";var g=s++;n[g]="(?:"+n[f]+"|"+n[c]+")";var E=s++;n[E]="(?:-("+n[m]+"(?:\\."+n[m]+")*))";var T=s++;n[T]="(?:-?("+n[g]+"(?:\\."+n[g]+")*))";var P=s++;n[P]="[0-9A-Za-z-]+";var O=s++;n[O]="(?:\\+("+n[P]+"(?:\\."+n[P]+")*))";var A=s++,M="v?"+n[p]+n[E]+"?"+n[O]+"?";n[A]="^"+M+"$";var j="[v=\\s]*"+n[v]+n[T]+"?"+n[O]+"?",G=s++;n[G]="^"+j+"$";var B=s++;n[B]="((?:<|>)?=?)";var Y=s++;n[Y]=n[f]+"|x|X|\\*";var ne=s++;n[ne]=n[l]+"|x|X|\\*";var ye=s++;n[ye]="[v=\\s]*("+n[ne]+")(?:\\.("+n[ne]+")(?:\\.("+n[ne]+")(?:"+n[E]+")?"+n[O]+"?)?)?";var Re=s++;n[Re]="[v=\\s]*("+n[Y]+")(?:\\.("+n[Y]+")(?:\\.("+n[Y]+")(?:"+n[T]+")?"+n[O]+"?)?)?";var st=s++;n[st]="^"+n[B]+"\\s*"+n[ye]+"$";var ot=s++;n[ot]="^"+n[B]+"\\s*"+n[Re]+"$";var Dt=s++;n[Dt]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var at=s++;n[at]="(?:~>?)";var oe=s++;n[oe]="(\\s*)"+n[at]+"\\s+",o[oe]=new RegExp(n[oe],"g");var ge="$1~",le=s++;n[le]="^"+n[at]+n[ye]+"$";var Ue=s++;n[Ue]="^"+n[at]+n[Re]+"$";var X=s++;n[X]="(?:\\^)";var Ee=s++;n[Ee]="(\\s*)"+n[X]+"\\s+",o[Ee]=new RegExp(n[Ee],"g");var se="$1^",We=s++;n[We]="^"+n[X]+n[ye]+"$";var rt=s++;n[rt]="^"+n[X]+n[Re]+"$";var $=s++;n[$]="^"+n[B]+"\\s*("+j+")$|^$";var ee=s++;n[ee]="^"+n[B]+"\\s*("+M+")$|^$";var re=s++;n[re]="(\\s*)"+n[B]+"\\s*("+j+"|"+n[ye]+")",o[re]=new RegExp(n[re],"g");var ve="$1$2$3",Ve=s++;n[Ve]="^\\s*("+n[ye]+")\\s+-\\s+("+n[ye]+")\\s*$";var Ae=s++;n[Ae]="^\\s*("+n[Re]+")\\s+-\\s+("+n[Re]+")\\s*$";var xe=s++;for(n[xe]="(<|>)?=?\\s*\\*",Qe=0;Qe<s;Qe++)t(Qe,n[Qe]),o[Qe]||(o[Qe]=new RegExp(n[Qe]));var Qe;e.parse=At;function At(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof ue)return d;if(typeof d!="string"||d.length>i)return null;var S=_.loose?o[G]:o[A];if(!S.test(d))return null;try{return new ue(d,_)}catch{return null}}e.valid=gr;function gr(d,_){var S=At(d,_);return S?S.version:null}e.clean=dr;function dr(d,_){var S=At(d.trim().replace(/^[=v]+/,""),_);return S?S.version:null}e.SemVer=ue;function ue(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof ue){if(d.loose===_.loose)return d;d=d.version}else if(typeof d!="string")throw new TypeError("Invalid Version: "+d);if(d.length>i)throw new TypeError("version is longer than "+i+" characters");if(!(this instanceof ue))return new ue(d,_);t("SemVer",d,_),this.options=_,this.loose=!!_.loose;var S=d.trim().match(_.loose?o[G]:o[A]);if(!S)throw new TypeError("Invalid Version: "+d);if(this.raw=d,this.major=+S[1],this.minor=+S[2],this.patch=+S[3],this.major>u||this.major<0)throw new TypeError("Invalid major version");if(this.minor>u||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>u||this.patch<0)throw new TypeError("Invalid patch version");S[4]?this.prerelease=S[4].split(".").map(function(C){if(/^[0-9]+$/.test(C)){var R=+C;if(R>=0&&R<u)return R}return C}):this.prerelease=[],this.build=S[5]?S[5].split("."):[],this.format()}ue.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ue.prototype.toString=function(){return this.version},ue.prototype.compare=function(d){return t("SemVer.compare",this.version,this.options,d),d instanceof ue||(d=new ue(d,this.options)),this.compareMain(d)||this.comparePre(d)},ue.prototype.compareMain=function(d){return d instanceof ue||(d=new ue(d,this.options)),Ut(this.major,d.major)||Ut(this.minor,d.minor)||Ut(this.patch,d.patch)},ue.prototype.comparePre=function(d){if(d instanceof ue||(d=new ue(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;var _=0;do{var S=this.prerelease[_],C=d.prerelease[_];if(t("prerelease compare",_,S,C),S===void 0&&C===void 0)return 0;if(C===void 0)return 1;if(S===void 0)return-1;if(S!==C)return Ut(S,C)}while(++_)},ue.prototype.inc=function(d,_){switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var S=this.prerelease.length;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);S===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+d)}return this.format(),this.raw=this.version,this},e.inc=_r;function _r(d,_,S,C){typeof S=="string"&&(C=S,S=void 0);try{return new ue(d,S).inc(_,C).version}catch{return null}}e.diff=tr;function tr(d,_){if(St(d,_))return null;var S=At(d),C=At(_),R="";if(S.prerelease.length||C.prerelease.length){R="pre";var k="prerelease"}for(var L in S)if((L==="major"||L==="minor"||L==="patch")&&S[L]!==C[L])return R+L;return k}e.compareIdentifiers=Ut;var zt=/^[0-9]+$/;function Ut(d,_){var S=zt.test(d),C=zt.test(_);return S&&C&&(d=+d,_=+_),d===_?0:S&&!C?-1:C&&!S?1:d<_?-1:1}e.rcompareIdentifiers=or;function or(d,_){return Ut(_,d)}e.major=rr;function rr(d,_){return new ue(d,_).major}e.minor=yr;function yr(d,_){return new ue(d,_).minor}e.patch=ie;function ie(d,_){return new ue(d,_).patch}e.compare=K;function K(d,_,S){return new ue(d,S).compare(new ue(_,S))}e.compareLoose=Ne;function Ne(d,_){return K(d,_,!0)}e.rcompare=Te;function Te(d,_,S){return K(_,d,S)}e.sort=ht;function ht(d,_){return d.sort(function(S,C){return e.compare(S,C,_)})}e.rsort=Ke;function Ke(d,_){return d.sort(function(S,C){return e.rcompare(S,C,_)})}e.gt=He;function He(d,_,S){return K(d,_,S)>0}e.lt=$e;function $e(d,_,S){return K(d,_,S)<0}e.eq=St;function St(d,_,S){return K(d,_,S)===0}e.neq=Tt;function Tt(d,_,S){return K(d,_,S)!==0}e.gte=Pe;function Pe(d,_,S){return K(d,_,S)>=0}e.lte=Ye;function Ye(d,_,S){return K(d,_,S)<=0}e.cmp=ae;function ae(d,_,S,C){switch(_){case"===":return typeof d=="object"&&(d=d.version),typeof S=="object"&&(S=S.version),d===S;case"!==":return typeof d=="object"&&(d=d.version),typeof S=="object"&&(S=S.version),d!==S;case"":case"=":case"==":return St(d,S,C);case"!=":return Tt(d,S,C);case">":return He(d,S,C);case">=":return Pe(d,S,C);case"<":return $e(d,S,C);case"<=":return Ye(d,S,C);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=we;function we(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof we){if(d.loose===!!_.loose)return d;d=d.value}if(!(this instanceof we))return new we(d,_);t("comparator",d,_),this.options=_,this.loose=!!_.loose,this.parse(d),this.semver===Le?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var Le={};we.prototype.parse=function(d){var _=this.options.loose?o[$]:o[ee],S=d.match(_);if(!S)throw new TypeError("Invalid comparator: "+d);this.operator=S[1],this.operator==="="&&(this.operator=""),S[2]?this.semver=new ue(S[2],this.options.loose):this.semver=Le},we.prototype.toString=function(){return this.value},we.prototype.test=function(d){return t("Comparator.test",d,this.options.loose),this.semver===Le?!0:(typeof d=="string"&&(d=new ue(d,this.options)),ae(d,this.operator,this.semver,this.options))},we.prototype.intersects=function(d,_){if(!(d instanceof we))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var S;if(this.operator==="")return S=new he(d.value,_),pe(this.value,S,_);if(d.operator==="")return S=new he(this.value,_),pe(d.semver,S,_);var C=(this.operator===">="||this.operator===">")&&(d.operator===">="||d.operator===">"),R=(this.operator==="<="||this.operator==="<")&&(d.operator==="<="||d.operator==="<"),k=this.semver.version===d.semver.version,L=(this.operator===">="||this.operator==="<=")&&(d.operator===">="||d.operator==="<="),Q=ae(this.semver,"<",d.semver,_)&&(this.operator===">="||this.operator===">")&&(d.operator==="<="||d.operator==="<"),te=ae(this.semver,">",d.semver,_)&&(this.operator==="<="||this.operator==="<")&&(d.operator===">="||d.operator===">");return C||R||k&&L||Q||te},e.Range=he;function he(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof he)return d.loose===!!_.loose&&d.includePrerelease===!!_.includePrerelease?d:new he(d.raw,_);if(d instanceof we)return new he(d.value,_);if(!(this instanceof he))return new he(d,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=d,this.set=d.split(/\s*\|\|\s*/).map(function(S){return this.parseRange(S.trim())},this).filter(function(S){return S.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+d);this.format()}he.prototype.format=function(){return this.range=this.set.map(function(d){return d.join(" ").trim()}).join("||").trim(),this.range},he.prototype.toString=function(){return this.range},he.prototype.parseRange=function(d){var _=this.options.loose;d=d.trim();var S=_?o[Ae]:o[Ve];d=d.replace(S,et),t("hyphen replace",d),d=d.replace(o[re],ve),t("comparator trim",d,o[re]),d=d.replace(o[oe],ge),d=d.replace(o[Ee],se),d=d.split(/\s+/).join(" ");var C=_?o[$]:o[ee],R=d.split(" ").map(function(k){return qt(k,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(R=R.filter(function(k){return!!k.match(C)})),R=R.map(function(k){return new we(k,this.options)},this),R},he.prototype.intersects=function(d,_){if(!(d instanceof he))throw new TypeError("a Range is required");return this.set.some(function(S){return S.every(function(C){return d.set.some(function(R){return R.every(function(k){return C.intersects(k,_)})})})})},e.toComparators=ut;function ut(d,_){return new he(d,_).set.map(function(S){return S.map(function(C){return C.value}).join(" ").trim().split(" ")})}function qt(d,_){return t("comp",d,_),d=Er(d,_),t("caret",d),d=$t(d,_),t("tildes",d),d=je(d,_),t("xrange",d),d=Z(d,_),t("stars",d),d}function Ze(d){return!d||d.toLowerCase()==="x"||d==="*"}function $t(d,_){return d.trim().split(/\s+/).map(function(S){return pr(S,_)}).join(" ")}function pr(d,_){var S=_.loose?o[Ue]:o[le];return d.replace(S,function(C,R,k,L,Q){t("tilde",d,C,R,k,L,Q);var te;return Ze(R)?te="":Ze(k)?te=">="+R+".0.0 <"+(+R+1)+".0.0":Ze(L)?te=">="+R+"."+k+".0 <"+R+"."+(+k+1)+".0":Q?(t("replaceTilde pr",Q),te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+(+k+1)+".0"):te=">="+R+"."+k+"."+L+" <"+R+"."+(+k+1)+".0",t("tilde return",te),te})}function Er(d,_){return d.trim().split(/\s+/).map(function(S){return Me(S,_)}).join(" ")}function Me(d,_){t("caret",d,_);var S=_.loose?o[rt]:o[We];return d.replace(S,function(C,R,k,L,Q){t("caret",d,C,R,k,L,Q);var te;return Ze(R)?te="":Ze(k)?te=">="+R+".0.0 <"+(+R+1)+".0.0":Ze(L)?R==="0"?te=">="+R+"."+k+".0 <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+".0 <"+(+R+1)+".0.0":Q?(t("replaceCaret pr",Q),R==="0"?k==="0"?te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+k+"."+(+L+1):te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+"."+L+"-"+Q+" <"+(+R+1)+".0.0"):(t("no pr"),R==="0"?k==="0"?te=">="+R+"."+k+"."+L+" <"+R+"."+k+"."+(+L+1):te=">="+R+"."+k+"."+L+" <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+"."+L+" <"+(+R+1)+".0.0"),t("caret return",te),te})}function je(d,_){return t("replaceXRanges",d,_),d.split(/\s+/).map(function(S){return Se(S,_)}).join(" ")}function Se(d,_){d=d.trim();var S=_.loose?o[ot]:o[st];return d.replace(S,function(C,R,k,L,Q,te){t("xRange",d,C,R,k,L,Q,te);var Fe=Ze(k),lt=Fe||Ze(L),qe=lt||Ze(Q),it=qe;return R==="="&&it&&(R=""),Fe?R===">"||R==="<"?C="<0.0.0":C="*":R&&it?(lt&&(L=0),Q=0,R===">"?(R=">=",lt?(k=+k+1,L=0,Q=0):(L=+L+1,Q=0)):R==="<="&&(R="<",lt?k=+k+1:L=+L+1),C=R+k+"."+L+"."+Q):lt?C=">="+k+".0.0 <"+(+k+1)+".0.0":qe&&(C=">="+k+"."+L+".0 <"+k+"."+(+L+1)+".0"),t("xRange return",C),C})}function Z(d,_){return t("replaceStars",d,_),d.trim().replace(o[xe],"")}function et(d,_,S,C,R,k,L,Q,te,Fe,lt,qe,it){return Ze(S)?_="":Ze(C)?_=">="+S+".0.0":Ze(R)?_=">="+S+"."+C+".0":_=">="+_,Ze(te)?Q="":Ze(Fe)?Q="<"+(+te+1)+".0.0":Ze(lt)?Q="<"+te+"."+(+Fe+1)+".0":qe?Q="<="+te+"."+Fe+"."+lt+"-"+qe:Q="<="+Q,(_+" "+Q).trim()}he.prototype.test=function(d){if(!d)return!1;typeof d=="string"&&(d=new ue(d,this.options));for(var _=0;_<this.set.length;_++)if(ze(this.set[_],d,this.options))return!0;return!1};function ze(d,_,S){for(var C=0;C<d.length;C++)if(!d[C].test(_))return!1;if(_.prerelease.length&&!S.includePrerelease){for(C=0;C<d.length;C++)if(t(d[C].semver),d[C].semver!==Le&&d[C].semver.prerelease.length>0){var R=d[C].semver;if(R.major===_.major&&R.minor===_.minor&&R.patch===_.patch)return!0}return!1}return!0}e.satisfies=pe;function pe(d,_,S){try{_=new he(_,S)}catch{return!1}return _.test(d)}e.maxSatisfying=vt;function vt(d,_,S){var C=null,R=null;try{var k=new he(_,S)}catch{return null}return d.forEach(function(L){k.test(L)&&(!C||R.compare(L)===-1)&&(C=L,R=new ue(C,S))}),C}e.minSatisfying=Et;function Et(d,_,S){var C=null,R=null;try{var k=new he(_,S)}catch{return null}return d.forEach(function(L){k.test(L)&&(!C||R.compare(L)===1)&&(C=L,R=new ue(C,S))}),C}e.minVersion=Ot;function Ot(d,_){d=new he(d,_);var S=new ue("0.0.0");if(d.test(S)||(S=new ue("0.0.0-0"),d.test(S)))return S;S=null;for(var C=0;C<d.set.length;++C){var R=d.set[C];R.forEach(function(k){var L=new ue(k.semver.version);switch(k.operator){case">":L.prerelease.length===0?L.patch++:L.prerelease.push(0),L.raw=L.format();case"":case">=":(!S||He(S,L))&&(S=L);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+k.operator)}})}return S&&d.test(S)?S:null}e.validRange=Gt;function Gt(d,_){try{return new he(d,_).range||"*"}catch{return null}}e.ltr=Wt;function Wt(d,_,S){return nt(d,_,"<",S)}e.gtr=jt;function jt(d,_,S){return nt(d,_,">",S)}e.outside=nt;function nt(d,_,S,C){d=new ue(d,C),_=new he(_,C);var R,k,L,Q,te;switch(S){case">":R=He,k=Ye,L=$e,Q=">",te=">=";break;case"<":R=$e,k=Pe,L=He,Q="<",te="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pe(d,_,C))return!1;for(var Fe=0;Fe<_.set.length;++Fe){var lt=_.set[Fe],qe=null,it=null;if(lt.forEach(function(dt){dt.semver===Le&&(dt=new we(">=0.0.0")),qe=qe||dt,it=it||dt,R(dt.semver,qe.semver,C)?qe=dt:L(dt.semver,it.semver,C)&&(it=dt)}),qe.operator===Q||qe.operator===te||(!it.operator||it.operator===Q)&&k(d,it.semver)||it.operator===te&&L(d,it.semver))return!1}return!0}e.prerelease=Ct;function Ct(d,_){var S=At(d,_);return S&&S.prerelease.length?S.prerelease:null}e.intersects=ct;function ct(d,_,S){return d=new he(d,S),_=new he(_,S),d.intersects(_)}e.coerce=mt;function mt(d){if(d instanceof ue)return d;if(typeof d!="string")return null;var _=d.match(o[Dt]);return _==null?null:At(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),Vv=N((e,r)=>{var t=ba().wrap,i=1<<0,u=1<<1,a=1<<2,o=1<<3,n=[],s=0,l=!1,f=[],c,p;function v(G,B){var Y=G.length,ne=B.length,ye=[];if(Y===0&&ne===0)return ye;for(var Re=0;Re<Y;Re++)ye[Re]=G[Re];if(ne===0)return ye;for(var st=0;st<ne;st++){var ot=!0;for(Re=0;Re<Y;Re++)if(G[Re].uid===B[st].uid){ot=!1;break}ot&&ye.push(B[st])}return ye}process._fatalException?(m=!1,c=function(G){var B=n.length;if(m||B===0)return!1;var Y=!1;m=!0;for(var ne=0;ne<B;++ne){var ye=n[ne];if((ye.flags&o)!==0){var Re=g&&g[ye.uid];Y=ye.error(Re,G)||Y}}return m=!1,f.length>0&&(n=f.pop()),g=void 0,Y&&!l},p=function(G,B,Y){var ne=[];l=!0;for(var ye=0;ye<Y;++ye){var Re=B[ye];if(ne[Re.uid]=Re.data,(Re.flags&i)!==0){var st=Re.create(Re.data);st!==void 0&&(ne[Re.uid]=st)}}return l=!1,function(){g=ne,f.push(n),n=v(B,n),l=!0;for(var ot=0;ot<Y;++ot)(B[ot].flags&u)>0&&B[ot].before(this,ne[B[ot].uid]);l=!1;var Dt=G.apply(this,arguments);for(l=!0,ot=0;ot<Y;++ot)(B[ot].flags&a)>0&&B[ot].after(this,ne[B[ot].uid]);return l=!1,n=f.pop(),g=void 0,Dt}},t(process,"_fatalException",function(G){return function(B){return c(B)||G(B)}})):(E=!1,c=function(G){if(E)throw G;for(var B=!1,Y=n.length,ne=0;ne<Y;++ne){var ye=n[ne];(ye.flags&o)!==0&&(B=ye.error(null,G)||B)}if(!B&&l)throw G},p=function(G,B,Y){var ne=[];l=!0;for(var ye=0;ye<Y;++ye){var Re=B[ye];if(ne[Re.uid]=Re.data,(Re.flags&i)!==0){var st=Re.create(Re.data);st!==void 0&&(ne[Re.uid]=st)}}return l=!1,function(){var ot=!1,Dt=!1;f.push(n),n=v(B,n),l=!0;for(var at=0;at<Y;++at)(B[at].flags&u)>0&&B[at].before(this,ne[B[at].uid]);l=!1;var oe;try{oe=G.apply(this,arguments)}catch(ge){ot=!0;for(var at=0;at<Y;++at)if((n[at].flags&o)!=0)try{Dt=n[at].error(ne[B[at].uid],ge)||Dt}catch(Ue){throw E=!0,Ue}if(!Dt)throw process.removeListener("uncaughtException",c),process._originalNextTick(function(){process.addListener("uncaughtException",c)}),ge}finally{if(!ot||Dt){for(l=!0,at=0;at<Y;++at)(B[at].flags&a)>0&&B[at].after(this,ne[B[at].uid]);l=!1}n=f.pop()}return oe}},process.addListener("uncaughtException",c));var m,g,E;function T(G,B,Y){l=!0;for(var ne=0;ne<Y;++ne){var ye=B[ne];ye.create&&ye.create(ye.data)}return l=!1,function(){f.push(n),n=v(B,n);var Re=G.apply(this,arguments);return n=f.pop(),Re}}function P(G){var B=n.length;if(B===0)return G;for(var Y=n.slice(),ne=0;ne<B;++ne)if(Y[ne].flags>0)return p(G,Y,B);return T(G,Y,B)}function O(G,B){typeof G.create=="function"&&(this.create=G.create,this.flags|=i),typeof G.before=="function"&&(this.before=G.before,this.flags|=u),typeof G.after=="function"&&(this.after=G.after,this.flags|=a),typeof G.error=="function"&&(this.error=G.error,this.flags|=o),this.uid=++s,this.data=B===void 0?null:B}O.prototype.create=void 0,O.prototype.before=void 0,O.prototype.after=void 0,O.prototype.error=void 0,O.prototype.data=void 0,O.prototype.uid=0,O.prototype.flags=0;function A(G,B){if(typeof G!="object"||!G)throw new TypeError("callbacks argument must be an object");return G instanceof O?G:new O(G,B)}function M(G,B){var Y;G instanceof O?Y=G:Y=A(G,B);for(var ne=!1,ye=0;ye<n.length;ye++)if(Y===n[ye]){ne=!0;break}return ne||n.push(Y),Y}function j(G){for(var B=0;B<n.length;B++)if(G===n[B]){n.splice(B,1);break}}process.createAsyncListener=A,process.addAsyncListener=M,process.removeAsyncListener=j,r.exports=P}),zv=N((e,r)=>{"use strict";r.exports=(t,i)=>class extends t{constructor(u){var a,o;super(s);var n=this;try{u.apply(a,o)}catch(l){o[1](l)}return n;function s(l,f){a=this,o=[c,p];function c(v){return i(n,!1),l(v)}function p(v){return i(n,!1),f(v)}}}}}),Wv=N(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=ba(),r=Gv(),t=e.wrap,i=e.massWrap,u=Vv(),a=require("util"),o=r.gte(process.version,"6.0.0"),n=r.gte(process.version,"7.0.0"),s=r.gte(process.version,"8.0.0"),l=r.gte(process.version,"11.0.0"),f=require("net");n&&!f._normalizeArgs?f._normalizeArgs=function(oe){if(oe.length===0)return[{},null];var ge=oe[0],le={};typeof ge=="object"&&ge!==null?le=ge:at(ge)?le.path=ge:(le.port=ge,oe.length>1&&typeof oe[1]=="string"&&(le.host=oe[1]));var Ue=oe[oe.length-1];return typeof Ue!="function"?[le,null]:[le,Ue]}:!n&&!f._normalizeConnectArgs&&(f._normalizeConnectArgs=function(oe){var ge={};function le(X){return(X=Number(X))>=0?X:!1}typeof oe[0]=="object"&&oe[0]!==null?ge=oe[0]:typeof oe[0]=="string"&&le(oe[0])===!1?ge.path=oe[0]:(ge.port=oe[0],typeof oe[1]=="string"&&(ge.host=oe[1]));var Ue=oe[oe.length-1];return typeof Ue=="function"?[ge,Ue]:[ge]}),"_setUpListenHandle"in f.Server.prototype?t(f.Server.prototype,"_setUpListenHandle",c):t(f.Server.prototype,"_listen2",c);function c(oe){return function(){this.on("connection",function(ge){ge._handle&&(ge._handle.onread=u(ge._handle.onread))});try{return oe.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=u(this._handle.onconnection))}}}function p(oe){if(oe&&oe._handle){var ge=oe._handle;ge._originalOnread||(ge._originalOnread=ge.onread),ge.onread=u(ge._originalOnread)}}t(f.Socket.prototype,"connect",function(oe){return function(){var ge;s&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?ge=arguments[0]:ge=n?f._normalizeArgs(arguments):f._normalizeConnectArgs(arguments),ge[1]&&(ge[1]=u(ge[1]));var le=oe.apply(this,ge);return p(this),le}});var v=require("http");t(v.Agent.prototype,"addRequest",function(oe){return function(ge){var le=ge.onSocket;return ge.onSocket=u(function(Ue){return p(Ue),le.apply(this,arguments)}),oe.apply(this,arguments)}});var m=require("child_process");function g(oe){Array.isArray(oe.stdio)&&oe.stdio.forEach(function(ge){ge&&ge._handle&&(ge._handle.onread=u(ge._handle.onread),t(ge._handle,"close",ot))}),oe._handle&&(oe._handle.onexit=u(oe._handle.onexit))}m.ChildProcess?t(m.ChildProcess.prototype,"spawn",function(oe){return function(){var ge=oe.apply(this,arguments);return g(this),ge}}):i(m,["execFile","fork","spawn"],function(oe){return function(){var ge=oe.apply(this,arguments);return g(ge),ge}}),process._fatalException||(process._originalNextTick=process.nextTick);var E=[];process._nextDomainTick&&E.push("_nextDomainTick"),process._tickDomainCallback&&E.push("_tickDomainCallback"),i(process,E,st),t(process,"nextTick",ot);var T=["setTimeout","setInterval"];global.setImmediate&&T.push("setImmediate");var P=require("timers"),O=global.setTimeout===P.setTimeout;i(P,T,ot),O&&i(global,T,ot);var A=require("dns");i(A,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],st),A.resolveNaptr&&t(A,"resolveNaptr",st);var M=require("fs");i(M,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],st),M.lchown&&t(M,"lchown",st),M.lchmod&&t(M,"lchmod",st),M.ftruncate&&t(M,"ftruncate",st);var j;try{j=require("zlib")}catch{}j&&j.Deflate&&j.Deflate.prototype&&(G=Object.getPrototypeOf(j.Deflate.prototype),G._transform?t(G,"_transform",st):G.write&&G.flush&&G.end&&i(G,["write","flush","end"],st));var G,B;try{B=require("crypto")}catch{}B&&(Y=["pbkdf2","randomBytes"],l||Y.push("pseudoRandomBytes"),i(B,Y,st));var Y,ne=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";ne&&(ye=process.addAsyncListener({create:function(){ne=!1}}),global.Promise.resolve(!0).then(function(){ne=!1}),process.removeAsyncListener(ye));var ye;ne&&Re();function Re(){var oe=global.Promise;function ge(se){if(!(this instanceof ge))return oe(se);if(typeof se!="function")return new oe(se);var We,rt,$=new oe(ee);$.__proto__=ge.prototype;try{se.apply(We,rt)}catch(re){rt[1](re)}return $;function ee(re,ve){We=this,rt=[Ve,Ae];function Ve(xe){return Ue($,!1),re(xe)}function Ae(xe){return Ue($,!1),ve(xe)}}}if(a.inherits(ge,oe),t(oe.prototype,"then",Ee),oe.prototype.chain&&t(oe.prototype,"chain",Ee),o)global.Promise=zv()(oe,Ue);else{var le=["all","race","reject","resolve","accept","defer"];le.forEach(function(se){typeof oe[se]=="function"&&(ge[se]=oe[se])}),global.Promise=ge}function Ue(se,We){(!se.__asl_wrapper||We)&&(se.__asl_wrapper=u(X))}function X(se,We,rt,$){var ee;try{return ee=We.call(se,rt),{returnVal:ee,error:!1}}catch(re){return{errorVal:re,error:!0}}finally{ee instanceof oe?$.__asl_wrapper=function(){var re=ee.__asl_wrapper||X;return re.apply(this,arguments)}:Ue($,!0)}}function Ee(se){return function(){var We=this,rt=se.apply(We,Array.prototype.map.call(arguments,$));return rt.__asl_wrapper=function(ee,re,ve,Ve){return We.__asl_wrapper?(We.__asl_wrapper(ee,function(){},null,rt),rt.__asl_wrapper(ee,re,ve,Ve)):X(ee,re,ve,Ve)},rt;function $(ee){return typeof ee!="function"?ee:u(function(re){var ve=(We.__asl_wrapper||X)(this,ee,re,rt);if(ve.error)throw ve.errorVal;return ve.returnVal})}}}}function st(oe){var ge=function(){var le,Ue=arguments.length-1;if(typeof arguments[Ue]=="function"){le=Array(arguments.length);for(var X=0;X<arguments.length-1;X++)le[X]=arguments[X];le[Ue]=u(arguments[Ue])}return oe.apply(this,le||arguments)};switch(oe.length){case 1:return function(le){return arguments.length!==1?ge.apply(this,arguments):(typeof le=="function"&&(le=u(le)),oe.call(this,le))};case 2:return function(le,Ue){return arguments.length!==2?ge.apply(this,arguments):(typeof Ue=="function"&&(Ue=u(Ue)),oe.call(this,le,Ue))};case 3:return function(le,Ue,X){return arguments.length!==3?ge.apply(this,arguments):(typeof X=="function"&&(X=u(X)),oe.call(this,le,Ue,X))};case 4:return function(le,Ue,X,Ee){return arguments.length!==4?ge.apply(this,arguments):(typeof Ee=="function"&&(Ee=u(Ee)),oe.call(this,le,Ue,X,Ee))};case 5:return function(le,Ue,X,Ee,se){return arguments.length!==5?ge.apply(this,arguments):(typeof se=="function"&&(se=u(se)),oe.call(this,le,Ue,X,Ee,se))};case 6:return function(le,Ue,X,Ee,se,We){return arguments.length!==6?ge.apply(this,arguments):(typeof We=="function"&&(We=u(We)),oe.call(this,le,Ue,X,Ee,se,We))};default:return ge}}function ot(oe){var ge=function(){var le;if(typeof arguments[0]=="function"){le=Array(arguments.length),le[0]=u(arguments[0]);for(var Ue=1;Ue<arguments.length;Ue++)le[Ue]=arguments[Ue]}return oe.apply(this,le||arguments)};switch(oe.length){case 1:return function(le){return arguments.length!==1?ge.apply(this,arguments):(typeof le=="function"&&(le=u(le)),oe.call(this,le))};case 2:return function(le,Ue){return arguments.length!==2?ge.apply(this,arguments):(typeof le=="function"&&(le=u(le)),oe.call(this,le,Ue))};case 3:return function(le,Ue,X){return arguments.length!==3?ge.apply(this,arguments):(typeof le=="function"&&(le=u(le)),oe.call(this,le,Ue,X))};case 4:return function(le,Ue,X,Ee){return arguments.length!==4?ge.apply(this,arguments):(typeof le=="function"&&(le=u(le)),oe.call(this,le,Ue,X,Ee))};case 5:return function(le,Ue,X,Ee,se){return arguments.length!==5?ge.apply(this,arguments):(typeof le=="function"&&(le=u(le)),oe.call(this,le,Ue,X,Ee,se))};case 6:return function(le,Ue,X,Ee,se,We){return arguments.length!==6?ge.apply(this,arguments):(typeof le=="function"&&(le=u(le)),oe.call(this,le,Ue,X,Ee,se,We))};default:return ge}}function Dt(oe){return(oe=Number(oe))>=0?oe:!1}function at(oe){return typeof oe=="string"&&Dt(oe)===!1}}),$v=N((e,r)=>{"use strict";var t=require("assert"),i=Sa(),u="cls@contexts",a="error@context";process.addAsyncListener||Wv();function o(c){this.name=c,this.active=null,this._set=[],this.id=null}o.prototype.set=function(c,p){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[c]=p,p},o.prototype.get=function(c){if(this.active)return this.active[c]},o.prototype.createContext=function(){return Object.create(this.active)},o.prototype.run=function(c){var p=this.createContext();this.enter(p);try{return c(p),p}catch(v){throw v&&(v[a]=p),v}finally{this.exit(p)}},o.prototype.runAndReturn=function(c){var p;return this.run(function(v){p=c(v)}),p},o.prototype.bind=function(c,p){p||(this.active?p=this.active:p=this.createContext());var v=this;return function(){v.enter(p);try{return c.apply(this,arguments)}catch(m){throw m&&(m[a]=p),m}finally{v.exit(p)}}},o.prototype.enter=function(c){t.ok(c,"context must be provided for entering"),this._set.push(this.active),this.active=c},o.prototype.exit=function(c){if(t.ok(c,"context must be provided for exiting"),this.active===c){t.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var p=this._set.lastIndexOf(c);t.ok(p>=0,"context not currently entered; can't exit"),t.ok(p,"can't remove top context"),this._set.splice(p,1)},o.prototype.bindEmitter=function(c){t.ok(c.on&&c.addListener&&c.emit,"can only bind real EEs");var p=this,v="context@"+this.name;function m(E){!E||(E[u]||(E[u]=Object.create(null)),E[u][v]={namespace:p,context:p.active})}function g(E){if(!(E&&E[u]))return E;var T=E,P=E[u];return Object.keys(P).forEach(function(O){var A=P[O];T=A.namespace.bind(T,A.context)}),T}i(c,m,g)},o.prototype.fromException=function(c){return c[a]};function n(c){return process.namespaces[c]}function s(c){t.ok(c,"namespace must be given a name!");var p=new o(c);return p.id=process.addAsyncListener({create:function(){return p.active},before:function(v,m){m&&p.enter(m)},after:function(v,m){m&&p.exit(m)},error:function(v){v&&p.exit(v)}}),process.namespaces[c]=p,p}function l(c){var p=n(c);t.ok(p,"can't delete nonexistent namespace!"),t.ok(p.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(p.id),process.namespaces[c]=null}function f(){process.namespaces&&Object.keys(process.namespaces).forEach(function(c){l(c)}),process.namespaces=Object.create(null)}process.namespaces||f(),r.exports={getNamespace:n,createNamespace:s,destroyNamespace:l,reset:f}}),Hn=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var r=mr(),t=Ea(),i=Ki(),u=Xc(),a=tl(),o=function(){function s(){}return s.getCurrentContext=function(){if(!s.enabled)return null;var l=s.session.get(s.CONTEXT_NAME);return l===void 0?null:l},s.generateContextObject=function(l,f,c,p,v,m){return f=f||l,this.enabled?{operation:{name:c,id:l,parentId:f,traceparent:v,tracestate:m},customProperties:new n(p)}:null},s.spanToContextObject=function(l,f,c){var p=new i;return p.traceId=l.traceId,p.spanId=l.spanId,p.traceFlag=i.formatOpenTelemetryTraceFlags(l.traceFlags)||i.DEFAULT_TRACE_FLAG,p.parentId=f,s.generateContextObject(p.traceId,p.parentId,c,null,p)},s.runWithContext=function(l,f){var c;return s.enabled?s.session.bind(f,(c={},c[s.CONTEXT_NAME]=l,c))():f()},s.wrapEmitter=function(l){s.enabled&&s.session.bindEmitter(l)},s.wrapCallback=function(l,f){var c;return s.enabled?s.session.bind(l,f?(c={},c[s.CONTEXT_NAME]=f,c):void 0):l},s.enable=function(l){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}s.hasEverEnabled||(this.forceClsHooked=l,this.hasEverEnabled=!0,typeof this.cls>"u"&&(s.forceClsHooked===!0||s.forceClsHooked===void 0&&s.shouldUseClsHooked()?this.cls=Bv():this.cls=$v()),s.session=this.cls.createNamespace("AI-CLS-Session"),t.registerContextPreservation(function(f){return s.session.bind(f)})),this.enabled=!0}},s.startOperation=function(l,f){var c=l&&l.traceContext||null,p=l&&l.traceId?l:null,v=l&&l.headers;if(p){var m=new i("00-"+p.traceId+"-"+p.spanId+"-01"),g=new u(p.traceState?p.traceState.serialize():null),E=s.generateContextObject(p.traceId,"|"+p.traceId+"."+p.spanId+".",typeof f=="string"?f:"",void 0,m,g);return E}if(c){var m=new i(c.traceparent),g=new u(c.tracestate),T=typeof f=="object"?new a(f):null,E=s.generateContextObject(m.traceId,m.parentId,typeof f=="string"?f:T.getOperationName({}),T&&T.getCorrelationContextHeader()||void 0,m,g);return E}if(v){var m=new i(v.traceparent?v.traceparent.toString():null),g=new u(v.tracestate?v.tracestate.toString():null),T=new a(l),E=s.generateContextObject(m.traceId,m.parentId,T.getOperationName({}),T.getCorrelationContextHeader(),m,g);return E}return r.warn("startOperation was called with invalid arguments",arguments),null},s.disable=function(){this.enabled=!1},s.reset=function(){s.hasEverEnabled&&(s.session=null,s.session=this.cls.createNamespace("AI-CLS-Session"))},s.isNodeVersionCompatible=function(){var l=process.versions.node.split(".");return parseInt(l[0])>3||parseInt(l[0])>2&&parseInt(l[1])>2},s.shouldUseClsHooked=function(){var l=process.versions.node.split(".");return parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=2},s.canUseClsHooked=function(){var l=process.versions.node.split("."),f=parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=0,c=parseInt(l[0])<8||parseInt(l[0])<=8&&parseInt(l[1])<2,p=parseInt(l[0])>4||parseInt(l[0])>=4&&parseInt(l[1])>=7;return!(f&&c)&&p},s.enabled=!1,s.hasEverEnabled=!1,s.forceClsHooked=void 0,s.CONTEXT_NAME="ApplicationInsights-Context",s}();e.CorrelationContextManager=o;var n=function(){function s(l){this.props=[],this.addHeaderData(l)}return s.prototype.addHeaderData=function(l){var f=l?l.split(", "):[];this.props=f.map(function(c){var p=c.split("=");return{key:p[0],value:p[1]}}).concat(this.props)},s.prototype.serializeToHeader=function(){return this.props.map(function(l){return l.key+"="+l.value}).join(", ")},s.prototype.getProperty=function(l){for(var f=0;f<this.props.length;++f){var c=this.props[f];if(c.key===l)return c.value}},s.prototype.setProperty=function(l,f){if(s.bannedCharacters.test(l)||s.bannedCharacters.test(f)){r.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+l+" and value: "+f);return}for(var c=0;c<this.props.length;++c){var p=this.props[c];if(p.key===l){p.value=f;return}}this.props.push({key:l,value:f})},s.bannedCharacters=/[,=]/,s}()}),Kv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var r=xr(),t=ur(),i=[],u=function(n){var s=n.data.message;i.forEach(function(l){s instanceof Error?l.trackException({exception:s}):(s.lastIndexOf(`
`)==s.length-1&&(s=s.substring(0,s.length-1)),l.trackTrace({message:s,severity:n.data.stderr?r.SeverityLevel.Warning:r.SeverityLevel.Information}))})};function a(n,s){n?(i.length===0&&t.channel.subscribe("console",u),i.push(s)):(i=i.filter(function(l){return l!=s}),i.length===0&&t.channel.unsubscribe("console",u))}e.enable=a;function o(){t.channel.unsubscribe("console",u),i=[]}e.dispose=o}),Xv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var r=xr(),t=ur(),i=[],u={10:r.SeverityLevel.Verbose,20:r.SeverityLevel.Verbose,30:r.SeverityLevel.Information,40:r.SeverityLevel.Warning,50:r.SeverityLevel.Error,60:r.SeverityLevel.Critical},a=function(s){var l=s.data.result;i.forEach(function(f){var c=u[s.data.level];l instanceof Error?f.trackException({exception:l}):f.trackTrace({message:l,severity:c})})};function o(s,l){s?(i.length===0&&t.channel.subscribe("bunyan",a),i.push(l)):(i=i.filter(function(f){return f!=l}),i.length===0&&t.channel.unsubscribe("bunyan",a))}e.enable=o;function n(){t.channel.unsubscribe("bunyan",a),i=[]}e.dispose=n}),Qv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var r=xr(),t=ur(),i=[],u={syslog:function(s){var l={emerg:r.SeverityLevel.Critical,alert:r.SeverityLevel.Critical,crit:r.SeverityLevel.Critical,error:r.SeverityLevel.Error,warning:r.SeverityLevel.Warning,notice:r.SeverityLevel.Information,info:r.SeverityLevel.Information,debug:r.SeverityLevel.Verbose};return l[s]===void 0?r.SeverityLevel.Information:l[s]},npm:function(s){var l={error:r.SeverityLevel.Error,warn:r.SeverityLevel.Warning,info:r.SeverityLevel.Information,verbose:r.SeverityLevel.Verbose,debug:r.SeverityLevel.Verbose,silly:r.SeverityLevel.Verbose};return l[s]===void 0?r.SeverityLevel.Information:l[s]},unknown:function(s){return r.SeverityLevel.Information}},a=function(s){var l=s.data.message;i.forEach(function(f){if(l instanceof Error)f.trackException({exception:l,properties:s.data.meta});else{var c=u[s.data.levelKind](s.data.level);f.trackTrace({message:l,severity:c,properties:s.data.meta})}})};function o(s,l){s?(i.length===0&&t.channel.subscribe("winston",a),i.push(l)):(i=i.filter(function(f){return f!=l}),i.length===0&&t.channel.unsubscribe("winston",a))}e.enable=o;function n(){t.channel.unsubscribe("winston",a),i=[]}e.dispose=n}),Yv=N((e,r)=>{"use strict";var t=Ea(),i=function(){function u(a){if(u.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=a,u.INSTANCE=this}return u.prototype.enable=function(a,o){t.IsInitialized&&(Kv().enable(a&&o,this._client),Xv().enable(a,this._client),Qv().enable(a,this._client))},u.prototype.isInitialized=function(){return this._isInitialized},u.prototype.dispose=function(){u.INSTANCE=null,this.enable(!1,!1)},u._methodNames=["debug","info","log","warn","error"],u}();r.exports=i}),Zv=N((e,r)=>{"use strict";var t=function(){function i(u){if(i.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");i.INSTANCE=this,this._client=u;var a=process.versions.node.split(".");i._canUseUncaughtExceptionMonitor=parseInt(a[0])>13||parseInt(a[0])===13&&parseInt(a[1])>=7}return i.prototype.isInitialized=function(){return this._isInitialized},i.prototype.enable=function(u){var a=this;if(u){this._isInitialized=!0;var o=this;if(!this._exceptionListenerHandle){var n=function(s,l,f){f===void 0&&(f=new Error(i._FALLBACK_ERROR_MESSAGE)),a._client.trackException({exception:f}),a._client.flush({isAppCrashing:!0}),s&&l&&process.listeners(l).length===1&&(console.error(f),process.exit(1))};i._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=n.bind(this,!1,void 0),process.on(i.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=n.bind(this,!0,i.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=n.bind(this,!1,void 0),process.on(i.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(i.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(i._canUseUncaughtExceptionMonitor?process.removeListener(i.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(i.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(i.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},i.prototype.dispose=function(){i.INSTANCE=null,this.enable(!1),this._isInitialized=!1},i.INSTANCE=null,i.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",i.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",i.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",i._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",i._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",i._canUseUncaughtExceptionMonitor=!1,i}();r.exports=t}),pn=N(e=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var t;(function(a){a.COMMITTED_BYTES="\\Memory\\Committed Bytes",a.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",a.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",a.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",a.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",a.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",a.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",a.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",a.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(t=e.QuickPulseCounter||(e.QuickPulseCounter={}));var i;(function(a){a.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",a.AVAILABLE_BYTES="\\Memory\\Available Bytes",a.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",a.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",a.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",a.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(i=e.PerformanceCounter||(e.PerformanceCounter={}));var u;(function(a){a.REQUESTS_DURATION="requests/duration",a.DEPENDENCIES_DURATION="dependencies/duration",a.EXCEPTIONS_COUNT="exceptions/count",a.TRACES_COUNT="traces/count"})(u=e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=(r={},r[i.PROCESSOR_TIME]=t.PROCESSOR_TIME,r[i.REQUEST_RATE]=t.REQUEST_RATE,r[i.REQUEST_DURATION]=t.REQUEST_DURATION,r[t.COMMITTED_BYTES]=t.COMMITTED_BYTES,r[t.REQUEST_FAILURE_RATE]=t.REQUEST_FAILURE_RATE,r[t.DEPENDENCY_RATE]=t.DEPENDENCY_RATE,r[t.DEPENDENCY_FAILURE_RATE]=t.DEPENDENCY_FAILURE_RATE,r[t.DEPENDENCY_DURATION]=t.DEPENDENCY_DURATION,r[t.EXCEPTION_RATE]=t.EXCEPTION_RATE,r),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"}),Ta=N((e,r)=>{"use strict";var t=require("os"),i=pn(),u=function(){function a(o,n,s){n===void 0&&(n=6e4),s===void 0&&(s=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,a.INSTANCE||(a.INSTANCE=this),this._isInitialized=!1,this._client=o,this._collectionInterval=n,this._enableLiveMetricsCounters=s}return a.prototype.enable=function(o,n){var s=this;this._isEnabled=o,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),o?this._handle||(this._lastCpus=t.cpus(),this._lastRequests={totalRequestCount:a._totalRequestCount,totalFailedRequestCount:a._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:a._totalDependencyCount,totalFailedDependencyCount:a._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:a._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=n||this._collectionInterval,this._handle=setInterval(function(){return s.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},a.countRequest=function(o,n){var s;if(a.isEnabled()){if(typeof o=="string")s=+new Date("1970-01-01T"+o+"Z");else if(typeof o=="number")s=o;else return;a._intervalRequestExecutionTime+=s,n===!1&&a._totalFailedRequestCount++,a._totalRequestCount++}},a.countException=function(){a._totalExceptionCount++},a.countDependency=function(o,n){var s;if(a.isEnabled()){if(typeof o=="string")s=+new Date("1970-01-01T"+o+"Z");else if(typeof o=="number")s=o;else return;a._intervalDependencyExecutionTime+=s,n===!1&&a._totalFailedDependencyCount++,a._totalDependencyCount++}},a.prototype.isInitialized=function(){return this._isInitialized},a.isEnabled=function(){return a.INSTANCE&&a.INSTANCE._isEnabled},a.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},a.prototype._trackCpu=function(){var o=t.cpus();if(o&&o.length&&this._lastCpus&&o.length===this._lastCpus.length){for(var n=0,s=0,l=0,f=0,c=0,p=0;!!o&&p<o.length;p++){var v=o[p],m=this._lastCpus[p],g="% cpu("+p+") ",E=v.model,T=v.speed,P=v.times,O=m.times,A=P.user-O.user||0;n+=A;var M=P.sys-O.sys||0;s+=M;var j=P.nice-O.nice||0;l+=j;var G=P.idle-O.idle||0;f+=G;var B=P.irq-O.irq||0;c+=B}var Y=void 0;if(typeof process.cpuUsage=="function"){var ne=process.cpuUsage(),ye=process.hrtime(),Re=ne.user-this._lastAppCpuUsage.user+(ne.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var st=(ye[0]-this._lastHrtime[0])*1e6+(ye[1]-this._lastHrtime[1])/1e3||0;Y=100*Re/(st*o.length)}this._lastAppCpuUsage=ne,this._lastHrtime=ye}var ot=n+s+l+f+c||1;this._client.trackMetric({name:i.PerformanceCounter.PROCESSOR_TIME,value:(ot-f)/ot*100}),this._client.trackMetric({name:i.PerformanceCounter.PROCESS_TIME,value:Y||n/ot*100})}this._lastCpus=o},a.prototype._trackMemory=function(){var o=t.freemem(),n=process.memoryUsage().rss,s=t.totalmem()-o;this._client.trackMetric({name:i.PerformanceCounter.PRIVATE_BYTES,value:n}),this._client.trackMetric({name:i.PerformanceCounter.AVAILABLE_BYTES,value:o}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:i.QuickPulseCounter.COMMITTED_BYTES,value:s})},a.prototype._trackNetwork=function(){var o=this._lastRequests,n={totalRequestCount:a._totalRequestCount,totalFailedRequestCount:a._totalFailedRequestCount,time:+new Date},s=n.totalRequestCount-o.totalRequestCount||0,l=n.totalFailedRequestCount-o.totalFailedRequestCount||0,f=n.time-o.time,c=f/1e3,p=(a._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/s||0;if(this._lastIntervalRequestExecutionTime=a._intervalRequestExecutionTime,f>0){var v=s/c,m=l/c;this._client.trackMetric({name:i.PerformanceCounter.REQUEST_RATE,value:v}),(!this._enableLiveMetricsCounters||s>0)&&this._client.trackMetric({name:i.PerformanceCounter.REQUEST_DURATION,value:p}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:i.QuickPulseCounter.REQUEST_FAILURE_RATE,value:m})}this._lastRequests=n},a.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var o=this._lastDependencies,n={totalDependencyCount:a._totalDependencyCount,totalFailedDependencyCount:a._totalFailedDependencyCount,time:+new Date},s=n.totalDependencyCount-o.totalDependencyCount||0,l=n.totalFailedDependencyCount-o.totalFailedDependencyCount||0,f=n.time-o.time,c=f/1e3,p=(a._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/s||0;if(this._lastIntervalDependencyExecutionTime=a._intervalDependencyExecutionTime,f>0){var v=s/c,m=l/c;this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_RATE,value:v}),this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:m}),(!this._enableLiveMetricsCounters||s>0)&&this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_DURATION,value:p})}this._lastDependencies=n}},a.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var o=this._lastExceptions,n={totalExceptionCount:a._totalExceptionCount,time:+new Date},s=n.totalExceptionCount-o.totalExceptionCount||0,l=n.time-o.time,f=l/1e3;if(l>0){var c=s/f;this._client.trackMetric({name:i.QuickPulseCounter.EXCEPTION_RATE,value:c})}this._lastExceptions=n}},a.prototype.dispose=function(){a.INSTANCE=null,this.enable(!1),this._isInitialized=!1},a._totalRequestCount=0,a._totalFailedRequestCount=0,a._totalDependencyCount=0,a._totalFailedDependencyCount=0,a._totalExceptionCount=0,a._intervalDependencyExecutionTime=0,a._intervalRequestExecutionTime=0,a}();r.exports=u}),Jv=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;var r=function(){function t(i){this.dimensions=i,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return t}();e.AggregatedMetricCounter=r}),em=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),ol=N((e,r)=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(n){for(var s,l=1,f=arguments.length;l<f;l++){s=arguments[l];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c])}return n},t.apply(this,arguments)},i=pn(),u=Jv(),a=em(),o=function(){function n(s,l){l===void 0&&(l=6e4),n.INSTANCE||(n.INSTANCE=this),this._isInitialized=!1,n._dependencyCountersCollection=[],n._requestCountersCollection=[],n._exceptionCountersCollection=[],n._traceCountersCollection=[],this._client=s,this._collectionInterval=l}return n.prototype.enable=function(s,l){var f=this;this._isEnabled=s,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),s?this._handle||(this._collectionInterval=l||this._collectionInterval,this._handle=setInterval(function(){return f.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},n.countException=function(s){if(n.isEnabled()){var l=n._getAggregatedCounter(s,this._exceptionCountersCollection);l.totalCount++}},n.countTrace=function(s){if(n.isEnabled()){var l=n._getAggregatedCounter(s,this._traceCountersCollection);l.totalCount++}},n.countRequest=function(s,l){if(n.isEnabled()){var f,c=n._getAggregatedCounter(l,this._requestCountersCollection);if(typeof s=="string")f=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")f=s;else return;c.intervalExecutionTime+=f,c.totalCount++}},n.countDependency=function(s,l){if(n.isEnabled()){var f=n._getAggregatedCounter(l,this._dependencyCountersCollection),c;if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;f.intervalExecutionTime+=c,f.totalCount++}},n.prototype.isInitialized=function(){return this._isInitialized},n.isEnabled=function(){return n.INSTANCE&&n.INSTANCE._isEnabled},n.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},n._getAggregatedCounter=function(s,l){for(var f=!1,c=0;c<l.length;c++){if(s===l[c].dimensions)return l[c];if(Object.keys(s).length===Object.keys(l[c].dimensions).length){for(var p in s)if(s[p]!=l[c].dimensions[p]){f=!0;break}if(!f)return l[c];f=!1}}var v=new u.AggregatedMetricCounter(s);return l.push(v),v},n.prototype._trackRequestMetrics=function(){for(var s=0;s<n._requestCountersCollection.length;s++){var l=n._requestCountersCollection[s];l.time=+new Date;var f=l.totalCount-l.lastTotalCount||0,c=l.time-l.lastTime,p=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/f||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,c>0&&f>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:l.dimensions,value:p,count:f,aggregationInterval:c,metricType:i.MetricId.REQUESTS_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},n.prototype._trackDependencyMetrics=function(){for(var s=0;s<n._dependencyCountersCollection.length;s++){var l=n._dependencyCountersCollection[s];l.time=+new Date;var f=l.totalCount-l.lastTotalCount||0,c=l.time-l.lastTime,p=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/f||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,c>0&&f>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:l.dimensions,value:p,count:f,aggregationInterval:c,metricType:i.MetricId.DEPENDENCIES_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},n.prototype._trackExceptionMetrics=function(){for(var s=0;s<n._exceptionCountersCollection.length;s++){var l=n._exceptionCountersCollection[s],f=l.totalCount-l.lastTotalCount||0,c=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:l.dimensions,value:f,count:f,aggregationInterval:c,metricType:i.MetricId.EXCEPTIONS_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},n.prototype._trackTraceMetrics=function(){for(var s=0;s<n._traceCountersCollection.length;s++){var l=n._traceCountersCollection[s],f=l.totalCount-l.lastTotalCount||0,c=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:l.dimensions,value:f,count:f,aggregationInterval:c,metricType:i.MetricId.TRACES_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},n.prototype._trackPreAggregatedMetric=function(s){var l={};for(var f in s.dimensions)l[a.PreaggregatedMetricPropertyNames[f]]=s.dimensions[f];l=t(t({},l),{"_MS.MetricId":s.metricType,"_MS.AggregationIntervalMs":String(s.aggregationInterval),"_MS.IsAutocollected":"True"});var c={name:s.name,value:s.value,count:s.count,properties:l,kind:"Aggregation"};this._client.trackMetric(c)},n.prototype.dispose=function(){n.INSTANCE=null,this.enable(!1),this._isInitialized=!1},n}();r.exports=o}),Xi=N((e,r)=>{"use strict";var t=require("os"),i=require("fs"),u=require("path"),a=xr(),o=mr(),n=function(){function s(l){this.keys=new a.ContextTagKeys,this.tags={},this._loadApplicationContext(l),this._loadDeviceContext(),this._loadInternalContext()}return s.prototype._loadApplicationContext=function(l){if(l=l||u.resolve(__dirname,"../../../../package.json"),!s.appVersion[l]){s.appVersion[l]="unknown";try{var f=JSON.parse(i.readFileSync(l,"utf8"));f&&typeof f.version=="string"&&(s.appVersion[l]=f.version)}catch(c){o.info("unable to read app version: ",c)}}this.tags[this.keys.applicationVersion]=s.appVersion[l]},s.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=t&&t.hostname(),this.tags[this.keys.deviceOSVersion]=t&&t.type()+" "+t.release(),this.tags[this.keys.cloudRole]=s.DefaultRoleName,this.tags["ai.device.osArchitecture"]=t&&t.arch(),this.tags["ai.device.osPlatform"]=t&&t.platform()},s.prototype._loadInternalContext=function(){var l=u.resolve(__dirname,"../../package.json");if(!s.sdkVersion){s.sdkVersion="unknown";try{var f=JSON.parse(i.readFileSync(l,"utf8"));f&&typeof f.version=="string"&&(s.sdkVersion=f.version)}catch(c){o.info("unable to read app version: ",c)}}this.tags[this.keys.internalSdkVersion]="node:"+s.sdkVersion},s.DefaultRoleName="Web",s.appVersion={},s.sdkVersion=null,s}();r.exports=n}),tm=N((e,r)=>{"use strict";var t=e&&e.__extends||function(){var f=function(c,p){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(v[g]=m[g])},f(c,p)};return function(c,p){f(c,p);function v(){this.constructor=c}c.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)}}(),i=require("url"),u=xr(),a=Ur(),o=fi(),n=el(),s=Un(),l=function(f){t(c,f);function c(p,v){var m=f.call(this)||this;return v&&v.method&&p&&(m.method=v.method,m.url=c._getUrlFromRequestOptions(p,v),m.startTime=+new Date),m}return c.prototype.onError=function(p){this._setStatus(void 0,p)},c.prototype.onResponse=function(p){this._setStatus(p.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(p,o.requestContextTargetKey)},c.prototype.getDependencyTelemetry=function(p,v){var m=i.parse(this.url);m.search=void 0,m.hash=void 0;var g=this.method.toUpperCase()+" "+m.pathname,E=u.RemoteDependencyDataConstants.TYPE_HTTP,T=m.hostname;m.port&&(T+=":"+m.port),this.correlationId?(E=u.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==s.correlationIdPrefix&&(T+=" | "+this.correlationId)):E=u.RemoteDependencyDataConstants.TYPE_HTTP;var P={id:v,name:g,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:E,target:T};if(p&&p.time?P.time=p.time:this.startTime&&(P.time=new Date(this.startTime)),p){for(var O in p)P[O]||(P[O]=p[O]);if(p.properties)for(var O in p.properties)P.properties[O]=p.properties[O]}return P},c._getUrlFromRequestOptions=function(p,v){if(typeof p=="string")if(p.indexOf("http://")===0||p.indexOf("https://")===0)p=i.parse(p);else{var m=i.parse(p);m.host==="443"?p=i.parse("https://"+p):p=i.parse("http://"+p)}else{if(p&&typeof i.URL=="function"&&p instanceof i.URL)return i.format(p);var g=p;p={},g&&Object.keys(g).forEach(function(P){p[P]=g[P]})}if(p.path){var E=i.parse(p.path);p.pathname=E.pathname,p.search=E.search}if(p.host&&p.port){var T=i.parse("http://"+p.host);!T.port&&p.port&&(p.hostname=p.host,delete p.host)}return p.protocol=p.protocol||v.agent&&v.agent.protocol||v.protocol||void 0,p.hostname=p.hostname||"localhost",i.format(p)},c}(n);r.exports=l}),rm=N(e=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(o){for(var n,s=1,l=arguments.length;s<l;s++){n=arguments[s];for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&(o[f]=n[f])}return o},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var t=Jt(),i=pn();function u(o){var n=r({},o);return Object.keys(i.SpanAttribute).forEach(function(s){delete n[s]}),n}function a(o){var n="|"+o.spanContext().traceId+"."+o.spanContext().spanId+".",s=Math.round(o._duration[0]*1e3+o._duration[1]/1e6),l=o.attributes["peer.address"]?o.attributes["peer.address"].toString():"",f=o.attributes.component?o.attributes.component.toString():"",c=f.toUpperCase()===i.DependencyTypeName.Http||!!o.attributes[i.SpanAttribute.HttpUrl],p=f.toLowerCase()===i.DependencyTypeName.Grpc;if(c){var v=o.attributes[i.SpanAttribute.HttpMethod]||"GET",m=new URL(o.attributes[i.SpanAttribute.HttpUrl].toString()),g=o.attributes[i.SpanAttribute.HttpHost]||m.host,E=o.attributes[i.SpanAttribute.HttpPort]||m.port||null,T=m.pathname||"/",P=v+" "+T,O=i.DependencyTypeName.Http,A=E?(g+":"+E).toString():g.toString(),M=m.toString(),j=o.attributes[i.SpanAttribute.HttpStatusCode]||o.status.code||0,G=j<400;return{id:n,name:P,dependencyTypeName:O,target:A,data:M,success:G,duration:s,url:M,resultCode:String(j),properties:u(o.attributes)}}else if(p){var v=o.attributes[i.SpanAttribute.GrpcMethod]||"rpc",B=o.attributes[i.SpanAttribute.GrpcService],Y=B?v+" "+B:o.name;return{id:n,duration:s,name:Y,target:B.toString(),data:B.toString()||Y,url:B.toString()||Y,dependencyTypeName:i.DependencyTypeName.Grpc,resultCode:String(o.status.code||0),success:o.status.code===0,properties:u(o.attributes)}}else{var ne=o.name,ye=o.links&&o.links.map(function(Re){return{operation_Id:Re.context.traceId,id:Re.context.spanId}});return{id:n,duration:s,name:ne,target:l,data:l||ne,url:l||ne,dependencyTypeName:o.kind===t.SpanKind.INTERNAL?i.DependencyTypeName.InProc:f||o.name,resultCode:String(o.status.code||0),success:o.status.code===0,properties:r(r({},u(o.attributes)),{"_MS.links":ye||void 0})}}}e.spanToTelemetryContract=a}),nm=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var r=Jt(),t=ur(),i=Ki(),u=rm(),a=bc(),o=[],n=function(l){var f=l.data,c=u.spanToTelemetryContract(f),p=f.spanContext(),v=new i;v.traceId=p.traceId,v.spanId=p.spanId,v.traceFlag=i.formatOpenTelemetryTraceFlags(p.traceFlags),v.parentId=f.parentSpanId?"|"+p.traceId+"."+f.parentSpanId+".":null,a.AsyncScopeManager.with(f,function(){o.forEach(function(m){f.kind===r.SpanKind.SERVER?m.trackRequest(c):(f.kind===r.SpanKind.CLIENT||f.kind===r.SpanKind.INTERNAL)&&m.trackDependency(c)})})};e.subscriber=n;function s(l,f){l?(o.length===0&&t.channel.subscribe("azure-coretracing",e.subscriber),o.push(f)):(o=o.filter(function(c){return c!=f}),o.length===0&&t.channel.unsubscribe("azure-coretracing",e.subscriber))}e.enable=s}),im=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var r=ur(),t=[],i=function(a){a.data.event.commandName!=="ismaster"&&t.forEach(function(o){var n=a.data.startedData&&a.data.startedData.databaseName||"Unknown database";o.trackDependency({target:n,data:a.data.event.commandName,name:a.data.event.commandName,duration:a.data.event.duration,success:a.data.succeeded,resultCode:a.data.succeeded?"0":"1",time:a.data.startedData.time,dependencyTypeName:"mongodb"})})};e.subscriber=i;function u(a,o){a?(t.length===0&&r.channel.subscribe("mongodb",e.subscriber),t.push(o)):(t=t.filter(function(n){return n!=o}),t.length===0&&r.channel.unsubscribe("mongodb",e.subscriber))}e.enable=u}),om=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var r=ur(),t=[],i=function(a){t.forEach(function(o){var n=a.data.query||{},s=n.sql||"Unknown query",l=!a.data.err,f=n._connection||{},c=f.config||{},p=c.socketPath?c.socketPath:(c.host||"localhost")+":"+c.port;o.trackDependency({target:p,data:s,name:s,duration:a.data.duration,success:l,resultCode:l?"0":"1",time:a.data.time,dependencyTypeName:"mysql"})})};e.subscriber=i;function u(a,o){a?(t.length===0&&r.channel.subscribe("mysql",e.subscriber),t.push(o)):(t=t.filter(function(n){return n!=o}),t.length===0&&r.channel.unsubscribe("mysql",e.subscriber))}e.enable=u}),am=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var r=ur(),t=[],i=function(a){t.forEach(function(o){a.data.commandObj.command!=="info"&&o.trackDependency({target:a.data.address,name:a.data.commandObj.command,data:a.data.commandObj.command,duration:a.data.duration,success:!a.data.err,resultCode:a.data.err?"1":"0",time:a.data.time,dependencyTypeName:"redis"})})};e.subscriber=i;function u(a,o){a?(t.length===0&&r.channel.subscribe("redis",e.subscriber),t.push(o)):(t=t.filter(function(n){return n!=o}),t.length===0&&r.channel.unsubscribe("redis",e.subscriber))}e.enable=u}),sm=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var r=ur(),t=[],i=function(a){t.forEach(function(o){var n=a.data.query,s=n.preparable&&n.preparable.text||n.plan||n.text||"unknown query",l=!a.data.error,f=a.data.database.host+":"+a.data.database.port;o.trackDependency({target:f,data:s,name:s,duration:a.data.duration,success:l,resultCode:l?"0":"1",time:a.data.time,dependencyTypeName:"postgres"})})};e.subscriber=i;function u(a,o){a?(t.length===0&&r.channel.subscribe("postgres",e.subscriber),t.push(o)):(t=t.filter(function(n){return n!=o}),t.length===0&&r.channel.unsubscribe("postgres",e.subscriber))}e.enable=u}),di=N((e,r)=>{"use strict";var t=e&&e.__spreadArrays||function(){for(var m=0,g=0,E=arguments.length;g<E;g++)m+=arguments[g].length;for(var T=Array(m),P=0,g=0;g<E;g++)for(var O=arguments[g],A=0,M=O.length;A<M;A++,P++)T[P]=O[A];return T},i=require("http"),u=require("https"),a=mr(),o=Ur(),n=fi(),s=tm(),l=Hn(),f=Un(),c=Ki(),p=Ea(),v=function(){function m(g){if(m.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");m.INSTANCE=this,this._client=g}return m.prototype.enable=function(g){this._isEnabled=g,this._isEnabled&&!this._isInitialized&&this._initialize(),p.IsInitialized&&(nm().enable(!0,this._client),im().enable(g,this._client),om().enable(g,this._client),am().enable(g,this._client),sm().enable(g,this._client))},m.prototype.isInitialized=function(){return this._isInitialized},m.prototype._initialize=function(){var g=this;this._isInitialized=!0;var E=i.request,T=u.request,P=function(O,A){var M=!A[m.disableCollectionRequestOption]&&!O[m.alreadyAutoCollectedFlag];A.headers&&A.headers["user-agent"]&&A.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(M=!1),O[m.alreadyAutoCollectedFlag]=!0,O&&A&&M&&(l.CorrelationContextManager.wrapEmitter(O),m.trackRequest(g._client,{options:A,request:O}))};i.request=function(O){for(var A=[],M=1;M<arguments.length;M++)A[M-1]=arguments[M];var j=E.call.apply(E,t([i,O],A));return P(j,O),j},u.request=function(O){for(var A=[],M=1;M<arguments.length;M++)A[M-1]=arguments[M];var j=T.call.apply(T,t([u,O],A));return P(j,O),j},i.get=function(O){for(var A,M=[],j=1;j<arguments.length;j++)M[j-1]=arguments[j];var G=(A=i.request).call.apply(A,t([i,O],M));return G.end(),G},u.get=function(O){for(var A,M=[],j=1;j<arguments.length;j++)M[j-1]=arguments[j];var G=(A=u.request).call.apply(A,t([u,O],M));return G.end(),G}},m.trackRequest=function(g,E){if(!E.options||!E.request||!g){a.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!E.options,!E.request,!g);return}var T=new s(E.options,E.request),P=l.CorrelationContextManager.getCurrentContext(),O,A;if(P&&P.operation&&P.operation.traceparent&&c.isValidTraceId(P.operation.traceparent.traceId))P.operation.traceparent.updateSpanId(),O=P.operation.traceparent.getBackCompatRequestId();else if(f.w3cEnabled){var M=new c;A=M.toString(),O=M.getBackCompatRequestId()}else O=P&&P.operation&&P.operation.parentId+m.requestNumber+++".";if(o.canIncludeCorrelationHeader(g,T.getUrl())&&E.request.getHeader&&E.request.setHeader&&g.config&&g.config.correlationId){var j=E.request.getHeader(n.requestContextHeader);try{o.safeIncludeCorrelationHeader(g,E.request,j)}catch(Y){a.warn("Request-Context header could not be set. Correlation of requests may be lost",Y)}if(P&&P.operation)try{if(E.request.setHeader(n.requestIdHeader,O),g.config.ignoreLegacyHeaders||(E.request.setHeader(n.parentIdHeader,P.operation.id),E.request.setHeader(n.rootIdHeader,O)),A||P.operation.traceparent)E.request.setHeader(n.traceparentHeader,A||P.operation.traceparent.toString());else if(f.w3cEnabled){var M=new c().toString();E.request.setHeader(n.traceparentHeader,M)}if(P.operation.tracestate){var G=P.operation.tracestate.toString();G&&E.request.setHeader(n.traceStateHeader,G)}var B=P.customProperties.serializeToHeader();B&&E.request.setHeader(n.correlationContextHeader,B)}catch(Y){a.warn("Correlation headers could not be set. Correlation of requests may be lost.",Y)}}E.request.on&&(E.request.on("response",function(Y){T.onResponse(Y);var ne=T.getDependencyTelemetry(E,O);ne.contextObjects=ne.contextObjects||{},ne.contextObjects["http.RequestOptions"]=E.options,ne.contextObjects["http.ClientRequest"]=E.request,ne.contextObjects["http.ClientResponse"]=Y,g.trackDependency(ne)}),E.request.on("error",function(Y){T.onError(Y);var ne=T.getDependencyTelemetry(E,O);ne.contextObjects=ne.contextObjects||{},ne.contextObjects["http.RequestOptions"]=E.options,ne.contextObjects["http.ClientRequest"]=E.request,ne.contextObjects.Error=Y,g.trackDependency(ne)}),E.request.on("abort",function(){T.onError(new Error);var Y=T.getDependencyTelemetry(E,O);Y.contextObjects=Y.contextObjects||{},Y.contextObjects["http.RequestOptions"]=E.options,Y.contextObjects["http.ClientRequest"]=E.request,g.trackDependency(Y)}))},m.prototype.dispose=function(){m.INSTANCE=null,this.enable(!1),this._isInitialized=!1},m.disableCollectionRequestOption="disableAppInsightsAutoCollection",m.requestNumber=1,m.alreadyAutoCollectedFlag="_appInsightsAutoCollected",m}();r.exports=v}),um=N((e,r)=>{"use strict";var t=require("os"),i=pn(),u=Ur(),a=Xi(),o=di(),n="http://169.254.169.254/metadata/instance/compute",s="api-version=2017-12-01",l="format=json",f="ENETUNREACH",c=function(){function p(v){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",p.INSTANCE||(p.INSTANCE=this),this._isInitialized=!1,this._client=v}return p.prototype.enable=function(v,m){var g=this;this._isEnabled=v,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),v?this._handle||(this._handle=setInterval(function(){return g.trackHeartBeat(m,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},p.prototype.isInitialized=function(){return this._isInitialized},p.isEnabled=function(){return p.INSTANCE&&p.INSTANCE._isEnabled},p.prototype.trackHeartBeat=function(v,m){var g=this,E=!1,T={},P=a.sdkVersion;T.sdk=P,T.osType=t.type(),process.env.WEBSITE_SITE_NAME?(T.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",T.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",T.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?T.azfunction_appId=process.env.WEBSITE_HOSTNAME:v&&(this._isVM===void 0?(E=!0,this._getAzureComputeMetadata(v,function(){g._isVM&&Object.keys(g._vmData).length>0&&(T.azInst_vmId=g._vmData.vmId||"",T.azInst_subscriptionId=g._vmData.subscriptionId||"",T.azInst_osType=g._vmData.osType||"",g._azInst_vmId=g._vmData.vmId||"",g._azInst_subscriptionId=g._vmData.subscriptionId||"",g._azInst_osType=g._vmData.osType||""),g._client.trackMetric({name:i.HeartBeatMetricName,value:0,properties:T}),m()})):this._isVM&&(T.azInst_vmId=this._azInst_vmId,T.azInst_subscriptionId=this._azInst_subscriptionId,T.azInst_osType=this._azInst_osType)),E||(this._client.trackMetric({name:i.HeartBeatMetricName,value:0,properties:T}),m())},p.prototype.dispose=function(){p.INSTANCE=null,this.enable(!1),this._isInitialized=!1},p.prototype._getAzureComputeMetadata=function(v,m){var g,E=this,T=n+"?"+s+"&"+l,P=(g={method:"GET"},g[o.disableCollectionRequestOption]=!0,g.headers={Metadata:"True"},g),O=u.makeRequest(v,T,P,function(A){if(A.statusCode===200){E._isVM=!0;var M="";A.on("data",function(j){M+=j}),A.on("end",function(){E._vmData=E._isJSON(M)?JSON.parse(M):{},m()})}else m()});O&&(O.on("error",function(A){A&&A.message&&A.message.indexOf(f)>-1&&(E._isVM=!1),m()}),O.end())},p.prototype._isJSON=function(v){try{return JSON.parse(v)&&!!v}catch{return!1}},p}();r.exports=c}),al=N((e,r)=>{"use strict";var t=require("http"),i=require("https"),u=mr(),a=Ur(),o=fi(),n=tl(),s=Hn(),l=Ta(),f=function(){function c(p){if(c.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");c.INSTANCE=this,this._client=p}return c.prototype.enable=function(p){this._isEnabled=p,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},c.prototype.useAutoCorrelation=function(p,v){p&&!this._isAutoCorrelating?s.CorrelationContextManager.enable(v):!p&&this._isAutoCorrelating&&s.CorrelationContextManager.disable(),this._isAutoCorrelating=p},c.prototype.isInitialized=function(){return this._isInitialized},c.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},c.prototype._generateCorrelationContext=function(p){if(this._isAutoCorrelating)return s.CorrelationContextManager.generateContextObject(p.getOperationId(this._client.context.tags),p.getRequestId(),p.getOperationName(this._client.context.tags),p.getCorrelationContextHeader(),p.getTraceparent(),p.getTracestate())},c.prototype._initialize=function(){var p=this;this._isInitialized=!0;var v=function(T){if(T){if(typeof T!="function")throw new Error("onRequest handler must be a function");return function(P,O){s.CorrelationContextManager.wrapEmitter(P),s.CorrelationContextManager.wrapEmitter(O);var A=P&&!P[c.alreadyAutoCollectedFlag];if(P&&A){var M=new n(P),j=p._generateCorrelationContext(M);s.CorrelationContextManager.runWithContext(j,function(){p._isEnabled&&(P[c.alreadyAutoCollectedFlag]=!0,c.trackRequest(p._client,{request:P,response:O},M)),typeof T=="function"&&T(P,O)})}else typeof T=="function"&&T(P,O)}}},m=function(T){var P=T.addListener.bind(T);T.addListener=function(O,A){switch(O){case"request":case"checkContinue":return P(O,v(A));default:return P(O,A)}},T.on=T.addListener},g=t.createServer;t.createServer=function(T,P){if(P&&typeof P=="function"){var O=g(T,v(P));return m(O),O}else{var O=g(v(T));return m(O),O}};var E=i.createServer;i.createServer=function(T,P){var O=E(T,v(P));return m(O),O}},c.trackRequestSync=function(p,v){if(!v.request||!v.response||!p){u.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!v.request,!v.response,!p);return}c.addResponseCorrelationIdHeader(p,v.response);var m=s.CorrelationContextManager.getCurrentContext(),g=new n(v.request,m&&m.operation.parentId);m&&(m.operation.id=g.getOperationId(p.context.tags)||m.operation.id,m.operation.name=g.getOperationName(p.context.tags)||m.operation.name,m.operation.parentId=g.getRequestId()||m.operation.parentId,m.customProperties.addHeaderData(g.getCorrelationContextHeader())),c.endRequest(p,g,v,v.duration,v.error)},c.trackRequest=function(p,v,m){if(!v.request||!v.response||!p){u.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!v.request,!v.response,!p);return}var g=s.CorrelationContextManager.getCurrentContext(),E=m||new n(v.request,g&&g.operation.parentId);a.canIncludeCorrelationHeader(p,E.getUrl())&&c.addResponseCorrelationIdHeader(p,v.response),g&&!m&&(g.operation.id=E.getOperationId(p.context.tags)||g.operation.id,g.operation.name=E.getOperationName(p.context.tags)||g.operation.name,g.operation.parentId=E.getOperationParentId(p.context.tags)||g.operation.parentId,g.customProperties.addHeaderData(E.getCorrelationContextHeader())),v.response.once&&v.response.once("finish",function(){c.endRequest(p,E,v,null,null)}),v.request.on&&v.request.on("error",function(T){c.endRequest(p,E,v,null,T)}),v.request.on&&v.request.on("aborted",function(){var T="The request has been aborted and the network socket has closed.";c.endRequest(p,E,v,null,T)})},c.addResponseCorrelationIdHeader=function(p,v){if(p.config&&p.config.correlationId&&v.getHeader&&v.setHeader&&!v.headersSent){var m=v.getHeader(o.requestContextHeader);a.safeIncludeCorrelationHeader(p,v,m)}},c.endRequest=function(p,v,m,g,E){E?v.onError(E,g):v.onResponse(m.response,g);var T=v.getRequestTelemetry(m);if(T.tagOverrides=v.getRequestTags(p.context.tags),m.tagOverrides)for(var P in m.tagOverrides)T.tagOverrides[P]=m.tagOverrides[P];var O=v.getLegacyRootId();O&&(T.properties.ai_legacyRootId=O),T.contextObjects=T.contextObjects||{},T.contextObjects["http.ServerRequest"]=m.request,T.contextObjects["http.ServerResponse"]=m.response,p.trackRequest(T)},c.prototype.dispose=function(){c.INSTANCE=null,this.enable(!1),this._isInitialized=!1,s.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},c.alreadyAutoCollectedFlag="_appInsightsAutoCollected",c}();r.exports=f}),cm=N((e,r)=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(f){for(var c,p=1,v=arguments.length;p<v;p++){c=arguments[p];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(f[m]=c[m])}return f},t.apply(this,arguments)},i=require("os"),u=xr(),a=pn(),o=Ur(),n=mr(),s=o.w3cTraceId(),l=function(){function f(){}return f.createQuickPulseEnvelope=function(c,p,v,m){var g=i&&typeof i.hostname=="function"&&i.hostname()||"Unknown",E=m.tags&&m.keys&&m.keys.cloudRoleInstance&&m.tags[m.keys.cloudRoleInstance]||g,T=m.tags&&m.keys&&m.keys.cloudRole&&m.tags[m.keys.cloudRole]||null,P={Documents:p.length>0?p:null,InstrumentationKey:v.instrumentationKey||"",Metrics:c.length>0?c:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:m.tags[m.keys.internalSdkVersion],StreamId:s,MachineName:g,Instance:E,RoleName:T};return P},f.createQuickPulseMetric=function(c){var p;return p={Name:c.name,Value:c.value,Weight:c.count||1},p},f.telemetryEnvelopeToQuickPulseDocument=function(c){switch(c.data.baseType){case u.TelemetryTypeString.Event:return f.createQuickPulseEventDocument(c);case u.TelemetryTypeString.Exception:return f.createQuickPulseExceptionDocument(c);case u.TelemetryTypeString.Trace:return f.createQuickPulseTraceDocument(c);case u.TelemetryTypeString.Dependency:return f.createQuickPulseDependencyDocument(c);case u.TelemetryTypeString.Request:return f.createQuickPulseRequestDocument(c)}return null},f.createQuickPulseEventDocument=function(c){var p=f.createQuickPulseDocument(c),v=c.data.baseData.name,m=t(t({},p),{Name:v});return m},f.createQuickPulseTraceDocument=function(c){var p=f.createQuickPulseDocument(c),v=c.data.baseData.severityLevel||0,m=t(t({},p),{Message:c.data.baseData.message,SeverityLevel:u.SeverityLevel[v]});return m},f.createQuickPulseExceptionDocument=function(c){var p=f.createQuickPulseDocument(c),v=c.data.baseData.exceptions,m="",g="",E="";v&&v.length>0&&(v[0].parsedStack&&v[0].parsedStack.length>0?v[0].parsedStack.forEach(function(P){m+=P.assembly+`
`}):v[0].stack&&v[0].stack.length>0&&(m=v[0].stack),g=v[0].message,E=v[0].typeName);var T=t(t({},p),{Exception:m,ExceptionMessage:g,ExceptionType:E});return T},f.createQuickPulseRequestDocument=function(c){var p=f.createQuickPulseDocument(c),v=c.data.baseData,m=t(t({},p),{Name:v.name,Success:v.success,Duration:v.duration,ResponseCode:v.responseCode,OperationName:v.name});return m},f.createQuickPulseDependencyDocument=function(c){var p=f.createQuickPulseDocument(c),v=c.data.baseData,m=t(t({},p),{Name:v.name,Target:v.target,Success:v.success,Duration:v.duration,ResultCode:v.resultCode,CommandName:v.data,OperationName:p.OperationId,DependencyTypeName:v.type});return m},f.createQuickPulseDocument=function(c){var p,v,m,g;c.data.baseType?(v=a.TelemetryTypeStringToQuickPulseType[c.data.baseType],p=a.TelemetryTypeStringToQuickPulseDocumentType[c.data.baseType]):n.warn("Document type invalid; not sending live metric document",c.data.baseType),m=c.tags[f.keys.operationId],g=f.aggregateProperties(c);var E={DocumentType:p,__type:v,OperationId:m,Version:"1.0",Properties:g};return E},f.aggregateProperties=function(c){var p=[],v=c.data.baseData.measurements||{};for(var m in v)if(v.hasOwnProperty(m)){var g=v[m],E={key:m,value:g};p.push(E)}var T=c.data.baseData.properties||{};for(var m in T)if(T.hasOwnProperty(m)){var g=T[m],E={key:m,value:g};p.push(E)}return p},f.keys=new u.ContextTagKeys,f}();r.exports=l}),lm=N((e,r)=>{"use strict";var t=function(){return(Date.now()+621355968e5)*1e4};r.exports={getTransmissionTime:t}}),fm=N((e,r)=>{"use strict";var t=e&&e.__awaiter||function(c,p,v,m){function g(E){return E instanceof v?E:new v(function(T){T(E)})}return new(v||(v=Promise))(function(E,T){function P(M){try{A(m.next(M))}catch(j){T(j)}}function O(M){try{A(m.throw(M))}catch(j){T(j)}}function A(M){M.done?E(M.value):g(M.value).then(P,O)}A((m=m.apply(c,p||[])).next())})},i=e&&e.__generator||function(c,p){var v={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},m,g,E,T;return T={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function P(A){return function(M){return O([A,M])}}function O(A){if(m)throw new TypeError("Generator is already executing.");for(;v;)try{if(m=1,g&&(E=A[0]&2?g.return:A[0]?g.throw||((E=g.return)&&E.call(g),0):g.next)&&!(E=E.call(g,A[1])).done)return E;switch(g=0,E&&(A=[A[0]&2,E.value]),A[0]){case 0:case 1:E=A;break;case 4:return v.label++,{value:A[1],done:!1};case 5:v.label++,g=A[1],A=[0];continue;case 7:A=v.ops.pop(),v.trys.pop();continue;default:if(E=v.trys,!(E=E.length>0&&E[E.length-1])&&(A[0]===6||A[0]===2)){v=0;continue}if(A[0]===3&&(!E||A[1]>E[0]&&A[1]<E[3])){v.label=A[1];break}if(A[0]===6&&v.label<E[1]){v.label=E[1],E=A;break}if(E&&v.label<E[2]){v.label=E[2],v.ops.push(A);break}E[2]&&v.ops.pop(),v.trys.pop();continue}A=p.call(c,v)}catch(M){A=[6,M],g=0}finally{m=E=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},u=require("https"),a=di(),o=mr(),n=lm(),s=Ur(),l={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},f=function(){function c(p){this._config=p,this._consecutiveErrors=0}return c.prototype.ping=function(p,v,m){var g=[{name:l.streamId,value:p.StreamId},{name:l.machineName,value:p.MachineName},{name:l.roleName,value:p.RoleName},{name:l.instanceName,value:p.Instance},{name:l.invariantVersion,value:p.InvariantVersion.toString()}];this._submitData(p,v,m,"ping",g)},c.prototype.post=function(p,v,m){return t(this,void 0,void 0,function(){return i(this,function(g){switch(g.label){case 0:return[4,this._submitData([p],v,m,"post")];case 1:return g.sent(),[2]}})})},c.prototype._submitData=function(p,v,m,g,E){return t(this,void 0,void 0,function(){var T,P,O,A,M,j=this;return i(this,function(G){return T=JSON.stringify(p),P=(A={},A[a.disableCollectionRequestOption]=!0,A.host=v&&v.length>0?v:this._config.quickPulseHost,A.method=l.method,A.path="/QuickPulseService.svc/"+g+"?ikey="+this._config.instrumentationKey,A.headers=(M={Expect:"100-continue"},M[l.time]=n.getTransmissionTime(),M["Content-Type"]="application/json",M["Content-Length"]=Buffer.byteLength(T),M),A),E&&E.length>0&&E.forEach(function(B){return P.headers[B.name]=B.value}),this._config.httpsAgent?P.agent=this._config.httpsAgent:P.agent=s.tlsRestrictedAgent,O=u.request(P,function(B){if(B.statusCode==200){var Y=B.headers[l.subscribed]==="true",ne=B.headers[l.endpointRedirect]?B.headers[l.endpointRedirect].toString():null,ye=B.headers[l.pollingIntervalHint]?parseInt(B.headers[l.pollingIntervalHint].toString()):null;j._consecutiveErrors=0,m(Y,B,ne,ye)}else j._onError("StatusCode:"+B.statusCode+" StatusMessage:"+B.statusMessage),m()}),O.on("error",function(B){j._onError(B),m()}),O.write(T),O.end(),[2]})})},c.prototype._onError=function(p){this._consecutiveErrors++;var v="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%c.MAX_QPS_FAILURES_BEFORE_WARN===0?(v="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",o.warn(c.TAG,v,p)):o.info(c.TAG,v,p)},c.TAG="QuickPulseSender",c.MAX_QPS_FAILURES_BEFORE_WARN=25,c}();r.exports=f}),dm=N((e,r)=>{"use strict";var t=e&&e.__awaiter||function(f,c,p,v){function m(g){return g instanceof p?g:new p(function(E){E(g)})}return new(p||(p=Promise))(function(g,E){function T(A){try{O(v.next(A))}catch(M){E(M)}}function P(A){try{O(v.throw(A))}catch(M){E(M)}}function O(A){A.done?g(A.value):m(A.value).then(T,P)}O((v=v.apply(f,c||[])).next())})},i=e&&e.__generator||function(f,c){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},v,m,g,E;return E={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function T(O){return function(A){return P([O,A])}}function P(O){if(v)throw new TypeError("Generator is already executing.");for(;p;)try{if(v=1,m&&(g=O[0]&2?m.return:O[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,O[1])).done)return g;switch(m=0,g&&(O=[O[0]&2,g.value]),O[0]){case 0:case 1:g=O;break;case 4:return p.label++,{value:O[1],done:!1};case 5:p.label++,m=O[1],O=[0];continue;case 7:O=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(O[0]===6||O[0]===2)){p=0;continue}if(O[0]===3&&(!g||O[1]>g[0]&&O[1]<g[3])){p.label=O[1];break}if(O[0]===6&&p.label<g[1]){p.label=g[1],g=O;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(O);break}g[2]&&p.ops.pop(),p.trys.pop();continue}O=c.call(f,p)}catch(A){O=[6,A],m=0}finally{v=g=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}},u=mr(),a=cm(),o=fm(),n=pn(),s=Xi(),l=function(){function f(c,p){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=c,this.context=p||new s,this._sender=new o(this.config),this._isEnabled=!1}return f.prototype.addCollector=function(c){this._collectors.push(c)},f.prototype.trackMetric=function(c){this._addMetric(c)},f.prototype.addDocument=function(c){var p=a.telemetryEnvelopeToQuickPulseDocument(c);p&&this._documents.push(p)},f.prototype.enable=function(c){c&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!c&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},f.prototype.enableCollectors=function(c){this._collectors.forEach(function(p){p.enable(c)})},f.prototype._addMetric=function(c){var p=c.value,v=c.count||1,m=n.PerformanceToQuickPulseCounter[c.name];m&&(this._metrics[m]?(this._metrics[m].Value=(this._metrics[m].Value*this._metrics[m].Weight+p*v)/(this._metrics[m].Weight+v),this._metrics[m].Weight+=v):(this._metrics[m]=a.createQuickPulseMetric(c),this._metrics[m].Name=m,this._metrics[m].Weight=1))},f.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},f.prototype._goQuickPulse=function(){return t(this,void 0,void 0,function(){var c,p,v,m,g=this;return i(this,function(E){switch(E.label){case 0:return c=Object.keys(this._metrics).map(function(T){return g._metrics[T]}),p=a.createQuickPulseEnvelope(c,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(p)]:[3,2];case 1:return E.sent(),[3,3];case 2:this._ping(p),E.label=3;case 3:return v=this._pollingIntervalHint>0?this._pollingIntervalHint:f.PING_INTERVAL,m=this._isCollectingData?f.POST_INTERVAL:v,this._isCollectingData&&Date.now()-this._lastSuccessTime>=f.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,m=f.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=f.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(m=f.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),m),this._handle.unref(),[2]}})})},f.prototype._ping=function(c){this._sender.ping(c,this._redirectedHost,this._quickPulseDone.bind(this))},f.prototype._post=function(c){return t(this,void 0,void 0,function(){return i(this,function(p){switch(p.label){case 0:return[4,this._sender.post(c,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return p.sent(),[2]}})})},f.prototype._quickPulseDone=function(c,p,v,m){c!=null?(this._isCollectingData!==c&&(u.info("Live Metrics sending data",c),this.enableCollectors(c)),this._isCollectingData=c,v&&v.length>0&&(this._redirectedHost=v,u.info("Redirecting endpoint to: ",v)),m&&m>0&&(this._pollingIntervalHint=m),p&&p.statusCode<300&&p.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},f.MAX_POST_WAIT_TIME=2e4,f.MAX_PING_WAIT_TIME=6e4,f.FALLBACK_INTERVAL=6e4,f.PING_INTERVAL=5e3,f.POST_INTERVAL=1e3,f}();r.exports=l}),pm=N((e,r)=>{"use strict";var t=pn(),i=function(){function u(){}return u.parse=function(a){if(!a)return{};var o=a.split(u._FIELDS_SEPARATOR),n=o.reduce(function(l,f){var c=f.split(u._FIELD_KEY_VALUE_SEPARATOR);if(c.length===2){var p=c[0].toLowerCase(),v=c[1];l[p]=v}return l},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var s=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+s+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+s+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||t.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||t.DEFAULT_LIVEMETRICS_ENDPOINT}return n},u._FIELDS_SEPARATOR=";",u._FIELD_KEY_VALUE_SEPARATOR="=",u}();r.exports=i}),sl=N((e,r)=>{"use strict";var t=Un(),i=pm(),u=mr(),a=pn(),o=require("url"),n=function(){function s(l){var f=this;this.endpointBase=a.DEFAULT_BREEZE_ENDPOINT;var c=process.env[s.ENV_connectionString],p=i.parse(l),v=i.parse(c),m=!p.instrumentationkey&&Object.keys(p).length>0?null:l;this.instrumentationKey=p.instrumentationkey||m||v.instrumentationkey||s._getInstrumentationKey(),s._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(p.ingestionendpoint||v.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(g){return f.correlationId=g},this.proxyHttpUrl=process.env[s.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[s.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=p.ingestionendpoint||v.ingestionendpoint||process.env[s.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=p.liveendpoint||v.liveendpoint||process.env[s.ENV_quickPulseHost]||a.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=o.parse(this._quickPulseHost).host)}return Object.defineProperty(s.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(l){t.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=l,this.correlationId=t.correlationIdPrefix,t.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(l){this._quickPulseHost=l},enumerable:!1,configurable:!0}),s._getInstrumentationKey=function(){var l=process.env[s.ENV_iKey]||process.env[s.ENV_azurePrefix+s.ENV_iKey]||process.env[s.legacy_ENV_iKey]||process.env[s.ENV_azurePrefix+s.legacy_ENV_iKey];if(!l||l=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return l},s._validateInstrumentationKey=function(l){var f="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",c=new RegExp(f);return c.test(l)},s.ENV_azurePrefix="APPSETTING_",s.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",s.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",s.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",s.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",s.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",s.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",s.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",s.ENV_http_proxy="http_proxy",s.ENV_https_proxy="https_proxy",s}();r.exports=n}),hm=N(e=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(o){for(var n,s=1,l=arguments.length;s<l;s++){n=arguments[s];for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&(o[f]=n[f])}return o},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var t=sl(),i=Xi(),u=mr(),a=function(){function o(n){this._disabledMetrics={},o.INSTANCE&&o.INSTANCE.dispose(),o.INSTANCE=this,this._client=n}return o.isNodeVersionCompatible=function(){var n=process.versions.node.split(".");return parseInt(n[0])>=6},o.prototype.enable=function(n,s,l){var f=this;if(s===void 0&&(s={}),l===void 0&&(l=6e4),!!o.isNodeVersionCompatible()){if(o._metricsAvailable==null&&n&&!this._isInitialized)try{var c=require("applicationinsights-native-metrics");o._emitter=new c,o._metricsAvailable=!0,u.info("Native metrics module successfully loaded!")}catch{o._metricsAvailable=!1;return}this._isEnabled=n,this._disabledMetrics=s,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&o._emitter?(o._emitter.enable(!0,l),this._handle||(this._handle=setInterval(function(){return f._trackNativeMetrics()},l),this._handle.unref())):o._emitter&&(o._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},o.prototype.dispose=function(){this.enable(!1)},o.parseEnabled=function(n){var s=process.env[t.ENV_nativeMetricsDisableAll],l=process.env[t.ENV_nativeMetricsDisablers];if(s)return{isEnabled:!1,disabledMetrics:{}};if(l){var f=l.split(","),c={};if(f.length>0)for(var p=0,v=f;p<v.length;p++){var m=v[p];c[m]=!0}return typeof n=="object"?{isEnabled:!0,disabledMetrics:r(r({},n),c)}:{isEnabled:n,disabledMetrics:c}}return typeof n=="boolean"?{isEnabled:n,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:n}},o.prototype._trackNativeMetrics=function(){var n=!0;typeof this._isEnabled!="object"&&(n=this._isEnabled),n&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},o.prototype._trackGarbageCollection=function(){var n;if(!this._disabledMetrics.gc){var s=o._emitter.getGCData();for(var l in s){var f=s[l].metrics,c=l+" Garbage Collection Duration",p=Math.sqrt(f.sumSquares/f.count-Math.pow(f.total/f.count,2))||0;this._client.trackMetric({name:c,value:f.total,count:f.count,max:f.max,min:f.min,stdDev:p,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,n)})}}},o.prototype._trackEventLoop=function(){var n;if(!this._disabledMetrics.loop){var s=o._emitter.getLoopData(),l=s.loopUsage;if(l.count!=0){var f="Event Loop CPU Time",c=Math.sqrt(l.sumSquares/l.count-Math.pow(l.total/l.count,2))||0;this._client.trackMetric({name:f,value:l.total,count:l.count,min:l.min,max:l.max,stdDev:c,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,n)})}}},o.prototype._trackHeapUsage=function(){var n,s,l;if(!this._disabledMetrics.heap){var f=process.memoryUsage(),c=f.heapUsed,p=f.heapTotal,v=f.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:c,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,n)}),this._client.trackMetric({name:"Memory Total (Heap)",value:p,count:1,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,s)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:v-p,count:1,tagOverrides:(l={},l[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,l)})}},o}();e.AutoCollectNativePerformance=a}),vm=N((e,r)=>{"use strict";var t=mr(),i=function(){function u(a,o,n,s){this._buffer=[],this._lastSend=0,this._isDisabled=a,this._getBatchSize=o,this._getBatchIntervalMs=n,this._sender=s}return u.prototype.setUseDiskRetryCaching=function(a,o,n){this._sender.setDiskRetryMode(a,o,n)},u.prototype.send=function(a){var o=this;if(!this._isDisabled()){if(!a){t.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(a),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){o._timeoutHandle=null,o.triggerSend(!1)},this._getBatchIntervalMs()))}},u.prototype.triggerSend=function(a,o){var n=this._buffer.length<1;n||(a?(this._sender.saveOnCrash(this._buffer),typeof o=="function"&&o("data saved on crash")):this._sender.send(this._buffer,o)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof o=="function"&&o("no data to send")},u}();r.exports=i}),mm=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0;function r(t,i){process.env.WEBSITE_SITE_NAME&&(t.tags[i.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}e.azureRoleEnvironmentTelemetryProcessor=r}),gm=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var r=xr();function t(u,a){var o=u.sampleRate,n=!1;return o==null||o>=100||u.data&&r.TelemetryType.Metric===r.baseTypeToTelemetryType(u.data.baseType)?!0:(a.correlationContext&&a.correlationContext.operation?n=i(a.correlationContext.operation.id)<o:n=Math.random()*100<o,n)}e.samplingTelemetryProcessor=t;function i(u){var a=-2147483648,o=2147483647,n=5381;if(!u)return 0;for(;u.length<8;)u=u+u;for(var s=0;s<u.length;s++)n=((n<<5)+n|0)+u.charCodeAt(s)|0;return n=n<=a?o:Math.abs(n),n/o*100}e.getSamplingHashCode=i}),_m=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var r=Ta(),t=xr();function i(u,a){switch(a&&a.addDocument(u),u.data.baseType){case t.TelemetryTypeString.Exception:r.countException();break;case t.TelemetryTypeString.Request:var o=u.data.baseData;r.countRequest(o.duration,o.success);break;case t.TelemetryTypeString.Dependency:var n=u.data.baseData;r.countDependency(n.duration,n.success);break}return!0}e.performanceMetricsTelemetryProcessor=i}),ym=N(e=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(o){for(var n,s=1,l=arguments.length;s<l;s++){n=arguments[s];for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&(o[f]=n[f])}return o},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var t=xr(),i=ol(),u=xr();function a(o,n){if(i.isEnabled())switch(o.data.baseType){case u.TelemetryTypeString.Exception:var s=o.data.baseData;s.properties=r(r({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var l={cloudRoleInstance:o.tags[n.keys.cloudRoleInstance],cloudRoleName:o.tags[n.keys.cloudRole]};i.countException(l);break;case u.TelemetryTypeString.Trace:var f=o.data.baseData;f.properties=r(r({},f.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var c={cloudRoleInstance:o.tags[n.keys.cloudRoleInstance],cloudRoleName:o.tags[n.keys.cloudRole],traceSeverityLevel:t.SeverityLevel[f.severity]};i.countTrace(c);break;case u.TelemetryTypeString.Request:var p=o.data.baseData;p.properties=r(r({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var v={cloudRoleInstance:o.tags[n.keys.cloudRoleInstance],cloudRoleName:o.tags[n.keys.cloudRole],operationSynthetic:o.tags[n.keys.operationSyntheticSource],requestSuccess:p.success,requestResultCode:p.responseCode};i.countRequest(p.duration,v);break;case u.TelemetryTypeString.Dependency:var m=o.data.baseData;m.properties=r(r({},m.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var g={cloudRoleInstance:o.tags[n.keys.cloudRoleInstance],cloudRoleName:o.tags[n.keys.cloudRole],operationSynthetic:o.tags[n.keys.operationSyntheticSource],dependencySuccess:m.success,dependencyType:m.type,dependencyTarget:m.target,dependencyResultCode:m.resultCode};i.countDependency(m.duration,g);break}return!0}e.preAggregatedMetricsTelemetryProcessor=a}),Em=N(e=>{"use strict";var r=e&&e.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),t=e&&e.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&r(u,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(mm(),e),t(gm(),e),t(_m(),e),t(ym(),e)}),bm=N((e,r)=>{"use strict";var t=e&&e.__awaiter||function(v,m,g,E){function T(P){return P instanceof g?P:new g(function(O){O(P)})}return new(g||(g=Promise))(function(P,O){function A(G){try{j(E.next(G))}catch(B){O(B)}}function M(G){try{j(E.throw(G))}catch(B){O(B)}}function j(G){G.done?P(G.value):T(G.value).then(A,M)}j((E=E.apply(v,m||[])).next())})},i=e&&e.__generator||function(v,m){var g={label:0,sent:function(){if(P[0]&1)throw P[1];return P[1]},trys:[],ops:[]},E,T,P,O;return O={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function A(j){return function(G){return M([j,G])}}function M(j){if(E)throw new TypeError("Generator is already executing.");for(;g;)try{if(E=1,T&&(P=j[0]&2?T.return:j[0]?T.throw||((P=T.return)&&P.call(T),0):T.next)&&!(P=P.call(T,j[1])).done)return P;switch(T=0,P&&(j=[j[0]&2,P.value]),j[0]){case 0:case 1:P=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,T=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(P=g.trys,!(P=P.length>0&&P[P.length-1])&&(j[0]===6||j[0]===2)){g=0;continue}if(j[0]===3&&(!P||j[1]>P[0]&&j[1]<P[3])){g.label=j[1];break}if(j[0]===6&&g.label<P[1]){g.label=P[1],P=j;break}if(P&&g.label<P[2]){g.label=P[2],g.ops.push(j);break}P[2]&&g.ops.pop(),g.trys.pop();continue}j=m.call(v,g)}catch(G){j=[6,G],T=0}finally{E=P=0}if(j[0]&5)throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}},u=require("fs"),a=require("os"),o=require("path"),n=require("zlib"),s=require("child_process"),l=mr(),f=di(),c=Ur(),p=function(){function v(m,g,E){if(this._redirectedHost=null,this._config=m,this._onSuccess=g,this._onError=E,this._enableDiskRetryMode=!1,this._resendInterval=v.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=v.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=o.join(a.tmpdir(),v.TEMPDIR_PREFIX+this._config.instrumentationKey),!v.OS_PROVIDES_FILE_PROTECTION)if(v.USE_ICACLS){try{v.OS_PROVIDES_FILE_PROTECTION=u.existsSync(v.ICACLS_PATH)}catch{}v.OS_PROVIDES_FILE_PROTECTION||l.warn(v.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else v.OS_PROVIDES_FILE_PROTECTION=!0}return v.prototype.setDiskRetryMode=function(m,g,E){var T=this;this._enableDiskRetryMode=v.OS_PROVIDES_FILE_PROTECTION&&m,typeof g=="number"&&g>=0&&(this._resendInterval=Math.floor(g)),typeof E=="number"&&E>=0&&(this._maxBytesOnDisk=Math.floor(E)),m&&!v.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(v.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){T._fileCleanupTask()},v.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},v.prototype.send=function(m,g){return t(this,void 0,void 0,function(){var E,T,P,O,A=this;return i(this,function(M){return m&&(E=this._redirectedHost||this._config.endpointUrl,T={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},P="",m.forEach(function(j){var G=A._stringify(j);typeof G=="string"&&(P+=G+`
`)}),P.length>0&&(P=P.substring(0,P.length-1)),O=Buffer.from?Buffer.from(P):new Buffer(P),n.gzip(O,function(j,G){var B=G;j?(l.warn(j),B=O,T.headers["Content-Length"]=O.length.toString()):(T.headers["Content-Encoding"]="gzip",T.headers["Content-Length"]=G.length.toString()),l.info(v.TAG,T),T[f.disableCollectionRequestOption]=!0;var Y=function(ye){ye.setEncoding("utf-8");var Re="";ye.on("data",function(st){Re+=st}),ye.on("end",function(){if(A._numConsecutiveFailures=0,A._enableDiskRetryMode){if(ye.statusCode===200)A._resendTimer||(A._resendTimer=setTimeout(function(){A._resendTimer=null,A._sendFirstFileOnDisk()},A._resendInterval),A._resendTimer.unref());else if(A._isRetriable(ye.statusCode))try{var st=JSON.parse(Re),ot=[];st.errors.forEach(function(at){A._isRetriable(at.statusCode)&&ot.push(m[at.index])}),ot.length>0&&A._storeToDisk(ot)}catch{A._storeToDisk(m)}}if(ye.statusCode===307||ye.statusCode===308)if(A._numConsecutiveRedirects++,A._numConsecutiveRedirects<10){var Dt=ye.headers.location?ye.headers.location.toString():null;Dt&&(A._redirectedHost=Dt,A.send(m,g))}else typeof g=="function"&&g("Error sending telemetry because of circular redirects.");else A._numConsecutiveRedirects=0,typeof g=="function"&&g(Re),l.info(v.TAG,Re),typeof A._onSuccess=="function"&&A._onSuccess(Re)})},ne=c.makeRequest(A._config,E,T,Y);ne.on("error",function(ye){if(A._numConsecutiveFailures++,!A._enableDiskRetryMode||A._numConsecutiveFailures>0&&A._numConsecutiveFailures%v.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var Re="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";A._enableDiskRetryMode&&(Re="Ingestion endpoint could not be reached "+A._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(v.TAG,Re,c.dumpObj(ye))}else{var Re="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";l.info(v.TAG,Re,c.dumpObj(ye))}A._onErrorHelper(ye),typeof g=="function"&&(ye&&g(c.dumpObj(ye)),g("Error sending telemetry")),A._enableDiskRetryMode&&A._storeToDisk(m)}),ne.write(B),ne.end()})),[2]})})},v.prototype.saveOnCrash=function(m){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(m))},v.prototype._isRetriable=function(m){return m===206||m===408||m===429||m===439||m===500||m===503},v.prototype._runICACLS=function(m,g){var E=s.spawn(v.ICACLS_PATH,m,{windowsHide:!0});E.on("error",function(T){return g(T)}),E.on("close",function(T,P){return g(T===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+T+")"))})},v.prototype._runICACLSSync=function(m){if(s.spawnSync){var g=s.spawnSync(v.ICACLS_PATH,m,{windowsHide:!0});if(g.error)throw g.error;if(g.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+g.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},v.prototype._getACLIdentity=function(m){if(v.ACL_IDENTITY)return m(null,v.ACL_IDENTITY);var g=s.spawn(v.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),E="";g.stdout.on("data",function(T){return E+=T}),g.on("error",function(T){return m(T,null)}),g.on("close",function(T,P){return v.ACL_IDENTITY=E&&E.trim(),m(T===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+T+")"),v.ACL_IDENTITY)})},v.prototype._getACLIdentitySync=function(){if(v.ACL_IDENTITY)return v.ACL_IDENTITY;if(s.spawnSync){var m=s.spawnSync(v.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(m.error)throw m.error;if(m.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+m.status+")");return v.ACL_IDENTITY=m.stdout&&m.stdout.toString().trim(),v.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},v.prototype._getACLArguments=function(m,g){return[m,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",g+":(OI)(CI)F","/inheritance:r"]},v.prototype._applyACLRules=function(m,g){var E=this;if(!v.USE_ICACLS)return g(null);if(v.ACLED_DIRECTORIES[m]===void 0)v.ACLED_DIRECTORIES[m]=!1,this._getACLIdentity(function(T,P){if(T)return v.ACLED_DIRECTORIES[m]=!1,g(T);E._runICACLS(E._getACLArguments(m,P),function(O){return v.ACLED_DIRECTORIES[m]=!O,g(O)})});else return g(v.ACLED_DIRECTORIES[m]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},v.prototype._applyACLRulesSync=function(m){if(v.USE_ICACLS){if(v.ACLED_DIRECTORIES[m]===void 0){this._runICACLSSync(this._getACLArguments(m,this._getACLIdentitySync())),v.ACLED_DIRECTORIES[m]=!0;return}else if(!v.ACLED_DIRECTORIES[m])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},v.prototype._confirmDirExists=function(m,g){var E=this;u.lstat(m,function(T,P){T&&T.code==="ENOENT"?u.mkdir(m,function(O){O&&O.code!=="EEXIST"?g(O):E._applyACLRules(m,g)}):!T&&P.isDirectory()?E._applyACLRules(m,g):g(T||new Error("Path existed but was not a directory"))})},v.prototype._getShallowDirectorySize=function(m,g){u.readdir(m,function(E,T){if(E)return g(E,-1);var P=null,O=0,A=0;if(T.length===0){g(null,0);return}for(var M=0;M<T.length;M++)u.stat(o.join(m,T[M]),function(j,G){A++,j?P=j:G.isFile()&&(O+=G.size),A===T.length&&(P?g(P,-1):g(P,O))})})},v.prototype._getShallowDirectorySizeSync=function(m){for(var g=u.readdirSync(m),E=0,T=0;T<g.length;T++)E+=u.statSync(o.join(m,g[T])).size;return E},v.prototype._storeToDisk=function(m){var g=this;l.info(v.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(E){if(E){l.warn(v.TAG,"Error while checking/creating directory: "+(E&&E.message)),g._onErrorHelper(E);return}g._getShallowDirectorySize(g._tempDir,function(T,P){if(T||P<0){l.warn(v.TAG,"Error while checking directory size: "+(T&&T.message)),g._onErrorHelper(T);return}else if(P>g._maxBytesOnDisk){l.warn(v.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+P);return}var O=new Date().getTime()+".ai.json",A=o.join(g._tempDir,O);l.info(v.TAG,"saving data to disk at: "+A),u.writeFile(A,g._stringify(m),{mode:384},function(M){return g._onErrorHelper(M)})})})},v.prototype._storeToDiskSync=function(m){try{l.info(v.TAG,"Checking existence of data storage directory: "+this._tempDir),u.existsSync(this._tempDir)||u.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var g=this._getShallowDirectorySizeSync(this._tempDir);if(g>this._maxBytesOnDisk){l.info(v.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+g);return}var E=new Date().getTime()+".ai.json",T=o.join(this._tempDir,E);l.info(v.TAG,"saving data before crash to disk at: "+T),u.writeFileSync(T,m,{mode:384})}catch(P){l.warn(v.TAG,"Error while saving data to disk: "+(P&&P.message)),this._onErrorHelper(P)}},v.prototype._sendFirstFileOnDisk=function(){var m=this;u.exists(this._tempDir,function(g){g&&u.readdir(m._tempDir,function(E,T){if(E)m._onErrorHelper(E);else if(T=T.filter(function(A){return o.basename(A).indexOf(".ai.json")>-1}),T.length>0){var P=T[0],O=o.join(m._tempDir,P);u.readFile(O,function(A,M){A?m._onErrorHelper(A):u.unlink(O,function(j){if(j)m._onErrorHelper(j);else try{var G=JSON.parse(M.toString());m.send(G)}catch(B){l.warn("Failed to read persisted file",B)}})})}})})},v.prototype._onErrorHelper=function(m){typeof this._onError=="function"&&this._onError(m)},v.prototype._stringify=function(m){try{return JSON.stringify(m)}catch(g){l.warn("Failed to serialize payload",g,m)}},v.prototype._fileCleanupTask=function(){var m=this;u.exists(this._tempDir,function(g){g&&u.readdir(m._tempDir,function(E,T){E?m._onErrorHelper(E):(T=T.filter(function(P){return o.basename(P).indexOf(".ai.json")>-1}),T.length>0&&T.forEach(function(P){var O=new Date(parseInt(P.split(".ai.json")[0])),A=new Date(+new Date-v.FILE_RETEMPTION_PERIOD)>O;if(A){var M=o.join(m._tempDir,P);u.unlink(M,function(j){j&&m._onErrorHelper(j)})}}))})})},v.TAG="Sender",v.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",v.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",v.ACLED_DIRECTORIES={},v.ACL_IDENTITY=null,v.WAIT_BETWEEN_RESEND=60*1e3,v.MAX_BYTES_ON_DISK=50*1024*1024,v.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,v.CLEANUP_TIMEOUT=60*60*1e3,v.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,v.TEMPDIR_PREFIX="appInsights-node",v.OS_PROVIDES_FILE_PROTECTION=!1,v.USE_ICACLS=a.type()==="Windows_NT",v}();r.exports=p}),Sm=N((e,r)=>{"use strict";var t=xr(),i=Ur(),u=Hn(),a=function(){function n(){}return n.createEnvelope=function(s,l,f,c,p){var v=null;switch(l){case t.TelemetryType.Trace:v=n.createTraceData(s);break;case t.TelemetryType.Dependency:v=n.createDependencyData(s);break;case t.TelemetryType.Event:v=n.createEventData(s);break;case t.TelemetryType.Exception:v=n.createExceptionData(s);break;case t.TelemetryType.Request:v=n.createRequestData(s);break;case t.TelemetryType.Metric:v=n.createMetricData(s);break;case t.TelemetryType.Availability:v=n.createAvailabilityData(s);break;case t.TelemetryType.PageView:v=n.createPageViewData(s);break}if(f&&t.domainSupportsProperties(v.baseData)){if(v&&v.baseData)if(!v.baseData.properties)v.baseData.properties=f;else for(var m in f)v.baseData.properties[m]||(v.baseData.properties[m]=f[m]);v.baseData.properties=i.validateStringMap(v.baseData.properties)}var g=p&&p.instrumentationKey||"",E=new t.Envelope;return E.data=v,E.iKey=g,E.name="Microsoft.ApplicationInsights."+g.replace(/-/g,"")+"."+v.baseType.substr(0,v.baseType.length-4),E.tags=this.getTags(c,s.tagOverrides),E.time=new Date().toISOString(),E.ver=1,E.sampleRate=p?p.samplingPercentage:100,l===t.TelemetryType.Metric&&(E.sampleRate=100),E},n.createTraceData=function(s){var l=new t.MessageData;l.message=s.message,l.properties=s.properties,isNaN(s.severity)?l.severityLevel=t.SeverityLevel.Information:l.severityLevel=s.severity;var f=new t.Data;return f.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Trace),f.baseData=l,f},n.createDependencyData=function(s){var l=new t.RemoteDependencyData;typeof s.name=="string"&&(l.name=s.name.length>1024?s.name.slice(0,1021)+"...":s.name),l.data=s.data,l.target=s.target,l.duration=i.msToTimeSpan(s.duration),l.success=s.success,l.type=s.dependencyTypeName,l.properties=s.properties,l.resultCode=s.resultCode?s.resultCode+"":"",s.id?l.id=s.id:l.id=i.w3cTraceId();var f=new t.Data;return f.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Dependency),f.baseData=l,f},n.createEventData=function(s){var l=new t.EventData;l.name=s.name,l.properties=s.properties,l.measurements=s.measurements;var f=new t.Data;return f.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Event),f.baseData=l,f},n.createExceptionData=function(s){var l=new t.ExceptionData;l.properties=s.properties,isNaN(s.severity)?l.severityLevel=t.SeverityLevel.Error:l.severityLevel=s.severity,l.measurements=s.measurements,l.exceptions=[];var f=s.exception.stack,c=new t.ExceptionDetails;c.message=s.exception.message,c.typeName=s.exception.name,c.parsedStack=this.parseStack(f),c.hasFullStack=i.isArray(c.parsedStack)&&c.parsedStack.length>0,l.exceptions.push(c);var p=new t.Data;return p.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Exception),p.baseData=l,p},n.createRequestData=function(s){var l=new t.RequestData;s.id?l.id=s.id:l.id=i.w3cTraceId(),l.name=s.name,l.url=s.url,l.source=s.source,l.duration=i.msToTimeSpan(s.duration),l.responseCode=s.resultCode?s.resultCode+"":"",l.success=s.success,l.properties=s.properties;var f=new t.Data;return f.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Request),f.baseData=l,f},n.createMetricData=function(s){var l=new t.MetricData;l.metrics=[];var f=new t.DataPoint;f.count=isNaN(s.count)?1:s.count,f.kind=t.DataPointType.Aggregation,f.max=isNaN(s.max)?s.value:s.max,f.min=isNaN(s.min)?s.value:s.min,f.name=s.name,f.stdDev=isNaN(s.stdDev)?0:s.stdDev,f.value=s.value,l.metrics.push(f),l.properties=s.properties;var c=new t.Data;return c.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Metric),c.baseData=l,c},n.createAvailabilityData=function(s){var l=new t.AvailabilityData;s.id?l.id=s.id:l.id=i.w3cTraceId(),l.name=s.name,l.duration=i.msToTimeSpan(s.duration),l.success=s.success,l.runLocation=s.runLocation,l.message=s.message,l.measurements=s.measurements,l.properties=s.properties;var f=new t.Data;return f.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Availability),f.baseData=l,f},n.createPageViewData=function(s){var l=new t.PageViewData;l.name=s.name,l.duration=i.msToTimeSpan(s.duration),l.url=s.url,l.measurements=s.measurements,l.properties=s.properties;var f=new t.Data;return f.baseType=t.telemetryTypeToBaseType(t.TelemetryType.PageView),f.baseData=l,f},n.getTags=function(s,l){var f=u.CorrelationContextManager.getCurrentContext(),c={};if(s&&s.tags)for(var p in s.tags)c[p]=s.tags[p];if(l)for(var p in l)c[p]=l[p];return f&&(c[s.keys.operationId]=c[s.keys.operationId]||f.operation.id,c[s.keys.operationName]=c[s.keys.operationName]||f.operation.name,c[s.keys.operationParentId]=c[s.keys.operationParentId]||f.operation.parentId),c},n.parseStack=function(s){var l=void 0;if(typeof s=="string"){var f=s.split(`
`);l=[];for(var c=0,p=0,v=0;v<=f.length;v++){var m=f[v];if(o.regex.test(m)){var g=new o(f[v],c++);p+=g.sizeInBytes,l.push(g)}}var E=32*1024;if(p>E)for(var T=0,P=l.length-1,O=0,A=T,M=P;T<P;){var j=l[T].sizeInBytes,G=l[P].sizeInBytes;if(O+=j+G,O>E){var B=M-A+1;l.splice(A,B);break}A=T,M=P,T++,P--}}return l},n}(),o=function(){function n(s,l){this.sizeInBytes=0,this.level=l,this.method="<no_method>",this.assembly=i.trim(s);var f=s.match(n.regex);f&&f.length>=5&&(this.method=i.trim(f[2])||this.method,this.fileName=i.trim(f[4])||"<no_filename>",this.line=parseInt(f[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=n.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return n.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,n.baseSize=58,n}();r.exports=a}),Tm=N((e,r)=>{"use strict";var t=require("url"),i=sl(),u=Xi(),a=xr(),o=vm(),n=Em(),s=Hn(),l=bm(),f=Ur(),c=mr(),p=Sm(),v=function(){function m(g){this._telemetryProcessors=[],this._enableAzureProperties=!1;var E=new i(g);this.config=E,this.context=new u,this.commonProperties={};var T=new l(this.config);this.channel=new o(function(){return E.disableAppInsights},function(){return E.maxBatchSize},function(){return E.maxBatchIntervalMs},T)}return m.prototype.trackAvailability=function(g){this.track(g,a.TelemetryType.Availability)},m.prototype.trackPageView=function(g){this.track(g,a.TelemetryType.PageView)},m.prototype.trackTrace=function(g){this.track(g,a.TelemetryType.Trace)},m.prototype.trackMetric=function(g){this.track(g,a.TelemetryType.Metric)},m.prototype.trackException=function(g){g&&g.exception&&!f.isError(g.exception)&&(g.exception=new Error(g.exception.toString())),this.track(g,a.TelemetryType.Exception)},m.prototype.trackEvent=function(g){this.track(g,a.TelemetryType.Event)},m.prototype.trackRequest=function(g){this.track(g,a.TelemetryType.Request)},m.prototype.trackDependency=function(g){g&&!g.target&&g.data&&(g.target=t.parse(g.data).host),this.track(g,a.TelemetryType.Dependency)},m.prototype.flush=function(g){this.channel.triggerSend(g?!!g.isAppCrashing:!1,g?g.callback:void 0)},m.prototype.track=function(g,E){if(g&&a.telemetryTypeToBaseType(E)){var T=p.createEnvelope(g,E,this.commonProperties,this.context,this.config);g.time&&(T.time=g.time.toISOString()),this._enableAzureProperties&&n.azureRoleEnvironmentTelemetryProcessor(T,this.context);var P=this.runTelemetryProcessors(T,g.contextObjects);P=P&&n.samplingTelemetryProcessor(T,{correlationContext:s.CorrelationContextManager.getCurrentContext()}),n.preAggregatedMetricsTelemetryProcessor(T,this.context),P&&(n.performanceMetricsTelemetryProcessor(T,this.quickPulseClient),this.channel.send(T))}else c.warn("track() requires telemetry object and telemetryType to be specified.")},m.prototype.setAutoPopulateAzureProperties=function(g){this._enableAzureProperties=g},m.prototype.addTelemetryProcessor=function(g){this._telemetryProcessors.push(g)},m.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},m.prototype.runTelemetryProcessors=function(g,E){var T=!0,P=this._telemetryProcessors.length;if(P===0)return T;E=E||{},E.correlationContext=s.CorrelationContextManager.getCurrentContext();for(var O=0;O<P;++O)try{var A=this._telemetryProcessors[O];if(A&&A.apply(null,[g,E])===!1){T=!1;break}}catch(M){T=!0,c.warn("One of telemetry processors failed, telemetry item will be sent.",M,g)}return T&&(g&&g.tags&&(g.tags=f.validateStringMap(g.tags)),g&&g.data&&g.data.baseData&&g.data.baseData.properties&&(g.data.baseData.properties=f.validateStringMap(g.data.baseData.properties))),T},m}();r.exports=v}),Im=N((e,r)=>{"use strict";var t=e&&e.__extends||function(){var s=function(l,f){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,p){c.__proto__=p}||function(c,p){for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(c[v]=p[v])},s(l,f)};return function(l,f){s(l,f);function c(){this.constructor=l}l.prototype=f===null?Object.create(f):(c.prototype=f.prototype,new c)}}(),i=Tm(),u=al(),a=di(),o=mr(),n=function(s){t(l,s);function l(){return s!==null&&s.apply(this,arguments)||this}return l.prototype.trackNodeHttpRequestSync=function(f){f&&f.request&&f.response&&f.duration?u.trackRequestSync(this,f):o.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},l.prototype.trackNodeHttpRequest=function(f){(f.duration||f.error)&&o.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),f&&f.request&&f.response?u.trackRequest(this,f):o.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},l.prototype.trackNodeHttpDependency=function(f){f&&f.request?a.trackRequest(this,f):o.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},l}(i);r.exports=n}),wm=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Am=N(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var r=Hn(),t=Yv(),i=Zv(),u=Ta(),a=ol(),o=um(),n=di(),s=al(),l=Un(),f=mr(),c=dm(),p=hm();e.TelemetryClient=Im(),e.Contracts=xr(),e.azureFunctionsTypes=wm();var v;(function(Ae){Ae[Ae.AI=0]="AI",Ae[Ae.AI_AND_W3C=1]="AI_AND_W3C"})(v=e.DistributedTracingModes||(e.DistributedTracingModes={}));var m=!0,g=!1,E=!0,T=!0,P=!0,O=!1,A=!0,M=!0,j=!0,G=!0,B,Y=!1,ne=!0,ye,Re=void 0,st=void 0,ot,Dt,at,oe,ge,le,Ue,X,Ee=!1,se;function We(Ae){return e.defaultClient?f.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(Ae),ot=new t(e.defaultClient),Dt=new i(e.defaultClient),at=new u(e.defaultClient),oe=new a(e.defaultClient),ge=new o(e.defaultClient),Ue=new s(e.defaultClient),X=new n(e.defaultClient),le||(le=new p.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(j,Re,st),ve}e.setup=We;function rt(){return e.defaultClient?(Ee=!0,ot.enable(m,g),Dt.enable(E),at.enable(T),oe.enable(P),ge.enable(O,e.defaultClient.config),le.enable(ne,ye),Ue.useAutoCorrelation(G,B),Ue.enable(A),X.enable(M),e.liveMetricsClient&&Y&&e.liveMetricsClient.enable(Y)):f.warn("Start cannot be called before setup"),ve}e.start=rt;function $(){return G?r.CorrelationContextManager.getCurrentContext():null}e.getCorrelationContext=$;function ee(Ae,xe){return r.CorrelationContextManager.startOperation(Ae,xe)}e.startOperation=ee;function re(Ae,xe){return r.CorrelationContextManager.wrapCallback(Ae,xe)}e.wrapWithCorrelationContext=re;var ve=function(){function Ae(){}return Ae.setDistributedTracingMode=function(xe){return l.w3cEnabled=xe===v.AI_AND_W3C,Ae},Ae.setAutoCollectConsole=function(xe,Qe){return Qe===void 0&&(Qe=!1),m=xe,g=Qe,Ee&&ot.enable(xe,Qe),Ae},Ae.setAutoCollectExceptions=function(xe){return E=xe,Ee&&Dt.enable(xe),Ae},Ae.setAutoCollectPerformance=function(xe,Qe){Qe===void 0&&(Qe=!0),T=xe;var At=p.AutoCollectNativePerformance.parseEnabled(Qe);return ne=At.isEnabled,ye=At.disabledMetrics,Ee&&(at.enable(xe),le.enable(At.isEnabled,At.disabledMetrics)),Ae},Ae.setAutoCollectPreAggregatedMetrics=function(xe){return P=xe,Ee&&oe.enable(xe),Ae},Ae.setAutoCollectHeartbeat=function(xe){return O=xe,Ee&&ge.enable(xe,e.defaultClient.config),Ae},Ae.setAutoCollectRequests=function(xe){return A=xe,Ee&&Ue.enable(xe),Ae},Ae.setAutoCollectDependencies=function(xe){return M=xe,Ee&&X.enable(xe),Ae},Ae.setAutoDependencyCorrelation=function(xe,Qe){return G=xe,B=Qe,Ee&&Ue.useAutoCorrelation(xe,Qe),Ae},Ae.setUseDiskRetryCaching=function(xe,Qe,At){return j=xe,Re=Qe,st=At,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(xe,Qe,At),Ae},Ae.setInternalLogging=function(xe,Qe){return xe===void 0&&(xe=!1),Qe===void 0&&(Qe=!0),f.enableDebug=xe,f.disableWarnings=!Qe,Ae},Ae.setSendLiveMetrics=function(xe){return xe===void 0&&(xe=!1),e.defaultClient?(!e.liveMetricsClient&&xe?(e.liveMetricsClient=new c(e.defaultClient.config,null),se=new u(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(se),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(xe),Y=xe,Ae):(f.warn("Live metrics client cannot be setup without the default client"),Ae)},Ae.start=rt,Ae}();e.Configuration=ve;function Ve(){l.w3cEnabled=!0,e.defaultClient=null,Ee=!1,ot&&ot.dispose(),Dt&&Dt.dispose(),at&&at.dispose(),oe&&oe.dispose(),ge&&ge.dispose(),le&&le.dispose(),Ue&&Ue.dispose(),X&&X.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),Y=!1,e.liveMetricsClient=void 0)}e.dispose=Ve}),ul={};ip(ul,{default:()=>km});cl.exports=op(ul);var Ia=Wi(require("os")),hn=Wi(require("vscode")),Pm=Wi(require("https")),zr=class{constructor(e){this.vscodeAPI=e}getTelemetryLevel(){let e="telemetry",r="enableTelemetry";try{let t=this.vscodeAPI.env.telemetryConfiguration;return t.isUsageEnabled&&t.isErrorsEnabled&&t.isCrashEnabled?"on":t.isErrorsEnabled&&t.isCrashEnabled?"error":"off"}catch{return this.vscodeAPI.env.isTelemetryEnabled!==void 0?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration(e).get(r)?"on":"off"}}static applyReplacements(e,r){for(let t of Object.keys(e))for(let i of r)i.lookup.test(t)&&(i.replacementString!==void 0?e[t]=i.replacementString:delete e[t])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getInstance(e){return zr._instance||(zr._instance=new zr(e)),zr._instance}},Om=class{constructor(e,r,t,i,u,a){this.extensionId=e,this.extensionVersion=r,this.telemetryAppender=t,this.osShim=i,this.vscodeAPI=u,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!a,this.updateUserOptStatus(),u.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(u.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(u.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(u.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let e=zr.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn=e==="on",this.errorOptIn=e==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let r="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(t=>{e.indexOf(`${t}`)===0&&(r=t)}),r}get extension(){return this._extension===void 0&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,r){if(e===null||typeof e!="object"||typeof r!="function")return e;let t={};for(let i in e)t[i]=r(i,e[i]);return t}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?!(this.vscodeAPI.env.remoteName&&this.cleanRemoteName(this.vscodeAPI.env.remoteName)==="other"):!0}getCommonProperties(){let e={};if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(e["common.vscodemachineid"]=this.vscodeAPI.env.machineId,e["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,e["common.vscodeversion"]=this.vscodeAPI.version,e["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",e["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:e["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return e}anonymizeFilePaths(e,r){let t;if(e==null)return"";let i=[];this.vscodeAPI.env.appRoot!==""&&i.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&i.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let u=e;if(r){let a=[];for(let l of i)for(;(t=l.exec(e))&&t;)a.push([t.index,l.lastIndex]);let o=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,s=0;for(u="";(t=n.exec(e))&&t;)t[0]&&!o.test(t[0])&&a.every(([l,f])=>t.index<l||t.index>=f)&&(u+=e.substring(s,t.index)+"<REDACTED: user-file-path>",s=n.lastIndex);s<e.length&&(u+=e.substr(s))}for(let a of i)u=u.replace(a,"");return u}removePropertiesWithPossibleUserInfo(e){if(typeof e!="object")return;let r={};for(let t of Object.keys(e)){let i=e[t];if(!i)continue;let u=/@[a-zA-Z0-9-.]+/,a=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,o=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;a.test(i.toLowerCase())?r[t]="<REDACTED: secret>":u.test(i)?r[t]="<REDACTED: email>":o.test(i)?r[t]="<REDACTED: token>":r[t]=i}return r}get telemetryLevel(){switch(zr.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(e,r,t,i,u){if((this.userOptIn||u)&&e!==""){if(r=wn(wn({},r),this.getCommonProperties()),i){let a=this.cloneAndChange(r,(o,n)=>this.anonymizeFilePaths(n,this.firstParty));r=this.removePropertiesWithPossibleUserInfo(a)}r=r??{},t=t??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:r,measurements:t})}}sendTelemetryEvent(e,r,t){this.internalSendTelemetryEvent(e,r,t,!0,!1)}sendRawTelemetryEvent(e,r,t){this.internalSendTelemetryEvent(e,r,t,!1,!1)}sendDangerousTelemetryEvent(e,r,t,i=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(e,r,t,i,!0)}internalSendTelemetryErrorEvent(e,r,t,i,u){if((this.shouldSendErrorTelemetry()||u)&&e!==""){if(r=wn(wn({},r),this.getCommonProperties()),i){let a=this.cloneAndChange(r,(o,n)=>this.anonymizeFilePaths(n,this.firstParty));r=this.removePropertiesWithPossibleUserInfo(a)}r=r??{},t=t??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:r,measurements:t})}}sendTelemetryErrorEvent(e,r,t){this.internalSendTelemetryErrorEvent(e,r,t,!0,!1)}sendDangerousTelemetryErrorEvent(e,r,t,i=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(e,r,t,i,!0)}internalSendTelemetryException(e,r,t,i,u){if((this.shouldSendErrorTelemetry()||u)&&e){if(r=wn(wn({},r),this.getCommonProperties()),i){let a=this.cloneAndChange(r,(o,n)=>this.anonymizeFilePaths(n,this.firstParty));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),r=this.removePropertiesWithPossibleUserInfo(a)}r=r??{},t=t??{},this.telemetryAppender.logException(e,{properties:r,measurements:t})}}sendTelemetryException(e,r,t){this.internalSendTelemetryException(e,r,t,!0,!1)}sendDangerousTelemetryException(e,r,t,i=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(e,r,t,i,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(e=>e.dispose()))}},Cm=class{constructor(e,r){this._instantiationStatus=0,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=e}logEvent(e,r){if(!this._telemetryClient){this._instantiationStatus!==2&&this._eventQueue.push({eventName:e,data:r});return}this._telemetryClient.logEvent(e,r)}logException(e,r){if(!this._telemetryClient){this._instantiationStatus!==2&&this._exceptionQueue.push({exception:e,data:r});return}this._telemetryClient.logException(e,r)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:r})=>this.logEvent(e,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:r})=>this.logException(e,r)),this._exceptionQueue=[]}instantiateAppender(){this._instantiationStatus===0&&(this._instantiationStatus=1,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=2,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=2}))}},Rm=async(e,r,t)=>{let i=await Promise.resolve().then(()=>Fr(da())),u=await Promise.resolve().then(()=>Fr(mc())),a=new i.AppInsightsCore,o=new u.PostChannel,n={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[o]]};if(t){n.extensionConfig={};let l={alwaysUseXhrOverride:!0,httpXHROverride:t};n.extensionConfig[o.identifier]=l}let s=r.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(n,[]),a.addTelemetryInitializer(l=>{!s||(l.ext=l.ext??{},l.ext.utc=l.ext.utc??{},l.ext.utc.flags=8462029)}),a},Dm=async(e,r,t)=>{let i=await Rm(e,r,t);return{logEvent:(u,a)=>{try{i==null||i.track({name:u,baseData:{name:u,properties:a==null?void 0:a.properties,measurements:a==null?void 0:a.measurements}})}catch(o){throw new Error(`Failed to log event to app insights!
`+o.message)}},logException:(u,a)=>{throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking")},flush:async()=>{try{i==null||i.unload()}catch(u){throw new Error(`Failed to flush app insights!
`+u.message)}}}},Nm=async(e,r)=>{let t;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let i=await Promise.resolve().then(()=>Wi(Am()));i.defaultClient?(t=new i.TelemetryClient(e),t.channel.setUseDiskRetryCaching(!0)):(i.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),t=i.defaultClient),hn&&hn.env&&(t.context.tags[t.context.keys.userId]=hn.env.machineId,t.context.tags[t.context.keys.sessionId]=hn.env.sessionId,t.context.tags[t.context.keys.cloudRole]=hn.env.appName,t.context.tags[t.context.keys.cloudRoleInstance]=hn.env.appName),e&&e.indexOf("AIF-")===0&&(t.config.endpointUrl="https://mobile.events.data.microsoft.com/collect/v1")}catch(i){return Promise.reject(`Failed to initialize app insights!
`+i.message)}return r!=null&&r.length&&xm(t,r),{logEvent:(i,u)=>{try{t==null||t.trackEvent({name:i,properties:u==null?void 0:u.properties,measurements:u==null?void 0:u.measurements})}catch(a){throw new Error(`Failed to log event to app insights!
`+a.message)}},logException:(i,u)=>{try{t==null||t.trackException({exception:i,properties:u==null?void 0:u.properties,measurements:u==null?void 0:u.measurements})}catch(a){throw new Error(`Failed to log exception to app insights!
`+a.message)}},flush:async()=>{try{t==null||t.flush()}catch(i){throw new Error(`Failed to flush app insights!
`+i.message)}}}};function xm(e,r){e.addTelemetryProcessor(t=>(Array.isArray(t.tags)?t.tags.forEach(i=>zr.applyReplacements(i,r)):t.tags&&zr.applyReplacements(t.tags,r),t.data.baseData&&zr.applyReplacements(t.data.baseData,r),!0))}function Mm(){return{sendPOST:(e,r)=>{let t={method:"POST",headers:np(wn({},e.headers),{"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)})};try{let i=Pm.request(e.urlString,t,u=>{u.on("data",function(a){r(u.statusCode??200,u.headers,a.toString())}),u.on("error",function(){r(0,{})})});i.write(e.data),i.end()}catch{r(0,{})}}}}var km=class extends Om{constructor(e,r,t,i,u){let a=n=>Nm(n,u);zr.shouldUseOneDataSystemSDK(t)&&(a=n=>Dm(n,hn,Mm()));let o=new Cm(t,a);t&&(t.indexOf("AIF-")===0||zr.shouldUseOneDataSystemSDK(t))&&(i=!0),super(e,r,o,{release:Ia.release(),platform:Ia.platform(),architecture:Ia.arch()},hn,i)}}});var Ra=Ht(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});var El=class{constructor(r,t,i){this.bias=r,this.backoffA=t,this.backoffB=i}next(r){let t=this.backoffA.next(r),i=this.backoffB.next(r);return t&&i&&bl(this.bias,t,i)}};Ca.CompositeBackoff=El;var bl=(e,r,t)=>({get duration(){switch(e){case"a":return r.duration;case"b":return t.duration;case"max":return Math.max(t.duration,r.duration);case"min":return Math.min(t.duration,r.duration);default:throw new Error(`Unknown bias "${e}" given to CompositeBackoff`)}},next(i){let u=r.next(i),a=t.next(i);return u&&a&&bl(e,u,a)}})});var Na=Ht(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});var Da=class{constructor(r,t){this.interval=r,this.limit=t}next(){return Sl(this.interval,this.limit)}};to.ConstantBackoff=Da;to.NeverRetryBackoff=new Da(0,0);var Sl=(e,r,t=0)=>({duration:e,next(){if(r===void 0)return this;if(!(t>=r-1))return Sl(e,r,t+1)}})});var ka=Ht(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});var Tl=class{constructor(r){this.fn=r}next(r){return xa(this.fn).next(r)}};Ma.DelegateBackoff=Tl;var xa=(e,r,t=0)=>({duration:t,next(i){let u=e(i,r);if(u!==void 0)return typeof u=="number"?xa(e,r,u):xa(e,u.state,u.delay)}})});var La=Ht(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.noJitterGenerator=(e=0,r)=>[Math.min(r.maxDelay,r.initialDelay*2**e),e+1];mn.fullJitterGenerator=(e,r)=>{let[t,i]=mn.noJitterGenerator(e,r);return[Math.floor(Math.random()*t),i]};mn.halfJitterGenerator=(e,r)=>{let[t,i]=mn.noJitterGenerator(e,r);return[Math.floor((t+Math.random()*t)/2),i]};var Qm=4,Ym=1/1.4;mn.decorrelatedJitterGenerator=(e,r)=>{let[t,i]=e||[0,0],u=t+Math.random(),a=Math.pow(r.exponent,u)*Math.tanh(Math.sqrt(Qm*u)),o=Math.max(0,a-i);return[Math.min(o*Ym*r.initialDelay,r.maxDelay),[t+1,a]]}});var Pl=Ht(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});var Zm=La(),Il={generator:Zm.decorrelatedJitterGenerator,maxDelay:3e4,maxAttempts:1/0,exponent:2,initialDelay:128},wl=class{constructor(r){this.options=r?{...Il,...r}:Il}next(){return Al(this.options).next(void 0)}};ja.ExponentialBackoff=wl;var Al=(e,r,t=0,i=-1)=>({duration:t,next(){if(i>=e.maxAttempts-1)return;let[u,a]=e.generator(r,e);return Al(e,a,u,i+1)}})});var Ua=Ht(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});var Ol=class{constructor(r){this.durations=r}next(){return Cl(this.durations,0)}};Fa.IterableBackoff=Ol;var Cl=(e,r)=>({duration:e[r],next:()=>r<e.length-1?Cl(e,r+1):void 0})});var Ha=Ht(ro=>{"use strict";function qn(e){for(var r in e)ro.hasOwnProperty(r)||(ro[r]=e[r])}Object.defineProperty(ro,"__esModule",{value:!0});qn(Ra());qn(Na());qn(ka());qn(Pl());qn(La());qn(Ua())});var no=Ht(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});var Rl=class extends Error{constructor(r="Operation cancelled"){super(r);this.message=r,this.isTaskCancelledError=!0}};qa.TaskCancelledError=Rl});var _n=Ht(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});var Dl=no();gn.noopDisposable={dispose:()=>{}};var Jm;(function(e){e.once=(r,t)=>{let i=!1,u;return u=r(a=>{t(a),u?u.dispose():i=!0}),i?(u.dispose(),gn.noopDisposable):u},e.toPromise=(r,t)=>t?t.isCancellationRequested?Promise.reject(new Dl.TaskCancelledError):new Promise((i,u)=>{let a=e.once(r,n=>{o.dispose(),i(n)}),o=e.once(t.onCancellationRequested,()=>{a.dispose(),u(new Dl.TaskCancelledError)})}):new Promise(i=>e.once(r,i))})(Jm=gn.Event||(gn.Event={}));var Ba=class{constructor(){this.addListener=r=>this.addListenerInner(r)}get size(){return this.listeners?typeof this.listeners=="function"?1:this.listeners.length:0}emit(r){if(this.listeners)if(typeof this.listeners=="function")this.listeners(r);else for(let t of this.listeners)t(r)}addListenerInner(r){return this.listeners?typeof this.listeners=="function"?this.listeners=[this.listeners,r]:this.listeners.push(r):this.listeners=r,{dispose:()=>this.removeListener(r)}}removeListener(r){if(!this.listeners)return;if(typeof this.listeners=="function"){this.listeners===r&&(this.listeners=void 0);return}let t=this.listeners.indexOf(r);t!==-1&&(this.listeners.length===2?this.listeners=t===0?this.listeners[1]:this.listeners[0]:this.listeners=this.listeners.slice(0,t).concat(this.listeners.slice(t+1)))}};gn.EventEmitter=Ba;var Nl=class extends Ba{constructor(){super(...arguments);this.addListener=r=>{let t=this.addListenerInner(r);return this.lastValue&&r(this.lastValue.value),t}}get hasEmitted(){return!!this.lastValue}emit(r){this.lastValue={value:r},super.emit(r)}};gn.MemorizingEventEmitter=Nl});var en=Ht(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});var vi=_n(),xl=class{constructor(r){this.onCancel=new vi.MemorizingEventEmitter,this.token=new An(this.onCancel.addListener),r&&(this.parentListener=r.onCancellationRequested(()=>this.cancel()))}cancel(){this.parentListener&&(this.parentListener.dispose(),this.parentListener=void 0),this.onCancel.hasEmitted||this.onCancel.emit()}};io.CancellationTokenSource=xl;var An=class{constructor(r){this.onCancellationRequested=r,this.isRequested=!1,vi.Event.once(r,()=>this.isRequested=!0)}get isCancellationRequested(){return this.isRequested}cancellation(r){return vi.Event.toPromise(this.onCancellationRequested,r)}};io.CancellationToken=An;An.None=new An(()=>vi.noopDisposable);An.Cancelled=new An(e=>(e(void 0),vi.noopDisposable))});var Bn=Ht(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});var Ml=_n();ao.returnOrThrow=e=>{if("error"in e)throw e.error;return"success"in e?e.success:e.value};var eg=()=>{if(typeof performance!="undefined"){let e=performance.now();return()=>performance.now()-e}else{let e=process.hrtime.bigint();return()=>Number(process.hrtime.bigint()-e)/1e6}},oo=class{constructor(r=()=>!1,t=()=>!1){this.errorFilter=r,this.resultFilter=t,this.successEmitter=new Ml.EventEmitter,this.failureEmitter=new Ml.EventEmitter,this.onSuccess=this.successEmitter.addListener,this.onFailure=this.failureEmitter.addListener}derive(){let r=new oo(this.errorFilter,this.resultFilter);return r.onSuccess(t=>this.successEmitter.emit(t)),r.onFailure(t=>this.failureEmitter.emit(t)),r}async invoke(r,...t){let i=this.successEmitter.size||this.failureEmitter.size?eg():null;try{let u=await r(...t);return this.resultFilter(u)?(i&&this.failureEmitter.emit({duration:i(),handled:!0,reason:{value:u}}),{value:u}):(i&&this.successEmitter.emit({duration:i()}),{success:u})}catch(u){let a=this.errorFilter(u);if(i&&this.failureEmitter.emit({duration:i(),handled:a,reason:{error:u}}),!a)throw u;return{error:u}}}};ao.ExecuteWrapper=oo});var Va=Ht(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});var kl=class extends Error{constructor(r="Execution prevented because the circuit breaker is open"){super(r);this.isBrokenCircuitError=!0}};Ga.BrokenCircuitError=kl});var Wa=Ht(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});var Ll=class extends Error{constructor(r,t){super(`Bulkhead capacity exceeded (0/${r} execution slots, 0/${t} available)`);this.isBulkheadRejectedError=!0}};za.BulkheadRejectedError=Ll});var Ka=Ht($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});var tg=Va(),jl=class extends tg.BrokenCircuitError{constructor(){super("Execution prevented because the circuit breaker is open");this.isIsolatedCircuitError=!0}};$a.IsolatedCircuitError=jl});var uo=Ht(yn=>{"use strict";function so(e){for(var r in e)yn.hasOwnProperty(r)||(yn[r]=e[r])}Object.defineProperty(yn,"__esModule",{value:!0});so(Va());so(Wa());so(Ka());so(no());yn.isBrokenCircuitError=e=>!!e&&e instanceof Error&&"isBrokenCircuitError"in e;yn.isBulkheadRejectedError=e=>!!e&&e instanceof Error&&"isBulkheadRejectedError"in e;yn.isIsolatedCircuitError=e=>!!e&&e instanceof Error&&"isBulkheadRejectedError"in e;yn.isTaskCancelledError=e=>!!e&&e instanceof Error&&"isBulkheadRejectedError"in e});var lo=Ht(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});var rg=en(),co=_n(),Fl=Bn(),Ul=uo(),ng=Ka(),er;(function(e){e[e.Closed=0]="Closed",e[e.Open=1]="Open",e[e.HalfOpen=2]="HalfOpen",e[e.Isolated=3]="Isolated"})(er=mi.CircuitState||(mi.CircuitState={}));var Hl=class{constructor(r,t){this.options=r,this.executor=t,this.breakEmitter=new co.EventEmitter,this.resetEmitter=new co.EventEmitter,this.halfOpenEmitter=new co.EventEmitter,this.stateChangeEmitter=new co.EventEmitter,this.innerState={value:er.Closed},this.onBreak=this.breakEmitter.addListener,this.onReset=this.resetEmitter.addListener,this.onHalfOpen=this.halfOpenEmitter.addListener,this.onStateChange=this.stateChangeEmitter.addListener,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure}get state(){return this.innerState.value}get lastFailure(){return this.innerLastFailure}isolate(){this.innerState.value!==er.Isolated&&(this.innerState={value:er.Isolated,counters:0},this.breakEmitter.emit({isolated:!0}),this.stateChangeEmitter.emit(er.Isolated)),this.innerState.counters++;let r=!1;return{dispose:()=>{r||(r=!0,this.innerState.value===er.Isolated&&!--this.innerState.counters&&(this.innerState={value:er.Closed},this.resetEmitter.emit(),this.stateChangeEmitter.emit(er.Closed)))}}}async execute(r,t=rg.CancellationToken.None){let i=this.innerState;switch(i.value){case er.Closed:let u=await this.executor.invoke(r,{cancellationToken:t});return"success"in u?this.options.breaker.success(i.value):(this.innerLastFailure=u,this.options.breaker.failure(i.value)&&this.open(u)),Fl.returnOrThrow(u);case er.HalfOpen:if(await i.test.catch(()=>{}),this.state===er.Closed&&t.isCancellationRequested)throw new Ul.TaskCancelledError;return this.execute(r);case er.Open:if(Date.now()-i.openedAt<this.options.halfOpenAfter)throw new Ul.BrokenCircuitError;let a=this.halfOpen(r,t);return this.innerState={value:er.HalfOpen,test:a},this.stateChangeEmitter.emit(er.HalfOpen),a;case er.Isolated:throw new ng.IsolatedCircuitError;default:throw new Error(`Unexpected circuit state ${i}`)}}async halfOpen(r,t){this.halfOpenEmitter.emit();try{let i=await this.executor.invoke(r,{cancellationToken:t});return"success"in i?(this.options.breaker.success(er.HalfOpen),this.close()):(this.innerLastFailure=i,this.options.breaker.failure(er.HalfOpen),this.open(i)),Fl.returnOrThrow(i)}catch(i){throw this.close(),i}}open(r){this.state===er.Isolated||this.state===er.Open||(this.innerState={value:er.Open,openedAt:Date.now()},this.breakEmitter.emit(r),this.stateChangeEmitter.emit(er.Open))}close(){this.state===er.HalfOpen&&(this.innerState={value:er.Closed},this.resetEmitter.emit(),this.stateChangeEmitter.emit(er.Closed))}};mi.CircuitBreakerPolicy=Hl});var Gl=Ht(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});var ql=lo(),Bl=class{constructor({threshold:r,duration:t,minimumRps:i}){if(this.windows=[],this.currentWindow=0,this.currentFailures=0,this.currentSuccesses=0,r<=0||r>=1)throw new RangeError(`SamplingBreaker threshold should be between (0, 1), got ${r}`);this.threshold=r;let u=Math.max(5,Math.ceil(t/1e3));for(let a=0;a<u;a++)this.windows.push({startedAt:0,failures:0,successes:0});this.windowSize=Math.round(t/u),this.duration=this.windowSize*u,i?this.minimumRpms=i/1e3:this.minimumRpms=5/(r*1e3)}success(r){r===ql.CircuitState.HalfOpen&&this.resetWindows(),this.push(!0)}failure(r){if(this.push(!1),r!==ql.CircuitState.Closed)return!0;let t=this.currentSuccesses+this.currentFailures;return t<this.duration*this.minimumRpms?!1:this.currentFailures>this.threshold*t}resetWindows(){this.currentFailures=0,this.currentSuccesses=0;for(let r of this.windows)r.failures=0,r.successes=0,r.startedAt=0}rotateWindow(r){let t=(this.currentWindow+1)%this.windows.length;this.currentFailures-=this.windows[t].failures,this.currentSuccesses-=this.windows[t].successes;let i=this.windows[t]={failures:0,successes:0,startedAt:r};return this.currentWindow=t,i}push(r){let t=Date.now(),i=this.windows[this.currentWindow];t-i.startedAt>=this.windowSize&&(i=this.rotateWindow(t)),r?(i.successes++,this.currentSuccesses++):(i.failures++,this.currentFailures++)}};Xa.SamplingBreaker=Bl});var zl=Ht(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});var Vl=class{constructor(r){this.threshold=r,this.count=0}success(){this.count=0}failure(){return++this.count>=this.threshold}};Qa.ConsecutiveBreaker=Vl});var $l=Ht(fo=>{"use strict";function Wl(e){for(var r in e)fo.hasOwnProperty(r)||(fo[r]=e[r])}Object.defineProperty(fo,"__esModule",{value:!0});Wl(Gl());Wl(zl())});var Kl=Ht(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.defer=()=>{let e,r,t=new Promise((i,u)=>{e=i,r=u});return{resolve:e,reject:r,promise:t}}});var Ja=Ht(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});var ig=en(),og=Kl(),ag=_n(),sg=Bn(),ug=Wa(),cg=uo(),Xl=class{constructor(r,t){this.capacity=r,this.queueCapacity=t,this.active=0,this.queue=[],this.onRejectEmitter=new ag.EventEmitter,this.executor=new sg.ExecuteWrapper,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure,this.onReject=this.onRejectEmitter.addListener}get executionSlots(){return this.capacity-this.active}get queueSlots(){return this.queueCapacity-this.queue.length}async execute(r,t=ig.CancellationToken.None){if(t.isCancellationRequested)throw new cg.TaskCancelledError;if(this.active<this.capacity){this.active++;try{return await r({cancellationToken:t})}finally{this.active--,this.dequeue()}}if(this.queue.length<this.queueCapacity){let{resolve:i,reject:u,promise:a}=og.defer();return this.queue.push({ct:t,fn:r,resolve:i,reject:u}),a}throw this.onRejectEmitter.emit(),new ug.BulkheadRejectedError(this.capacity,this.queueCapacity)}dequeue(){let r=this.queue.shift();!r||Promise.resolve().then(()=>this.execute(r.fn,r.ct)).then(r.resolve).catch(r.reject)}};Za.BulkheadPolicy=Xl});var ts=Ht(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});var lg=en(),Ql=class{constructor(r,t){this.executor=r,this.value=t,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure}async execute(r,t=lg.CancellationToken.None){let i=await this.executor.invoke(r,{cancellationToken:t});return"success"in i?i.success:this.value()}};es.FallbackPolicy=Ql});var ns=Ht(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});var fg=en(),Yl=Bn(),Zl=class{constructor(){this.executor=new Yl.ExecuteWrapper,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure}async execute(r,t=fg.CancellationToken.None){return Yl.returnOrThrow(await this.executor.invoke(r,{cancellationToken:t}))}};rs.NoopPolicy=Zl});var as=Ht(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});var dg=Ha(),pg=Ra(),is=Na(),hg=ka(),vg=Ua(),mg=en(),Jl=_n(),gg=(e,r)=>new Promise(t=>{let i=setTimeout(t,e);r&&i.unref()}),po=class{constructor(r,t){this.options=r,this.executor=t,this.onGiveUpEmitter=new Jl.EventEmitter,this.onRetryEmitter=new Jl.EventEmitter,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure,this.onRetry=this.onRetryEmitter.addListener,this.onGiveUp=this.onGiveUpEmitter.addListener}attempts(r){return this.composeBackoff("a",new is.ConstantBackoff(1,r))}delay(r){return this.composeBackoff("b",typeof r=="number"?new is.ConstantBackoff(r):new vg.IterableBackoff(r))}delegate(r){return this.composeBackoff("b",new hg.DelegateBackoff(r))}exponential(r={}){return this.composeBackoff("b",new dg.ExponentialBackoff(r))}backoff(r){return this.composeBackoff("b",r)}dangerouslyUnref(){return this.derivePolicy({...this.options,unref:!0})}async execute(r,t=mg.CancellationToken.None){let i=this.options.backoff||new is.ConstantBackoff(0,1),u;for(let a=0;;a++){let o=await this.executor.invoke(r,{attempt:a,cancellationToken:t});if("success"in o)return o.success;if(!t.isCancellationRequested){let n={attempt:a+1,cancellationToken:t,result:o};if(a===0?u=i.next(n):u&&(u=u.next(n)),u){let s=u.duration,l=gg(s,!!this.options.unref);this.onRetryEmitter.emit({...o,delay:s}),await l;continue}}if(this.onGiveUpEmitter.emit(o),"error"in o)throw o.error;return o.value}}composeBackoff(r,t){return this.options.backoff&&(t=new pg.CompositeBackoff(r,this.options.backoff,t)),this.derivePolicy({...this.options,backoff:t})}derivePolicy(r){let t=new po(r,this.executor.derive());return t.onRetry(i=>this.onRetryEmitter.emit(i)),t}};os.RetryPolicy=po});var us=Ht(gi=>{"use strict";Object.defineProperty(gi,"__esModule",{value:!0});var ef=en(),_g=_n(),ss=Bn(),yg=no(),tf;(function(e){e.Cooperative="optimistic",e.Aggressive="aggressive"})(tf=gi.TimeoutStrategy||(gi.TimeoutStrategy={}));var ho=class{constructor(r,t,i=new ss.ExecuteWrapper,u=!1){this.duration=r,this.strategy=t,this.executor=i,this.unref=u,this.timeoutEmitter=new _g.EventEmitter,this.onTimeout=this.timeoutEmitter.addListener,this.onFailure=this.executor.onFailure,this.onSuccess=this.executor.onSuccess}dangerouslyUnref(){return new ho(this.duration,this.strategy,this.executor,!0)}async execute(r,t=ef.CancellationToken.None){let i=new ef.CancellationTokenSource(t),u=setTimeout(()=>i.cancel(),this.duration);this.unref&&u.unref();let a={cancellation:i.token,cancellationToken:i.token},o=i.token.onCancellationRequested(()=>this.timeoutEmitter.emit());try{return this.strategy===tf.Cooperative?ss.returnOrThrow(await this.executor.invoke(r,a,i.token)):await this.executor.invoke(async()=>Promise.race([Promise.resolve(r(a,i.token)),i.token.cancellation(i.token).then(()=>{throw new yg.TaskCancelledError(`Operation timed out after ${this.duration}ms`)})])).then(ss.returnOrThrow)}finally{o.dispose(),i.cancel(),clearTimeout(u)}}};gi.TimeoutPolicy=ho});var rf=Ht(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});var Eg=Ja(),bg=en(),Sg=lo(),cs=Bn(),Tg=ts(),Ig=ns(),wg=as(),Ag=us(),vo=(e,r)=>r?t=>t instanceof e&&r(t):t=>t instanceof e,Pg=()=>!0,_i=()=>!1,Mr=class{constructor(r){this.options=r}static wrap(...r){return{onFailure:r[0].onFailure,onSuccess:r[0].onSuccess,execute(t,i){let u=(a,o)=>o===r.length?t(a):r[o].execute(n=>u({...a,...n},o+1),a.cancellationToken);return Promise.resolve(u({cancellationToken:i},0))}}}static bulkhead(r,t=0){return new Eg.BulkheadPolicy(r,t)}static handleAll(){return new Mr({errorFilter:Pg,resultFilter:_i})}static handleType(r,t){return new Mr({errorFilter:vo(r,t),resultFilter:_i})}static handleWhen(r){return new Mr({errorFilter:r,resultFilter:_i})}static handleResultType(r,t){return new Mr({errorFilter:_i,resultFilter:vo(r,t)})}static handleWhenResult(r){return new Mr({errorFilter:_i,resultFilter:r})}static timeout(r,t){return new Ag.TimeoutPolicy(r,t)}static use(r){return(t,i,u)=>{let a=u.value;if(typeof a!="function")throw new Error(`Can only decorate functions with @cockatiel, got ${typeof a}`);u.value=function(...o){let n=o[o.length-1]instanceof bg.CancellationToken?o.pop():void 0;return r.execute(s=>a.apply(this,[...o,s]),n)}}}orType(r,t){let i=vo(r,t);return new Mr({...this.options,errorFilter:u=>this.options.errorFilter(u)||i(u)})}orWhen(r){return new Mr({...this.options,errorFilter:t=>this.options.errorFilter(t)||r(t)})}orWhenResult(r){return new Mr({...this.options,resultFilter:t=>this.options.resultFilter(t)||r(t)})}orResultType(r,t){let i=vo(r,t);return new Mr({...this.options,resultFilter:u=>this.options.resultFilter(u)||i(u)})}retry(){return new wg.RetryPolicy({},new cs.ExecuteWrapper(this.options.errorFilter,this.options.resultFilter))}circuitBreaker(r,t){return new Sg.CircuitBreakerPolicy({breaker:t,halfOpenAfter:r},new cs.ExecuteWrapper(this.options.errorFilter,this.options.resultFilter))}fallback(r){return new Tg.FallbackPolicy(new cs.ExecuteWrapper(this.options.errorFilter,this.options.resultFilter),typeof r=="function"?r:()=>r)}};ls.Policy=Mr;Mr.noop=new Ig.NoopPolicy});var fs=Ht(Gn=>{"use strict";function Wr(e){for(var r in e)Gn.hasOwnProperty(r)||(Gn[r]=e[r])}Object.defineProperty(Gn,"__esModule",{value:!0});Wr(Ha());Wr($l());Wr(Ja());Wr(en());Wr(lo());var nf=_n();Gn.Event=nf.Event;Gn.EventEmitter=nf.EventEmitter;Wr(uo());Wr(ts());Wr(ns());Wr(rf());Wr(as());Wr(us())});var qg={};Kd(qg,{activate:()=>Ug,deactivate:()=>Hg});var rn=Fr(require("vscode")),_f=Fr(ll());var vn=Fr(require("vscode"));var Lm=require("vscode");function Qi(e=32){let r="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<e;i++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}var wa=e=>e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(0,e.byteLength),Aa=e=>typeof Buffer!="undefined"?Buffer.byteLength(e):new Blob([e]).size,fl=e=>{let r=0;for(let u of e)r+=u.byteLength;let t=new Uint8Array(r),i=0;for(let u of e)t.set(u,i),i+=u.byteLength;return t};var Pa=class{constructor(r){this._extensionURI=r}resolveWebviewView(r,t,i){this._view=r,r.webview.options={enableScripts:!0,localResourceRoots:[this._extensionURI]},r.webview.html=this._getWebviewHTML(r.webview),r.webview.onDidReceiveMessage(u=>{u.type==="ready"&&r.show()}),this._view.onDidDispose(()=>this._view=void 0),r.onDidChangeVisibility(()=>{r.visible&&this._lastMessage&&r.webview.postMessage(this._lastMessage)}),this._lastMessage&&r.webview.postMessage(this._lastMessage)}handleEditorMessage(r){this._lastMessage=r,this._view?.webview.postMessage(r)}show(r){r?.autoReveal&&!vn.workspace.getConfiguration("hexeditor.dataInspector").get("autoReveal",!1)||(this._view&&!r?.forceFocus?this._view.show():vn.commands.executeCommand(`${Pa.viewType}.focus`),this._lastMessage&&this._view?.webview.postMessage(this._lastMessage))}_getWebviewHTML(r){let t=r.asWebviewUri(vn.Uri.joinPath(this._extensionURI,"dist","inspector.js")),i=r.asWebviewUri(vn.Uri.joinPath(this._extensionURI,"dist","inspector.css")),u=vn.workspace.getConfiguration().get("hexeditor.defaultEndianness"),a=Qi();return`<!DOCTYPE html>
            <html lang="en">
            <head>
              <meta charset="UTF-8">
              <!--
                Use a content security policy to only allow loading images from https or from our extension directory,
                and only allow scripts that have a specific nonce.
              -->
              <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${r.cspSource}; script-src 'nonce-${a}';">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <link href="${i}" rel="stylesheet">

              <title>Data Inspector</title>
            </head>
            <body>
              <div id="data-inspector">
                <div class="grid-container">
									<!-- Input elements filled in by dataInspector.ts -->
                  <div class="grid-item endian-select">
                    <label for="endianness">Endianness</label>
                  </div>
                  <div class="grid-item endian-select">
                    <select id="endianness">
                      <option value="little" ${u==="little"?"selected":""}>Little Endian</option>
                      <option value="big" ${u==="big"?"selected":""}>Big Endian</option>
                    </select>
                  </div>
                </div>
              </div>
              <script nonce="${a}" src="${t}"><\/script>
            </body>
            </html>`}},pi=Pa;pi.viewType="hexEditor.dataInspectorView";var pl=Fr(require("vscode"));var Oa=class{constructor(r,t){this.messageHandler=r;this.postMessage=t;this.messageIdCounter=0;this.pendingMessages=new Map}sendEvent(r){this.postMessage({body:r,messageId:this.messageIdCounter++})}sendRequest(r){let t=this.messageIdCounter++;return this.postMessage({body:r,messageId:t}),new Promise((i,u)=>{this.pendingMessages.set(t,{resolve:i,reject:u})})}sendReply(r,t){this.postMessage({body:t,messageId:this.messageIdCounter++,inReplyTo:r.messageId})}handleMessage(r){r.inReplyTo!==void 0?(this.pendingMessages.get(r.inReplyTo)?.resolve(r.body),this.pendingMessages.delete(r.inReplyTo)):Promise.resolve(this.messageHandler(r.body)).then(t=>t&&this.sendReply(r,t))}};var jm=/^0x[a-f0-9]+$/i,Fm=/^[0-9]+$/i,hl=e=>{let r=pl.window.createInputBox();r.placeholder="Enter offset to go to",e.sendEvent({type:6});let t,i=!1;r.onDidChangeValue(u=>{if(!u)t=void 0;else if(jm.test(u))t=parseInt(u.slice(2),16);else if(Fm.test(u))t=parseInt(u,10);else{r.validationMessage="Offset must be provided as a decimal (12345) or hex (0x12345) address";return}r.validationMessage="",t!==void 0&&(r.validationMessage="",e.sendEvent({type:7,offset:t}))}),r.onDidAccept(()=>{i=!0,t!==void 0&&e.sendEvent({type:8,offset:t})}),r.onDidHide(()=>{i||e.sendEvent({type:9})}),r.show()};var Um=typeof atob=="function",Hm=typeof btoa=="function",Yi=typeof Buffer=="function",Yg=typeof TextDecoder=="function"?new TextDecoder:void 0,Zg=typeof TextEncoder=="function"?new TextEncoder:void 0,qm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",hi=Array.prototype.slice.call(qm),Zi=(e=>{let r={};return e.forEach((t,i)=>r[t]=i),r})(hi),Bm=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Ji=String.fromCharCode.bind(String),vl=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):(e,r=t=>t)=>new Uint8Array(Array.prototype.slice.call(e,0).map(r)),Gm=e=>e.replace(/=/g,"").replace(/[+\/]/g,r=>r=="+"?"-":"_"),ml=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Vm=e=>{let r,t,i,u,a="",o=e.length%3;for(let n=0;n<e.length;){if((t=e.charCodeAt(n++))>255||(i=e.charCodeAt(n++))>255||(u=e.charCodeAt(n++))>255)throw new TypeError("invalid character found");r=t<<16|i<<8|u,a+=hi[r>>18&63]+hi[r>>12&63]+hi[r>>6&63]+hi[r&63]}return o?a.slice(0,o-3)+"===".substring(o):a},zm=Hm?e=>btoa(e):Yi?e=>Buffer.from(e,"binary").toString("base64"):Vm,gl=Yi?e=>Buffer.from(e).toString("base64"):e=>{let r=4096,t=[];for(let i=0,u=e.length;i<u;i+=r)t.push(Ji.apply(null,e.subarray(i,i+r)));return zm(t.join(""))},eo=(e,r=!1)=>r?Gm(gl(e)):gl(e);var Wm=e=>{if(e=e.replace(/\s+/g,""),!Bm.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let r,t="",i,u;for(let a=0;a<e.length;)r=Zi[e.charAt(a++)]<<18|Zi[e.charAt(a++)]<<12|(i=Zi[e.charAt(a++)])<<6|(u=Zi[e.charAt(a++)]),t+=i===64?Ji(r>>16&255):u===64?Ji(r>>16&255,r>>8&255):Ji(r>>16&255,r>>8&255,r&255);return t},$m=Um?e=>atob(ml(e)):Yi?e=>Buffer.from(e,"base64").toString("binary"):Wm,Km=Yi?e=>vl(Buffer.from(e,"base64")):e=>vl($m(e),r=>r.charCodeAt(0)),_l=e=>Km(Xm(e));var Xm=e=>ml(e.replace(/[-_]/g,r=>r=="-"?"+":"/"));var Bt=Fr(require("vscode"));var af=Fr(fs());var of=e=>(r,t)=>{let i,u=0,a=t.length-1;for(;u<=a;)i=Math.floor((u+a)/2),e(t[i])>=r?a=i-1:u=i+1;return u};var mo=Symbol("unset"),ds=e=>{let r=mo,t=()=>(r===mo&&(r=e()),r);return t.getValue=()=>r===mo?void 0:r,t.forget=()=>{r=mo},t};var Og=e=>e.op===0?{...e,op:1,previous:e.value}:e.op===1?{...e,op:0,value:e.previous}:{...e,value:e.previous,previous:e.value};var go=class{constructor(r){this.saveGuard=af.Policy.bulkhead(1,1/0);this._unsavedEditIndex=0;this.getSizeInner=ds(()=>this.accessor.getSize());this.getEditTimeline=ds(()=>Rg(this._edits));this._edits=r.edits?r.edits.saved.concat(r.edits.unsaved):[],this._unsavedEditIndex=r.edits?.saved.length??0,this.supportsLengthChanges=r.supportsLengthChanges,this.isFiniteSize=r.isFiniteSize,this.accessor=r.accessor}get uri(){return this.accessor.uri}get isReadonly(){return!!this.accessor.isReadonly}async size(){if(!this.isFiniteSize)return;let r=await this.getSizeInner();if(r===void 0)return;let{sizeDelta:t}=this.getEditTimeline();return r+t}get edits(){return this._edits}get unsavedEdits(){return this._edits.slice(this.unsavedEditIndex)}get unsavedEditIndex(){return this._unsavedEditIndex}get isSynced(){return this.unsavedEditIndex===this.edits.length}readInto(r,t){return this.accessor.read(r,t)}readWithEdits(r=0,t=128*1024){return Cg(this.accessor,this.getEditTimeline().ranges,r,t)}save(){let r=this._edits.slice(this.unsavedEditIndex);return r.length===0?Promise.resolve():(this._unsavedEditIndex+=r.length,this.saveGuard.execute(async()=>{r.some(t=>t.op!==2||t.previous.length!==t.value.length)?await this.accessor.writeStream(this.readWithEdits()):await this.accessor.writeBulk(r.map(t=>({offset:t.offset,data:t.value}))),this.getSizeInner.forget()}))}revert(){this._unsavedEditIndex=0,this._edits=[],this.accessor.invalidate?.(),this.getEditTimeline.forget(),this.getSizeInner.forget()}makeEdits(r){let t=this._edits.length;return this._edits.push(...r),this.getEditTimeline.forget(),{undo:()=>(this.unsavedEditIndex<=t?this._edits.splice(t,r.length):this._edits.push(...r.map(Og)),this.getEditTimeline.forget(),this._edits),redo:()=>(this._edits.push(...r),this.getEditTimeline.forget(),this._edits)}}dispose(){this.accessor.dispose()}};async function*Cg(e,r,t=0,i=1024){let u=new Uint8Array(i);for(let a=0;a<r.length;a++){let o=r[a];if(o.op===1)continue;if(o.op===2){let l=o.offset+o.value.length-t;if(l<=0)continue;let f=l<o.value.length?o.value.subarray(-l):o.value;f.length>0&&(yield f);continue}let n=o.roffset+(a+1<r.length?r[a+1].offset:1/0)-o.offset,s=o.roffset+Math.max(0,t-o.offset);for(;s<n;){let l=await e.read(s,u.subarray(0,Math.min(u.length,n-s)));if(l===0)break;yield u.subarray(0,l),s+=l}}}var Rg=e=>{let r=[{op:0,editIndex:-1,roffset:0,offset:0}],t=(o,n,s)=>n.op===0?{before:{op:0,editIndex:o,roffset:n.roffset,offset:n.offset},after:{op:0,editIndex:o,roffset:n.roffset+s,offset:n.offset+s}}:n.op===1?{before:{op:1,editIndex:o,offset:n.offset},after:{op:1,editIndex:o,offset:n.offset+s}}:{before:{op:2,editIndex:o,offset:n.offset,value:n.value.subarray(0,s)},after:{op:2,editIndex:o,offset:n.offset+s,value:n.value.subarray(s)}},i=of(o=>o.offset),u=0,a=(o,n)=>{for(u+=n;o<r.length;o++)r[o].offset+=n};for(let o=0;o<e.length;o++){let n=e[o],s=i(n.offset,r);(s===r.length||r[s].offset>n.offset)&&s--;let l=r[s];if(n.op===0){let{before:f,after:c}=t(o,l,n.offset-l.offset);r.splice(s,1,f,{op:2,editIndex:o,offset:n.offset,value:n.value},c),a(s+2,n.value.length)}else if(n.op===1||n.op===2){let{before:f}=t(o,l,n.offset-l.offset),c=i(n.offset+n.previous.length,r);(c===r.length||r[c].offset>n.offset)&&c--;let{after:p}=t(o,r[c],n.offset+n.previous.length-r[c].offset);r.splice(s,c-s+1,f,n.op===2?{op:2,editIndex:o,offset:n.offset,value:n.value}:{op:1,editIndex:o,offset:n.offset},p),a(s+2,(n.op===2?n.value.length:0)-n.previous.length)}}return{ranges:r,sizeDelta:u}};var sf=e=>typeof e=="function"?e():e,yi=class{constructor(){this.table=new Map}set(r,t){let i=Ng(r),u=this.table.get(i);if(!u){let o={buf:r,value:sf(t)};return this.table.set(i,[o]),o.value}for(let o of u)if(Dg(o.buf,r))return o.value;let a={buf:r,value:sf(t)};return u.push(a),a.value}*entries(){for(let r of this.table.values())for(let{buf:t,value:i}of r)yield[t,i]}*keys(){for(let r of this.table.values())for(let{buf:t}of r)yield t}*values(){for(let r of this.table.values())for(let{value:t}of r)yield t}};function Dg(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function Ng(e,r=0){r=uf(149417,r);for(let t=0,i=e.length;t<i;t++)r=uf(e[t],r);return r}function uf(e,r){return(r<<5)-r+e|0}var Ei=e=>{let r=0,t=new yi,i=o=>({offset:t.set(o,()=>{let s=r;return r+=o.length,s}),len:o.length}),u=[];for(let o of e)o.op===0?u.push({...o,value:i(o.value)}):o.op===1?u.push({...o,previous:i(o.previous)}):u.push({...o,previous:i(o.previous),value:i(o.value)});let a=new Uint8Array(r);for(let[o,n]of t.entries())a.set(o,n);return{data:a,edits:u}},cf=({edits:e,data:r})=>{let t=({offset:i,len:u})=>r.slice(i,i+u);return e.map(i=>i.op===0?{...i,value:t(i.value)}:i.op===1?{...i,previous:t(i.previous)}:{...i,previous:t(i.previous),value:t(i.value)})};function ps(e){for(;e.length;){let r=e.pop();r&&r.dispose()}}var hs=class{constructor(){this._isDisposed=!1;this._disposables=[]}dispose(){this._isDisposed||(this._isDisposed=!0,ps(this._disposables))}_register(r){return this._isDisposed?r.dispose():this._disposables.push(r),r}get isDisposed(){return this._isDisposed}};var tn=Fr(require("vscode"));var vs=Fr(require("vscode")),Mg=new TextEncoder,kg=new TextDecoder,_o=class{constructor(r){this.uri=r}async write(r){let t=JSON.stringify(r,(i,u)=>u instanceof Uint8Array?{$u8:eo(u)}:u);await vs.workspace.fs.writeFile(this.uri,Mg.encode(t))}async read(){let r;try{r=kg.decode(await vs.workspace.fs.readFile(this.uri))}catch{return[]}return JSON.parse(r,(t,i)=>i&&typeof i=="object"&&"$u8"in i?_l(i.$u8):i)}};var lf=Fr(fs()),ir=Fr(require("vscode")),ms=async(e,r)=>{if(e.scheme==="untitled")return new pf(e,r??new Uint8Array);if(e.scheme==="vscode-debug-memory"){let{permissions:t=0}=await ir.workspace.fs.stat(e);return new hf(e,!!(t&ir.FilePermission.Readonly))}if(e.scheme==="file")try{let t=require("fs");if((await t.promises.stat(e.fsPath)).isFile())return new df(e,t)}catch{}return new gs(e)},ff=class{constructor(r,t){this.path=r;this._fs=t;this.borrowQueue=[];this.disposed=!1}borrow(r){return this.disposed?Promise.reject(new Error("FileHandle was disposed")):new Promise((t,i)=>{this.borrowQueue.push(async u=>{if(u instanceof Error)return i(u);try{t(await r(u))}catch(a){i(a)}}),this.borrowQueue.length===1&&this.process()})}dispose(){this.disposed=!0,this.handle=void 0,this.disposeTimeout&&clearTimeout(this.disposeTimeout),this.rejectAll(new Error("FileHandle was disposed"))}async close(){await this.handle?.close(),this.handle=void 0,this.disposeTimeout&&clearTimeout(this.disposeTimeout)}rejectAll(r){for(;this.borrowQueue.length;)this.borrowQueue.pop()(r)}async process(){for(this.disposeTimeout&&clearTimeout(this.disposeTimeout);this.borrowQueue.length;){if(!this.handle)try{this.handle=await this._fs.promises.open(this.path,this._fs.constants.O_RDWR|this._fs.constants.O_CREAT)}catch(r){return this.rejectAll(r)}await this.borrowQueue[0]?.(this.handle),this.borrowQueue.shift()}this.handle&&(this.disposeTimeout=setTimeout(()=>{this.handle?.close(),this.handle=void 0},1e3))}},Lg=lf.Policy.handleWhen(e=>e.code==="ENOENT").retry().attempts(10).delay(50),df=class{constructor(r,t){this.fs=t;this.supportsIncremetalAccess=!0;this.uri=r.toString(),this.handle=new ff(r.fsPath,t)}watch(r,t){return _s(this.uri,r,t)}async getSize(){return this.handle.borrow(async r=>(await r.stat()).size)}async read(r,t){return this.handle.borrow(async i=>{let{bytesRead:u}=await i.read(t,0,t.byteLength,r);return u})}writeBulk(r){return this.handle.borrow(async t=>{for(let{data:i,offset:u}of r)t.write(i,0,i.byteLength,u)})}async writeStream(r,t){let i=`${this.handle.path}.tmp`,u=await this.fs.promises.open(i,this.fs.constants.O_WRONLY|this.fs.constants.O_CREAT|this.fs.constants.O_TRUNC);try{let a=0;for await(let o of r){if(t?.isCancellationRequested)return;await u.write(o,0,o.byteLength,a),a+=o.byteLength}}finally{await u.close()}return await this.handle.borrow(async()=>{await this.handle.close(),await Lg.execute(()=>this.fs.promises.rename(i,this.handle.path))}),this.handle.borrow(async a=>{if(t?.isCancellationRequested)return;let o=0;for await(let n of r){if(t?.isCancellationRequested)return;await a.write(n,0,n.byteLength,o),o+=n.byteLength}})}dispose(){this.handle.dispose()}},gs=class{constructor(r){this.uri=r.toString(),this.fsPath=r.fsPath,this.isReadonly=ir.workspace.fs.isWritableFileSystem(this.uri)===!1}watch(r,t){return _s(this.uri,r,t)}async getSize(){return(await ir.workspace.fs.stat(ir.Uri.parse(this.uri))).size}async read(r,t){let i=await this.getContents(),u=Math.min(t.length,i.length-r);return t.set(i.subarray(r,u+r)),u}async writeStream(r,t){let i=0,u=[];for await(let n of r){if(t?.isCancellationRequested)throw new ir.CancellationError;u.push(n),i+=n.length}let a=new Uint8Array(i),o=0;for(let n of u)a.set(n,o),o+=n.length;await ir.workspace.fs.writeFile(ir.Uri.parse(this.uri),a)}async writeBulk(r){let t=await this.getContents();for(let{data:i,offset:u}of r)t.set(i,u);return ir.workspace.fs.writeFile(ir.Uri.parse(this.uri),t)}invalidate(){this.contents=void 0}dispose(){this.contents=void 0}getContents(){return this.contents??(this.contents=ir.workspace.fs.readFile(ir.Uri.parse(this.uri))),this.contents}},pf=class extends gs{constructor(r,t){super(r);this.contents=t}getSize(){return Promise.resolve(this.contents.byteLength)}},hf=class{constructor(r,t){this.isReadonly=t;this.supportsIncremetalAccess=!0;this.uri=r.toString()}watch(r,t){return _s(this.uri,r,t)}async getSize(){}async read(r,t){let i=await ir.workspace.fs.readFile(this.referenceRange(r,r+t.length)),u=Math.min(t.length,i.length-r);return t.set(i.subarray(r,u+r)),u}async writeStream(){throw new Error("Not supported")}async writeBulk(r){await Promise.all(r.map(t=>ir.workspace.fs.writeFile(this.referenceRange(t.offset,t.offset+t.data.length),t.data)))}referenceRange(r,t){return ir.Uri.parse(this.uri).with({query:`?range=${r}:${t}`})}invalidate(){}dispose(){}},_s=(e,r,t)=>{let i=e.split("/"),u=i.pop(),a=new ir.RelativePattern(ir.Uri.parse(i.join("/")),u),o=ir.workspace.createFileSystemWatcher(a);return o.onDidChange(r),o.onDidDelete(t),o};var ys=class{start(r,t){this._request?.dispose(),this._request=t,(async()=>{for await(let i of t.search())r.sendEvent({type:2,data:i})})()}cancel(){this._request?.dispose(),this._request=void 0}};var Pn=class extends hs{constructor(r,t,i){super();this.model=r;this.isLargeFile=t;this.baseAddress=i;this.lastSave=0;this.searchProvider=new ys;this._onDidDispose=this._register(new tn.EventEmitter);this.onDidDispose=this._onDidDispose.event;this._onDidRevert=this._register(new tn.EventEmitter);this.onDidRevert=this._onDidRevert.event}static async create(r,{backupId:t,untitledDocumentData:i},u){let a=await ms(r,i),o=new go({accessor:a,isFiniteSize:!0,supportsLengthChanges:!0,edits:t?{unsaved:await new _o(tn.Uri.parse(t)).read(),saved:[]}:void 0}),n=Pn.parseQuery(r.query),s=n.baseAddress?Pn.parseHexOrDecInt(n.baseAddress):0,l=await a.getSize();u.sendTelemetryEvent("fileOpen",{},{fileSize:l??0});let f=tn.workspace.getConfiguration().get("hexeditor.maxFileSize")*1e6,c=!t&&!a.supportsIncremetalAccess&&(l??0)>f;return{document:new Pn(o,c,s),accessor:a}}get isReadonly(){return this.model.isReadonly}get uri(){return tn.Uri.parse(this.model.uri)}readWithEdits(r){return this.model.readWithEdits(r)}async readBufferWithEdits(r,t){let i=new Uint8Array(t),u=0;for await(let a of this.model.readWithEdits(r)){let o=Math.min(a.length,i.length-u);if(i.set(a.subarray(0,o),u),u+=o,u===t)return i}return i.slice(0,u)}async readBuffer(r,t){let i=new Uint8Array(t),u=await this.model.readInto(r,i);return u===t?i:i.slice(0,u)}dispose(){this._onDidDispose.fire(),this.model.dispose(),super.dispose()}get isSynced(){return this.model.isSynced}get edits(){return this.model.edits}get unsavedEditIndex(){return this.model.unsavedEditIndex}makeEdits(r){return this.model.makeEdits(r)}insert(r,t){return this.model.makeEdits([{op:0,offset:r,value:t}])}async replace(r,t){let i=await this.readBufferWithEdits(r,t.length);return i.length===t.length?this.makeEdits([{op:2,offset:r,value:t,previous:i}]):this.makeEdits([{op:2,offset:r,value:t.subarray(0,i.length),previous:i},{op:0,offset:r+i.length,value:t.subarray(i.length)}])}size(){return this.model.size()}async save(r){this.lastSave=Date.now(),await this.model.save(),this.lastSave=Date.now()}async saveAs(r,t){if(t&&t.isCancellationRequested)return;if(!this.model.isFiniteSize)throw new Error("Cannot save a document without a finite size");let i=await ms(r);this.lastSave=Date.now(),await i.writeStream(this.model.readWithEdits()),this.lastSave=Date.now(),this.model.dispose(),this.model=new go({accessor:i,isFiniteSize:!0,supportsLengthChanges:!0})}async revert(r){this.model.revert(),this._onDidRevert.fire()}async backup(r){return await new _o(r).write(this.model.unsavedEdits),{id:r.toString(),delete:async()=>{try{await tn.workspace.fs.delete(r)}catch{}}}}static parseQuery(r){let t={};if(r){let i=(r[0]==="?"?r.substr(1):r).split("&");for(let u of i){let a=u.split("="),o=a.shift();o&&(t[o]=a.join("="))}}return t}static parseHexOrDecInt(r){return r=r.toLowerCase(),r.startsWith("0x")?parseInt(r.substring(2),16):parseInt(r,10)}};var yo=Symbol("Wildcard"),vf=new Uint8Array(255);for(let e=0;e<255;e++)vf[e]=e;var Es=new Uint8Array(255);for(let e=0;e<255;e++)Es[e]=String.fromCharCode(e).toUpperCase().charCodeAt(0);var bs=class{constructor(r,t,i=vf){this.needle=r;this.onMatch=t;this.equivalencyTable=i;this.needleLen=0;this.index=0;this.usableBuffer=0;for(let u of r)u===yo?this.needleLen++:this.needleLen+=u.length;this.buffer=new Uint8Array(this.needleLen)}push(r){let{needleLen:t,buffer:i}=this;for(let u=0;u<r.length;u++)i[this.index++%t]=r[u],this.usableBuffer++,this.attemptMatch()}attemptMatch(){let{needle:r,needleLen:t,buffer:i,index:u,equivalencyTable:a}=this;if(this.usableBuffer<t)return;let o=0;for(let s=0;s<r.length;s++){let l=r[s];if(l===yo){o++;continue}for(let f=0;f<l.length;f++){if(a[l[f]]!==a[i[(u+o)%t]])return;o++}}this.matchTmpBuf||(this.matchTmpBuf=new Uint8Array(t));let n=this.index%t;this.matchTmpBuf.set(i.subarray(n),0),this.matchTmpBuf.set(i.subarray(0,n),t-n),this.onMatch(this.index-t,this.matchTmpBuf),this.usableBuffer=0}};var Is=class{constructor(r,t){this.filesize=r;this.cap=t;this.buffers=new yi;this.fileOffset=0;this.lastYieldedTime=Date.now();this.results=[]}get capped(){return this.cap===0}push(r,t,i){let u=this.buffers.set(r,()=>new Uint8Array(r));this.cap===void 0?this.results.push({from:t,to:i,previous:u}):this.cap>0&&(this.results.push({from:t,to:i,previous:u}),this.cap--)}toYield(){let r=Date.now();if(r-this.lastYieldedTime>Is.targetUpdateInterval){this.lastYieldedTime=r;let t=this.results;return this.results=[],{progress:this.filesize?this.fileOffset/this.filesize:0,results:t}}}final(){return{progress:1,capped:this.capped,results:this.results}}},Eo=Is;Eo.targetUpdateInterval=1e3;var Ss=class{constructor(r,t,i,u){this.document=r;this.query=t;this.isCaseSensitive=i;this.cap=u;this.cancelled=!1}dispose(){this.cancelled=!0}async*search(){let{isCaseSensitive:r,query:t,document:i,cap:u}=this,a=new Eo(await i.size(),u),o=new bs(t.literal.map(n=>n==="*"?yo:n),(n,s)=>a.push(s,n,n+s.length),r?void 0:Es);for await(let n of i.readWithEdits(0)){if(this.cancelled||a.capped){yield a.final();return}o.push(n),a.fileOffset+=n.length;let s=a.toYield();s&&(yield s)}yield a.final()}},jg=8*1024,Ts=class{constructor(r,t,i,u){this.document=r;this.cap=u;this.cancelled=!1;this.re=new RegExp(t.re,i?"g":"ig")}dispose(){this.cancelled=!0}async*search(){let r="",t=0,{re:i,document:u}=this,a=new TextDecoder,o=new TextEncoder,n=new Eo(await u.size(),this.cap);for await(let s of u.readWithEdits(0)){if(this.cancelled||n.capped){yield n.final();return}r+=a.decode(s);let l=0;for(let p of r.matchAll(i)){let v=t+Aa(r.slice(0,p.index)),m=Aa(p[0]);n.push(o.encode(p[0]),v,v+m),l=p.index+p[0].length}n.fileOffset+=s.length;let f=Math.max(r.length-jg,l);f>0&&(t+=f,i.lastIndex=0,r=r.slice(f));let c=n.toYield();c&&(yield c)}yield n.final()}};var ws=class{constructor(){this._webviews=new Set}*get(r){let t=r.toString();for(let i of this._webviews)i.resource===t&&(yield i)}add(r,t,i){let u={resource:r.toString(),messaging:t,webviewPanel:i};this._webviews.add(u),i.onDidDispose(()=>{this._webviews.delete(u)})}};var mf={columnWidth:16,showDecodedText:!0,defaultEndianness:"little",inspectorType:"aside"},gf=Object.keys(mf),On=class{constructor(r,t,i){this._context=r;this._telemetryReporter=t;this._dataInspectorView=i;this.webviews=new ws;this._onDidChangeCustomDocument=new Bt.EventEmitter;this.onDidChangeCustomDocument=this._onDidChangeCustomDocument.event}static register(r,t,i){return Bt.window.registerCustomEditorProvider(On.viewType,new On(r,t,i),{supportsMultipleEditorsPerDocument:!1})}async openCustomDocument(r,t,i){let{document:u,accessor:a}=await Pn.create(r,t,this._telemetryReporter),o=[];o.push(u.onDidRevert(()=>{for(let{messaging:l}of this.webviews.get(u.uri))l.sendEvent({type:3,edits:{edits:[],data:new Uint8Array}}),l.sendEvent({type:5})}));let n=async()=>{if(u.isSynced){Date.now()-u.lastSave<5e3||u.revert();return}let l="This file has changed on disk, but you have unsaved changes. Saving now will overwrite the file on disk with your changes.",f="Overwrite",c="Revert",p=await Bt.window.showWarningMessage(l,f,c);p===f?Bt.commands.executeCommand("workbench.action.files.save"):p==="Revert"&&Bt.commands.executeCommand("workbench.action.files.revert")},s=()=>{Bt.window.showWarningMessage("This file has been deleted! Saving now will create a new file on disk.","Overwrite","Close Editor").then(l=>{l==="Overwrite"?Bt.commands.executeCommand("workbench.action.files.save"):l==="Close Editor"&&Bt.commands.executeCommand("workbench.action.closeActiveEditor")})};return o.push(a.watch(n,s)),u.onDidDispose(()=>{Bt.commands.executeCommand("setContext","hexEditor:showSidebarInspector",!1),Bt.commands.executeCommand("setContext","hexEditor:isActive",!1),ps(o)}),u}async resolveCustomEditor(r,t,i){let u=new Oa(o=>this.onMessage(u,r,o),o=>t.webview.postMessage(o));this.webviews.add(r.uri,u,t),On.currentWebview=u,Bt.commands.executeCommand("setContext","hexEditor:isActive",!0);let a=Bt.workspace.getConfiguration("hexeditor").get("inspectorType")==="sidebar";a&&(Bt.commands.executeCommand("setContext","hexEditor:showSidebarInspector",!0),this._dataInspectorView.show({autoReveal:!0})),t.webview.options={enableScripts:!0},t.webview.html=this.getHtmlForWebview(t.webview),t.onDidChangeViewState(o=>{Bt.commands.executeCommand("setContext","hexEditor:isActive",o.webviewPanel.visible),Bt.commands.executeCommand("setContext","hexEditor:showSidebarInspector",a&&o.webviewPanel.visible),o.webviewPanel.visible?(On.currentWebview=u,this._dataInspectorView.show({autoReveal:!0,forceFocus:!0})):On.currentWebview=void 0}),t.webview.onDidReceiveMessage(o=>u.handleMessage(o))}async saveCustomDocument(r,t){await r.save(t);for(let{messaging:i}of this.webviews.get(r.uri))i.sendEvent({type:4,unsavedEditIndex:r.unsavedEditIndex})}saveCustomDocumentAs(r,t,i){return r.saveAs(t,i)}revertCustomDocument(r,t){return r.revert(t)}backupCustomDocument(r,t,i){return r.backup(t.destination)}getHtmlForWebview(r){let t=r.asWebviewUri(Bt.Uri.joinPath(this._context.extensionUri,"dist","editor.js")),i=r.asWebviewUri(Bt.Uri.joinPath(this._context.extensionUri,"dist","editor.css")),u=Qi();return`
			<!DOCTYPE html>
			<html lang="en">
			<head>
				<meta charset="UTF-8">

				<!--
				Use a content security policy to only allow loading images from https or from our extension directory,
				and only allow scripts that have a specific nonce.
				-->
				<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src ${r.cspSource} blob:; font-src ${r.cspSource}; style-src ${r.cspSource}; script-src 'nonce-${u}';">

				<meta name="viewport" content="width=device-width, initial-scale=1.0">

				<link href="${i}" rel="stylesheet" />
				<script nonce="${u}" src="${t}" defer><\/script>

				<title>Hex Editor</title>
			</head>
			<body>
			</body>
			</html>`}readEditorSettings(){let r=Bt.workspace.getConfiguration("hexeditor"),t={...mf};for(let i of gf)r.has(i)&&(t[i]=r.get(i));return t}writeEditorSettings(r){let t=Bt.workspace.getConfiguration("hexeditor");for(let i of gf){let u=t.inspect(i),a=u?u.workspaceFolderValue!==void 0?Bt.ConfigurationTarget.WorkspaceFolder:u.workspaceValue!==void 0?Bt.ConfigurationTarget.Workspace:Bt.ConfigurationTarget.Global:Bt.ConfigurationTarget.Global;t.update(i,r[i],a)}}async onMessage(r,t,i){switch(i.type){case 10:return{type:0,initialOffset:t.baseAddress,editorSettings:this.readEditorSettings(),edits:Ei(t.edits),unsavedEditIndex:t.unsavedEditIndex,fileSize:await t.size(),isLargeFile:t.isLargeFile,isReadonly:t.isReadonly};case 12:let u=await t.readBuffer(i.offset,i.bytes);return{type:1,data:wa(u)};case 13:this.publishEdit(r,t,t.makeEdits(cf(i.edits)));return;case 19:this.publishEdit(r,t,i.mode==="insert"?t.insert(i.offset,i.data):await t.replace(i.offset,i.data)),r.sendEvent({type:3,edits:Ei(t.edits)});return;case 20:{let o=await Promise.all(i.selections.sort((l,f)=>l[0]-f[0]).map(l=>t.readBuffer(l[0],l[1]-l[0]))),n=fl(o),s=i.asText?new TextDecoder().decode(n):eo(n);Bt.env.clipboard.writeText(s);return}case 15:t.searchProvider.cancel();return;case 14:let a;"re"in i.query?a=new Ts(t,i.query,i.caseSensitive,i.cap):a=new Ss(t,i.query,i.caseSensitive,i.cap),t.searchProvider.start(r,a);return;case 16:this._dataInspectorView.handleEditorMessage({method:"reset"});break;case 17:this._dataInspectorView.handleEditorMessage({method:"update",data:wa(await t.readBufferWithEdits(i.offset,8))});break;case 18:this.writeEditorSettings(i.editorSettings);break}}publishEdit(r,t,i){this._onDidChangeCustomDocument.fire({document:t,undo:()=>r.sendEvent({type:3,edits:Ei(i.undo())}),redo:()=>r.sendEvent({type:3,edits:Ei(i.redo())})})}},Vn=On;Vn.viewType="hexEditor.hexedit";var yf="ms-vscode.hexeditor",bo;function Fg(e){let r=rn.extensions.getExtension(e).packageJSON;return{version:r.version,aiKey:r.aiKey}}function Ug(e){let r=new pi(e.extensionUri),t=Fg(yf);e.subscriptions.push(rn.window.registerWebviewViewProvider(pi.viewType,r)),bo=new _f.default(yf,t.version,t.aiKey);let i=rn.commands.registerCommand("hexEditor.openFile",()=>{let a=rn.window.tabGroups.activeTabGroup.activeTab?.input;a.uri&&rn.commands.executeCommand("vscode.openWith",a.uri,"hexEditor.hexedit")}),u=rn.commands.registerCommand("hexEditor.goToOffset",()=>{Vn.currentWebview&&hl(Vn.currentWebview)});e.subscriptions.push(u),e.subscriptions.push(i),e.subscriptions.push(bo),e.subscriptions.push(Vn.register(e,bo,r))}function Hg(){bo.dispose()}module.exports=Xd(qg);0&&(module.exports={activate,deactivate});
/*!
 * 1DS JS SDK Core, 3.2.3
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */
/*!
 * 1DS JS SDK POST plugin, 3.2.3
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */
/*!
 * Application Insights JavaScript SDK - Core, 2.8.4
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
/*!
 * Microsoft Application Insights JavaScript SDK - Shim functions, 2.0.1
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
/*!
 * Microsoft Dynamic Proto Utility, 1.1.6
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
